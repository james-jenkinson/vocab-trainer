(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const ke={},Ui=(e,t)=>e===t,Xn=Symbol("solid-proxy"),Vi=Symbol("solid-track"),Vt={equals:Ui};let Hi=zr;const je=1,Ht=2,Fr={owned:null,cleanups:null,context:null,owner:null};var N=null;let $e=null,U=null,Q=null,Be=null,Gn=0;function at(e,t){const n=U,r=N,i=e.length===0,o=i?Fr:{owned:null,cleanups:null,context:null,owner:t||r},a=i?e:()=>e(()=>ce(()=>Zn(o)));N=o,U=null;try{return We(a,!0)}finally{U=n,N=r}}function ee(e,t){t=t?Object.assign({},Vt,t):Vt;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),Vr(n,i));return[Ur.bind(n),r]}function ue(e,t,n){const r=Hr(e,t,!1,je);rn(r)}function L(e,t,n){n=n?Object.assign({},Vt,n):Vt;const r=Hr(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,rn(r),Ur.bind(r)}function ce(e){const t=U;U=null;try{return e()}finally{U=t}}function jr(e,t,n){const r=Array.isArray(e);let i,o=n&&n.defer;return a=>{let s;if(r){s=Array(e.length);for(let l=0;l<e.length;l++)s[l]=e[l]()}else s=e();if(o){o=!1;return}const u=ce(()=>t(s,i,a));return i=s,u}}function nn(e){return N===null||(N.cleanups===null?N.cleanups=[e]:N.cleanups.push(e)),e}function qi(){return N}function zi(e,t){const n=N;N=e;try{return We(t,!0)}finally{N=n}}function Yi(e){const t=U,n=N;return Promise.resolve().then(()=>{U=t,N=n;let r;return We(e,!1),U=N=null,r?r.done:void 0})}function Wr(e,t){const n=Symbol("context");return{id:n,Provider:Ji(n),defaultValue:e}}function Qn(e){let t;return(t=Gr(N,e.id))!==void 0?t:e.defaultValue}function Jn(e){const t=L(e),n=L(()=>_n(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Ur(){const e=$e;if(this.sources&&(this.state||e))if(this.state===je||e)rn(this);else{const t=Q;Q=null,We(()=>qt(this),!1),Q=t}if(U){const t=this.observers?this.observers.length:0;U.sources?(U.sources.push(this),U.sourceSlots.push(t)):(U.sources=[this],U.sourceSlots=[t]),this.observers?(this.observers.push(U),this.observerSlots.push(U.sources.length-1)):(this.observers=[U],this.observerSlots=[U.sources.length-1])}return this.value}function Vr(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&We(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],a=$e&&$e.running;a&&$e.disposed.has(o),(a&&!o.tState||!a&&!o.state)&&(o.pure?Q.push(o):Be.push(o),o.observers&&Yr(o)),a||(o.state=je)}if(Q.length>1e6)throw Q=[],new Error},!1)),t}function rn(e){if(!e.fn)return;Zn(e);const t=N,n=U,r=Gn;U=N=e,Xi(e,e.value,r),U=n,N=t}function Xi(e,t,n){let r;try{r=e.fn(t)}catch(i){e.pure&&(e.state=je),Xr(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Vr(e,r):e.value=r,e.updatedAt=n)}function Hr(e,t,n,r=je,i){const o={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:N,context:null,pure:n};return N===null||N!==Fr&&(N.owned?N.owned.push(o):N.owned=[o]),o}function qr(e){const t=$e;if(e.state===0||t)return;if(e.state===Ht||t)return qt(e);if(e.suspense&&ce(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Gn);)(e.state||t)&&n.push(e);for(let r=n.length-1;r>=0;r--)if(e=n[r],e.state===je||t)rn(e);else if(e.state===Ht||t){const i=Q;Q=null,We(()=>qt(e,n[0]),!1),Q=i}}function We(e,t){if(Q)return e();let n=!1;t||(Q=[]),Be?n=!0:Be=[],Gn++;try{const r=e();return Gi(n),r}catch(r){Q||(Be=null),Xr(r)}}function Gi(e){if(Q&&(zr(Q),Q=null),e)return;const t=Be;Be=null,t.length&&We(()=>Hi(t),!1)}function zr(e){for(let t=0;t<e.length;t++)qr(e[t])}function qt(e,t){const n=$e;e.state=0;for(let r=0;r<e.sources.length;r+=1){const i=e.sources[r];i.sources&&(i.state===je||n?i!==t&&qr(i):(i.state===Ht||n)&&qt(i,t))}}function Yr(e){const t=$e;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(!r.state||t)&&(r.state=Ht,r.pure?Q.push(r):Be.push(r),r.observers&&Yr(r))}}function Zn(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const o=i.pop(),a=n.observerSlots.pop();r<i.length&&(o.sourceSlots[a]=r,i[r]=o,n.observerSlots[r]=a)}}if(e.owned){for(t=0;t<e.owned.length;t++)Zn(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Qi(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function Xr(e){throw e=Qi(e),e}function Gr(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:Gr(e.owner,t):void 0}function _n(e){if(typeof e=="function"&&!e.length)return _n(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=_n(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Ji(e,t){return function(r){let i;return ue(()=>i=ce(()=>(N.context={[e]:r.value},Jn(()=>r.children))),void 0),i}}const Zi=Symbol("fallback");function mr(e){for(let t=0;t<e.length;t++)e[t]()}function eo(e,t,n={}){let r=[],i=[],o=[],a=0,s=t.length>1?[]:null;return nn(()=>mr(o)),()=>{let u=e()||[],l,c;return u[Vi],ce(()=>{let d=u.length,g,p,v,b,x,_,y,m,h;if(d===0)a!==0&&(mr(o),o=[],r=[],i=[],a=0,s&&(s=[])),n.fallback&&(r=[Zi],i[0]=at(w=>(o[0]=w,n.fallback())),a=1);else if(a===0){for(i=new Array(d),c=0;c<d;c++)r[c]=u[c],i[c]=at(f);a=d}else{for(v=new Array(d),b=new Array(d),s&&(x=new Array(d)),_=0,y=Math.min(a,d);_<y&&r[_]===u[_];_++);for(y=a-1,m=d-1;y>=_&&m>=_&&r[y]===u[m];y--,m--)v[m]=i[y],b[m]=o[y],s&&(x[m]=s[y]);for(g=new Map,p=new Array(m+1),c=m;c>=_;c--)h=u[c],l=g.get(h),p[c]=l===void 0?-1:l,g.set(h,c);for(l=_;l<=y;l++)h=r[l],c=g.get(h),c!==void 0&&c!==-1?(v[c]=i[l],b[c]=o[l],s&&(x[c]=s[l]),c=p[c],g.set(h,c)):o[l]();for(c=_;c<d;c++)c in v?(i[c]=v[c],o[c]=b[c],s&&(s[c]=x[c],s[c](c))):i[c]=at(f);i=i.slice(0,a=d),r=u.slice(0)}return i});function f(d){if(o[c]=d,s){const[g,p]=ee(c);return s[c]=p,t(u[c],g)}return t(u[c])}}}function I(e,t){return ce(()=>e(t||{}))}function Pt(){return!0}const Qr={get(e,t,n){return t===Xn?n:e.get(t)},has(e,t){return e.has(t)},set:Pt,deleteProperty:Pt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Pt,deleteProperty:Pt}},ownKeys(e){return e.keys()}};function hn(e){return(e=typeof e=="function"?e():e)?e:{}}function xn(...e){if(e.some(n=>n&&(Xn in n||typeof n=="function")))return new Proxy({get(n){for(let r=e.length-1;r>=0;r--){const i=hn(e[r])[n];if(i!==void 0)return i}},has(n){for(let r=e.length-1;r>=0;r--)if(n in hn(e[r]))return!0;return!1},keys(){const n=[];for(let r=0;r<e.length;r++)n.push(...Object.keys(hn(e[r])));return[...new Set(n)]}},Qr);const t={};for(let n=e.length-1;n>=0;n--)if(e[n]){const r=Object.getOwnPropertyDescriptors(e[n]);for(const i in r)i in t||Object.defineProperty(t,i,{enumerable:!0,get(){for(let o=e.length-1;o>=0;o--){const a=(e[o]||{})[i];if(a!==void 0)return a}}})}return t}function to(e,...t){const n=new Set(t.flat()),r=Object.getOwnPropertyDescriptors(e),i=Xn in e;i||t.push(Object.keys(r).filter(a=>!n.has(a)));const o=t.map(a=>{const s={};for(let u=0;u<a.length;u++){const l=a[u];!i&&!(l in e)||Object.defineProperty(s,l,r[l]?r[l]:{get(){return e[l]},set(){return!0},enumerable:!0})}return s});return i&&o.push(new Proxy({get(a){return n.has(a)?void 0:e[a]},has(a){return n.has(a)?!1:a in e},keys(){return Object.keys(e).filter(a=>!n.has(a))}},Qr)),o}function no(e){const t="fallback"in e&&{fallback:()=>e.fallback};return L(eo(()=>e.each,e.children,t||void 0))}function se(e){let t=!1;const n=e.keyed,r=L(()=>e.when,void 0,{equals:(i,o)=>t?i===o:!i==!o});return L(()=>{const i=r();if(i){const o=e.children,a=typeof o=="function"&&o.length>0;return t=n||a,a?ce(()=>o(i)):o}return e.fallback})}const ro=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],io=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...ro]),oo=new Set(["innerHTML","textContent","innerText","children"]),ao=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),gr=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),so=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),uo={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function lo(e,t,n){let r=n.length,i=t.length,o=r,a=0,s=0,u=t[i-1].nextSibling,l=null;for(;a<i||s<o;){if(t[a]===n[s]){a++,s++;continue}for(;t[i-1]===n[o-1];)i--,o--;if(i===a){const c=o<r?s?n[s-1].nextSibling:n[o-s]:u;for(;s<o;)e.insertBefore(n[s++],c)}else if(o===s)for(;a<i;)(!l||!l.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[o-1]&&n[s]===t[i-1]){const c=t[--i].nextSibling;e.insertBefore(n[s++],t[a++].nextSibling),e.insertBefore(n[--o],c),t[i]=n[o]}else{if(!l){l=new Map;let f=s;for(;f<o;)l.set(n[f],f++)}const c=l.get(t[a]);if(c!=null)if(s<c&&c<o){let f=a,d=1,g;for(;++f<i&&f<o&&!((g=l.get(t[f]))==null||g!==c+d);)d++;if(d>c-s){const p=t[a];for(;s<c;)e.insertBefore(n[s++],p)}else e.replaceChild(n[s++],t[a++])}else a++;else t[a++].remove()}}}const br="_$DX_DELEGATE";function co(e,t,n,r={}){let i;return at(o=>{i=o,t===document?e():B(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function H(e,t,n){const r=document.createElement("template");r.innerHTML=e;let i=r.content.firstChild;return n&&(i=i.firstChild),i}function wt(e,t=window.document){const n=t[br]||(t[br]=new Set);for(let r=0,i=e.length;r<i;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,wo))}}function Jr(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function fo(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function ho(e,t){t==null?e.removeAttribute("class"):e.className=t}function po(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=o=>i.call(e,n[1],o))}else e.addEventListener(t,n)}function vo(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let o,a;for(o=0,a=i.length;o<a;o++){const s=i[o];!s||s==="undefined"||t[s]||(wr(e,s,!1),delete n[s])}for(o=0,a=r.length;o<a;o++){const s=r[o],u=!!t[s];!s||s==="undefined"||n[s]===u||!u||(wr(e,s,!0),n[s]=u)}return n}function yo(e,t,n){if(!t)return n?Jr(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,o;for(o in n)t[o]==null&&r.removeProperty(o),delete n[o];for(o in t)i=t[o],i!==n[o]&&(r.setProperty(o,i),n[o]=i);return n}function mo(e,t={},n,r){const i={};return r||ue(()=>i.children=Qe(e,t.children,i.children)),ue(()=>t.ref&&t.ref(e)),ue(()=>go(e,t,n,!0,i,!0)),i}function $t(e,t,n){return ce(()=>e(t,n))}function B(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return Qe(e,t,r,n);ue(i=>Qe(e,t(),i,n),r)}function go(e,t,n,r,i={},o=!1){t||(t={});for(const a in i)if(!(a in t)){if(a==="children")continue;i[a]=_r(e,a,null,i[a],n,o)}for(const a in t){if(a==="children"){r||Qe(e,t.children);continue}const s=t[a];i[a]=_r(e,a,s,i[a],n,o)}}function bo(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function wr(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,o=r.length;i<o;i++)e.classList.toggle(r[i],n)}function _r(e,t,n,r,i,o){let a,s,u;if(t==="style")return yo(e,n,r);if(t==="classList")return vo(e,n,r);if(n===r)return r;if(t==="ref")o||n(e);else if(t.slice(0,3)==="on:"){const l=t.slice(3);r&&e.removeEventListener(l,r),n&&e.addEventListener(l,n)}else if(t.slice(0,10)==="oncapture:"){const l=t.slice(10);r&&e.removeEventListener(l,r,!0),n&&e.addEventListener(l,n,!0)}else if(t.slice(0,2)==="on"){const l=t.slice(2).toLowerCase(),c=so.has(l);if(!c&&r){const f=Array.isArray(r)?r[0]:r;e.removeEventListener(l,f)}(c||n)&&(po(e,l,n,c),c&&wt([l]))}else if((u=oo.has(t))||!i&&(gr[t]||(s=io.has(t)))||(a=e.nodeName.includes("-")))t==="class"||t==="className"?ho(e,n):a&&!s&&!u?e[bo(t)]=n:e[gr[t]||t]=n;else{const l=i&&t.indexOf(":")>-1&&uo[t.split(":")[0]];l?fo(e,l,t,n):Jr(e,ao[t]||t,n)}return n}function wo(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),ke.registry&&!ke.done&&(ke.done=!0,document.querySelectorAll("[id^=pl-]").forEach(r=>r.remove()));n!==null;){const r=n[t];if(r&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?r.call(n,i,e):r.call(n,e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function Qe(e,t,n,r,i){for(ke.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(ke.context)return n;if(o==="number"&&(t=t.toString()),a){let s=n[0];s&&s.nodeType===3?s.data=t:s=document.createTextNode(t),n=Ve(e,n,r,s)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean"){if(ke.context)return n;n=Ve(e,n,r)}else{if(o==="function")return ue(()=>{let s=t();for(;typeof s=="function";)s=s();n=Qe(e,s,n,r)}),()=>n;if(Array.isArray(t)){const s=[],u=n&&Array.isArray(n);if(Sn(s,t,n,i))return ue(()=>n=Qe(e,s,n,r,!0)),()=>n;if(ke.context){if(!s.length)return n;for(let l=0;l<s.length;l++)if(s[l].parentNode)return n=s}if(s.length===0){if(n=Ve(e,n,r),a)return n}else u?n.length===0?xr(e,s,r):lo(e,n,s):(n&&Ve(e),xr(e,s));n=s}else if(t instanceof Node){if(ke.context&&t.parentNode)return n=a?[t]:t;if(Array.isArray(n)){if(a)return n=Ve(e,n,r,t);Ve(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Sn(e,t,n,r){let i=!1;for(let o=0,a=t.length;o<a;o++){let s=t[o],u=n&&n[o];if(s instanceof Node)e.push(s);else if(!(s==null||s===!0||s===!1))if(Array.isArray(s))i=Sn(e,s,u)||i;else if(typeof s=="function")if(r){for(;typeof s=="function";)s=s();i=Sn(e,Array.isArray(s)?s:[s],Array.isArray(u)?u:[u])||i}else e.push(s),i=!0;else{const l=String(s);u&&u.nodeType===3&&u.data===l?e.push(u):e.push(document.createTextNode(l))}}return i}function xr(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function Ve(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let o=!1;for(let a=t.length-1;a>=0;a--){const s=t[a];if(i!==s){const u=s.parentNode===e;!o&&!a?u?e.replaceChild(i,s):e.insertBefore(i,n):u&&s.remove()}else o=!0}}else e.insertBefore(i,n);return[i]}const _o=!1;function xo(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function So([e,t],n,r){return[n?()=>n(e()):e,r?i=>t(r(i)):t]}function Eo(e){try{return document.querySelector(e)}catch{return null}}function Ao(e,t){const n=Eo(`#${e}`);n?n.scrollIntoView():t&&window.scrollTo(0,0)}function Co(e,t,n,r){let i=!1;const o=s=>typeof s=="string"?{value:s}:s,a=So(ee(o(e()),{equals:(s,u)=>s.value===u.value}),void 0,s=>(!i&&t(s),s));return n&&nn(n((s=e())=>{i=!0,a[1](o(s)),i=!1})),{signal:a,utils:r}}function ko(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:ee({value:""})};return e}function Do(){return Co(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:e,replace:t,scroll:n,state:r})=>{t?window.history.replaceState(r,"",e):window.history.pushState(r,"",e),Ao(window.location.hash.slice(1),n)},e=>xo(window,"popstate",()=>e()),{go:e=>window.history.go(e)})}const Po=/^(?:[a-z0-9]+:)?\/\//i,Ro=/^\/+|\/+$/g;function st(e,t=!1){const n=e.replace(Ro,"");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function Bt(e,t,n){if(Po.test(t))return;const r=st(e),i=n&&st(n);let o="";return!i||t.startsWith("/")?o=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?o=r+i:o=i,(o||"/")+st(t,!o)}function To(e,t){if(e==null)throw new Error(t);return e}function Zr(e,t){return st(e).replace(/\/*(\*.*)?$/g,"")+st(t)}function Io(e){const t={};return e.searchParams.forEach((n,r)=>{t[r]=n}),t}function Ye(e,t){return decodeURIComponent(t?e.replace(/\+/g," "):e)}function Ko(e,t){const[n,r]=e.split("/*",2),i=n.split("/").filter(Boolean),o=i.length;return a=>{const s=a.split("/").filter(Boolean),u=s.length-o;if(u<0||u>0&&r===void 0&&!t)return null;const l={path:o?"":"/",params:{}};for(let c=0;c<o;c++){const f=i[c],d=s[c];if(f[0]===":")l.params[f.slice(1)]=d;else if(f.localeCompare(d,void 0,{sensitivity:"base"})!==0)return null;l.path+=`/${d}`}return r&&(l.params[r]=u?s.slice(-u).join("/"):""),l}}function Oo(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,o)=>i+(o.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function ei(e){const t=new Map,n=qi();return new Proxy({},{get(r,i){return t.has(i)||zi(n,()=>t.set(i,L(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function $o(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([i,o])=>{o==null||o===""?n.delete(i):n.set(i,String(o))});const r=n.toString();return r?`?${r}`:""}function ti(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return ti(r).reduce((o,a)=>[...o,...i.map(s=>s+a)],[])}const Bo=100,ni=Wr(),on=Wr(),_t=()=>To(Qn(ni),"Make sure your app is wrapped in a <Router />");let ft;const an=()=>ft||Qn(on)||_t().base,Mo=e=>{const t=an();return L(()=>t.resolvePath(e()))},No=e=>{const t=_t();return L(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},ri=()=>_t().navigatorFactory(),ii=()=>_t().location,sn=()=>an().params,Lo=()=>{const e=ii(),t=ri(),n=(r,i)=>{const o=ce(()=>$o(e.search,r));t(e.pathname+o,{scroll:!1,...i})};return[e.query,n]};function Fo(e,t="",n){const{component:r,data:i,children:o}=e,a=!o||Array.isArray(o)&&!o.length,s={key:e,element:r?()=>I(r,{}):()=>{const{element:u}=e;return u===void 0&&n?I(n,{}):u},preload:e.component?r.preload:e.preload,data:i};return oi(e.path).reduce((u,l)=>{for(const c of ti(l)){const f=Zr(t,c),d=a?f:f.split("/*",1)[0];u.push({...s,originalPath:c,pattern:d,matcher:Ko(d,!a)})}return u},[])}function jo(e,t=0){return{routes:e,score:Oo(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const o=e[i],a=o.matcher(n);if(!a)return null;r.unshift({...a,route:o})}return r}}}function oi(e){return Array.isArray(e)?e:[e]}function ai(e,t="",n,r=[],i=[]){const o=oi(e);for(let a=0,s=o.length;a<s;a++){const u=o[a];if(u&&typeof u=="object"&&u.hasOwnProperty("path")){const l=Fo(u,t,n);for(const c of l){if(r.push(c),u.children)ai(u.children,c.pattern,n,r,i);else{const f=jo([...r],i.length);i.push(f)}r.pop()}}}return r.length?i:i.sort((a,s)=>s.score-a.score)}function Wo(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}function Uo(e,t){const n=new URL("http://sar"),r=L(u=>{const l=e();try{return new URL(l,n)}catch{return console.error(`Invalid path ${l}`),u}},n,{equals:(u,l)=>u.href===l.href}),i=L(()=>Ye(r().pathname)),o=L(()=>Ye(r().search,!0)),a=L(()=>Ye(r().hash)),s=L(()=>"");return{get pathname(){return i()},get search(){return o()},get hash(){return a()},get state(){return t()},get key(){return s()},query:ei(jr(o,()=>Io(r())))}}function Vo(e,t="",n,r){const{signal:[i,o],utils:a={}}=ko(e),s=a.parsePath||(S=>S),u=a.renderPath||(S=>S),l=Bt("",t),c=void 0;if(l===void 0)throw new Error(`${l} is not a valid base path`);l&&!i().value&&o({value:l,replace:!0,scroll:!1});const[f,d]=ee(!1),g=async S=>{d(!0);try{await Yi(S)}finally{d(!1)}},[p,v]=ee(i().value),[b,x]=ee(i().state),_=Uo(p,b),y=[],m={pattern:l,params:{},path:()=>l,outlet:()=>null,resolvePath(S){return Bt(l,S)}};if(n)try{ft=m,m.data=n({data:void 0,params:{},location:_,navigate:w(m)})}finally{ft=void 0}function h(S,A,T){ce(()=>{if(typeof A=="number"){A&&(a.go?a.go(A):console.warn("Router integration does not support relative routing"));return}const{replace:$,resolve:K,scroll:W,state:P}={replace:!1,resolve:!0,scroll:!0,...T},q=K?S.resolvePath(A):Bt("",A);if(q===void 0)throw new Error(`Path '${A}' is not a routable path`);if(y.length>=Bo)throw new Error("Too many redirects");const Y=p();if((q!==Y||P!==b())&&!_o){const te=y.push({value:Y,replace:$,scroll:W,state:b()});g(()=>{v(q),x(P)}).then(()=>{y.length===te&&C({value:q,state:P})})}})}function w(S){return S=S||Qn(on)||m,(A,T)=>h(S,A,T)}function C(S){const A=y[0];A&&((S.value!==A.value||S.state!==A.state)&&o({...S,replace:A.replace,scroll:A.scroll}),y.length=0)}ue(()=>{const{value:S,state:A}=i();ce(()=>{S!==p()&&g(()=>{v(S),x(A)})})});{let S=function(A){if(A.defaultPrevented||A.button!==0||A.metaKey||A.altKey||A.ctrlKey||A.shiftKey)return;const T=A.composedPath().find(te=>te instanceof Node&&te.nodeName.toUpperCase()==="A");if(!T||!T.hasAttribute("link"))return;const $=T.href;if(T.target||!$&&!T.hasAttribute("state"))return;const K=(T.getAttribute("rel")||"").split(/\s+/);if(T.hasAttribute("download")||K&&K.includes("external"))return;const W=new URL($),P=Ye(W.pathname);if(W.origin!==window.location.origin||l&&P&&!P.toLowerCase().startsWith(l.toLowerCase()))return;const q=s(P+Ye(W.search,!0)+Ye(W.hash)),Y=T.getAttribute("state");A.preventDefault(),h(m,q,{resolve:!1,replace:T.hasAttribute("replace"),scroll:!T.hasAttribute("noscroll"),state:Y&&JSON.parse(Y)})};var E=S;wt(["click"]),document.addEventListener("click",S),nn(()=>document.removeEventListener("click",S))}return{base:m,out:c,location:_,isRouting:f,renderPath:u,parsePath:s,navigatorFactory:w}}function Ho(e,t,n,r){const{base:i,location:o,navigatorFactory:a}=e,{pattern:s,element:u,preload:l,data:c}=r().route,f=L(()=>r().path),d=ei(()=>r().params);l&&l();const g={parent:t,pattern:s,get child(){return n()},path:f,params:d,data:t.data,outlet:u,resolvePath(p){return Bt(i.path(),p,f())}};if(c)try{ft=g,g.data=c({data:t.data,params:d,location:o,navigate:a(g)})}finally{ft=void 0}return g}const qo=H("<a link></a>"),zo=e=>{const{source:t,url:n,base:r,data:i,out:o}=e,a=t||Do(),s=Vo(a,r,i);return I(ni.Provider,{value:s,get children(){return e.children}})},Yo=e=>{const t=_t(),n=an(),r=Jn(()=>e.children),i=L(()=>ai(r(),Zr(n.pattern,e.base||""),Xo)),o=L(()=>Wo(i(),t.location.pathname));t.out&&t.out.matches.push(o().map(({route:l,path:c,params:f})=>({originalPath:l.originalPath,pattern:l.pattern,path:c,params:f})));const a=[];let s;const u=L(jr(o,(l,c,f)=>{let d=c&&l.length===c.length;const g=[];for(let p=0,v=l.length;p<v;p++){const b=c&&c[p],x=l[p];f&&b&&x.route.key===b.route.key?g[p]=f[p]:(d=!1,a[p]&&a[p](),at(_=>{a[p]=_,g[p]=Ho(t,g[p-1]||n,()=>u()[p+1],()=>o()[p])}))}return a.splice(l.length).forEach(p=>p()),f&&d?f:(s=g[0],g)}));return I(se,{get when(){return u()&&s},children:l=>I(on.Provider,{value:l,get children(){return l.outlet()}})})},Ie=e=>{const t=Jn(()=>e.children);return xn(e,{get children(){return t()}})},Xo=()=>{const e=an();return I(se,{get when(){return e.child},children:t=>I(on.Provider,{value:t,get children(){return t.outlet()}})})};function we(e){e=xn({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=to(e,["href","state","activeClass","inactiveClass","end"]),n=Mo(()=>e.href),r=No(n),i=ii(),o=L(()=>{const a=n();if(a===void 0)return!1;const s=a.split(/[?#]/,1)[0].toLowerCase(),u=i.pathname.toLowerCase();return e.end?s===u:u.startsWith(s)});return(()=>{const a=qo.cloneNode(!0);return mo(a,xn(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{[e.inactiveClass]:!o(),[e.activeClass]:o(),...t.classList}},get["aria-current"](){return o()?"page":void 0}}),!1,!1),a})()}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var O=function(){return O=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},O.apply(this,arguments)};function En(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var F=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,V=Object.keys,G=Array.isArray;typeof Promise<"u"&&!F.Promise&&(F.Promise=Promise);function Z(e,t){return typeof t!="object"||V(t).forEach(function(n){e[n]=t[n]}),e}var dt=Object.getPrototypeOf,Go={}.hasOwnProperty;function ie(e,t){return Go.call(e,t)}function Je(e,t){typeof t=="function"&&(t=t(dt(e))),(typeof Reflect>"u"?V:Reflect.ownKeys)(t).forEach(function(n){_e(e,n,t[n])})}var si=Object.defineProperty;function _e(e,t,n,r){si(e,t,Z(n&&ie(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Ze(e){return{from:function(t){return e.prototype=Object.create(t.prototype),_e(e.prototype,"constructor",e),{extend:Je.bind(null,e.prototype)}}}}var Qo=Object.getOwnPropertyDescriptor;function er(e,t){var n=Qo(e,t),r;return n||(r=dt(e))&&er(r,t)}var Jo=[].slice;function un(e,t,n){return Jo.call(e,t,n)}function ui(e,t){return t(e)}function it(e){if(!e)throw new Error("Assertion Failed")}function li(e){F.setImmediate?setImmediate(e):setTimeout(e,0)}function ci(e,t){return e.reduce(function(n,r,i){var o=t(r,i);return o&&(n[o[0]]=o[1]),n},{})}function Zo(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function be(e,t){if(ie(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var o=be(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(a!==-1){var s=e[t.substr(0,a)];return s===void 0?void 0:be(s,t.substr(a+1))}}function le(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){it(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)le(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var a=t.substr(0,o),s=t.substr(o+1);if(s==="")n===void 0?G(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var u=e[a];(!u||!ie(e,a))&&(u=e[a]={}),le(u,s,n)}}else n===void 0?G(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ea(e,t){typeof t=="string"?le(e,t,void 0):"length"in t&&[].map.call(t,function(n){le(e,n,void 0)})}function fi(e){var t={};for(var n in e)ie(e,n)&&(t[n]=e[n]);return t}var ta=[].concat;function di(e){return ta.apply([],e)}var hi="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(di([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return F[e]}),na=hi.map(function(e){return F[e]});ci(hi,function(e){return[e,!0]});var Ce=null;function xt(e){Ce=typeof WeakMap<"u"&&new WeakMap;var t=An(e);return Ce=null,t}function An(e){if(!e||typeof e!="object")return e;var t=Ce&&Ce.get(e);if(t)return t;if(G(e)){t=[],Ce&&Ce.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(An(e[n]))}else if(na.indexOf(e.constructor)>=0)t=e;else{var i=dt(e);t=i===Object.prototype?{}:Object.create(i),Ce&&Ce.set(e,t);for(var o in e)ie(e,o)&&(t[o]=An(e[o]))}return t}var ra={}.toString;function Cn(e){return ra.call(e).slice(8,-1)}var kn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ia=typeof kn=="symbol"?function(e){var t;return e!=null&&(t=e[kn])&&t.apply(e)}:function(){return null},ze={};function me(e){var t,n,r,i;if(arguments.length===1){if(G(e))return e.slice();if(this===ze&&typeof e=="string")return[e];if(i=ia(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var tr=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},pe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function pi(e,t){pe=e,vi=t}var vi=function(){return!0},oa=!new Error("").stack;function Ue(){if(oa)try{throw Ue.arguments,new Error}catch(e){return e}return new Error}function Dn(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(vi).map(function(r){return`
`+r}).join("")):""}var aa=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],yi=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],nr=aa.concat(yi),sa={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function et(e,t){this._e=Ue(),this.name=e,this.message=t}Ze(et).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Dn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function mi(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function zt(e,t,n,r){this._e=Ue(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=mi(e,t)}Ze(zt).from(et);function ut(e,t){this._e=Ue(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=mi(e,t)}Ze(ut).from(et);var rr=nr.reduce(function(e,t){return e[t]=t+"Error",e},{}),ua=et,R=nr.reduce(function(e,t){var n=t+"Error";function r(i,o){this._e=Ue(),this.name=n,i?typeof i=="string"?(this.message=""+i+(o?`
 `+o:""),this.inner=o||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=sa[t]||n,this.inner=null)}return Ze(r).from(ua),e[t]=r,e},{});R.Syntax=SyntaxError;R.Type=TypeError;R.Range=RangeError;var Sr=yi.reduce(function(e,t){return e[t+"Error"]=R[t],e},{});function la(e,t){if(!e||e instanceof et||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Sr[e.name])return e;var n=new Sr[e.name](t||e.message,e);return"stack"in e&&_e(n,"stack",{get:function(){return this.inner.stack}}),n}var ln=nr.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=R[t]),e},{});ln.ModifyError=zt;ln.DexieError=et;ln.BulkError=ut;function M(){}function St(e){return e}function ca(e,t){return e==null||e===St?t:function(n){return t(e(n))}}function Le(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function fa(e,t){return e===M?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Le(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Le(i,this.onerror):i),o!==void 0?o:n}}function da(e,t){return e===M?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Le(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Le(r,this.onerror):r)}}function ha(e,t){return e===M?t:function(n){var r=e.apply(this,arguments);Z(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Le(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Le(o,this.onerror):o),r===void 0?a===void 0?void 0:a:Z(r,a)}}function pa(e,t){return e===M?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function ir(e,t){return e===M?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}var ht={},va=100,ya=20,gi=100,or=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,dt(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,dt(t),e]}(),Pn=or[0],Yt=or[1],Rn=or[2],bi=Yt&&Yt.then,Mt=Pn&&Pn.constructor,ar=!!Rn,Tn=!1,ma=Rn?function(){Rn.then(Rt)}:F.setImmediate?setImmediate.bind(null,Rt):F.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Rt(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Rt,0)},pt=function(e,t){ot.push([e,t]),Xt&&(ma(),Xt=!1)},In=!0,Xt=!0,Me=[],Nt=[],Kn=null,On=St,Xe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Cr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{Cr(e[0],e[1])}catch{}})}},D=Xe,ot=[],Ne=0,Lt=[];function k(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=M,this._lib=!1;var t=this._PSD=D;if(pe&&(this._stackHolder=Ue(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==ht)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Bn(this,this._value);return}this._state=null,this._value=null,++t.ref,_i(this,e)}var $n={get:function(){var e=D,t=Gt;function n(r,i){var o=this,a=!e.global&&(e!==D||t!==Gt),s=a&&!xe(),u=new k(function(l,c){sr(o,new wi(Jt(r,e,a,s),Jt(i,e,a,s),l,c,e))});return pe&&Ei(u,this),u}return n.prototype=ht,n},set:function(e){_e(this,"then",e&&e.prototype===ht?$n:{get:function(){return e},set:$n.set})}};Je(k.prototype,{then:$n,_then:function(e,t){sr(this,new wi(null,null,e,t,D))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Ft(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Ft(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Ft(t)})},stack:{get:function(){if(this._stack)return this._stack;try{Tn=!0;var e=Si(this,[],ya),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Tn=!1}}},timeout:function(e,t){var n=this;return e<1/0?new k(function(r,i){var o=setTimeout(function(){return i(new R.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&_e(k.prototype,Symbol.toStringTag,"Dexie.Promise");Xe.env=Ai();function wi(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}Je(k,{all:function(){var e=me.apply(null,arguments).map(Qt);return new k(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,o){return k.resolve(i).then(function(a){e[o]=a,--r||t(e)},n)})})},resolve:function(e){if(e instanceof k)return e;if(e&&typeof e.then=="function")return new k(function(n,r){e.then(n,r)});var t=new k(ht,!0,e);return Ei(t,Kn),t},reject:Ft,race:function(){var e=me.apply(null,arguments).map(Qt);return new k(function(t,n){e.map(function(r){return k.resolve(r).then(t,n)})})},PSD:{get:function(){return D},set:function(e){return D=e}},totalEchoes:{get:function(){return Gt}},newPSD:Pe,usePSD:nt,scheduler:{get:function(){return pt},set:function(e){pt=e}},rejectionMapper:{get:function(){return On},set:function(e){On=e}},follow:function(e,t){return new k(function(n,r){return Pe(function(i,o){var a=D;a.unhandleds=[],a.onunhandled=o,a.finalize=Le(function(){var s=this;ba(function(){s.unhandleds.length===0?i():o(s.unhandleds[0])})},a.finalize),e()},t,n,r)})}});Mt&&(Mt.allSettled&&_e(k,"allSettled",function(){var e=me.apply(null,arguments).map(Qt);return new k(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,o){return k.resolve(i).then(function(a){return r[o]={status:"fulfilled",value:a}},function(a){return r[o]={status:"rejected",reason:a}}).then(function(){return--n||t(r)})})})}),Mt.any&&typeof AggregateError<"u"&&_e(k,"any",function(){var e=me.apply(null,arguments).map(Qt);return new k(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(o,a){return k.resolve(o).then(function(s){return t(s)},function(s){i[a]=s,--r||n(new AggregateError(i))})})})}));function _i(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Et();n&&typeof n.then=="function"?_i(e,function(i,o){n instanceof k?n._then(i,o):n.then(i,o)}):(e._state=!0,e._value=n,xi(e)),r&&At()}},Bn.bind(null,e))}catch(n){Bn(e,n)}}function Bn(e,t){if(Nt.push(t),e._state===null){var n=e._lib&&Et();t=On(t),e._state=!1,e._value=t,pe&&t!==null&&typeof t=="object"&&!t._promise&&Zo(function(){var r=er(t,"stack");t._promise=e,_e(t,"stack",{get:function(){return Tn?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),wa(e),xi(e),n&&At()}}function xi(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)sr(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Ne===0&&(++Ne,pt(function(){--Ne===0&&ur()},[]))}function sr(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ne,pt(ga,[n,e,t])}function ga(e,t,n){try{Kn=t;var r,i=t._value;t._state?r=e(i):(Nt.length&&(Nt=[]),r=e(i),Nt.indexOf(i)===-1&&_a(t)),n.resolve(r)}catch(o){n.reject(o)}finally{Kn=null,--Ne===0&&ur(),--n.psd.ref||n.psd.finalize()}}function Si(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,o,a;i!=null?(o=i.name||"Error",a=i.message||i,r=Dn(i,0)):(o=i,a=""),t.push(o+(a?": "+a:"")+r)}return pe&&(r=Dn(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Si(e._prev,t,n)),t}function Ei(e,t){var n=t?t._numPrev+1:0;n<va&&(e._prev=t,e._numPrev=n)}function Rt(){Et()&&At()}function Et(){var e=In;return In=!1,Xt=!1,e}function At(){var e,t,n;do for(;ot.length>0;)for(e=ot,ot=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(ot.length>0);In=!0,Xt=!0}function ur(){var e=Me;Me=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Lt.slice(0),n=t.length;n;)t[--n]()}function ba(e){function t(){e(),Lt.splice(Lt.indexOf(t),1)}Lt.push(t),++Ne,pt(function(){--Ne===0&&ur()},[])}function wa(e){Me.some(function(t){return t._value===e._value})||Me.push(e)}function _a(e){for(var t=Me.length;t;)if(Me[--t]._value===e._value){Me.splice(t,1);return}}function Ft(e){return new k(ht,!1,e)}function j(e,t){var n=D;return function(){var r=Et(),i=D;try{return Re(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{Re(i,!1),r&&At()}}}var X={awaits:0,echoes:0,id:0},xa=0,jt=[],pn=0,Gt=0,Sa=0;function Pe(e,t,n,r){var i=D,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Sa;var a=Xe.env;o.env=ar?{Promise:k,PromiseProp:{value:k,configurable:!0,writable:!0},all:k.all,race:k.race,allSettled:k.allSettled,any:k.any,resolve:k.resolve,reject:k.reject,nthen:Er(a.nthen,o),gthen:Er(a.gthen,o)}:{},t&&Z(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=nt(o,e,n,r);return o.ref===0&&o.finalize(),s}function tt(){return X.id||(X.id=++xa),++X.awaits,X.echoes+=gi,X.id}function xe(){return X.awaits?(--X.awaits===0&&(X.id=0),X.echoes=X.awaits*gi,!0):!1}(""+bi).indexOf("[native code]")===-1&&(tt=xe=M);function Qt(e){return X.echoes&&e&&e.constructor===Mt?(tt(),e.then(function(t){return xe(),t},function(t){return xe(),z(t)})):e}function Ea(e){++Gt,(!X.echoes||--X.echoes===0)&&(X.echoes=X.id=0),jt.push(D),Re(e,!0)}function Aa(){var e=jt[jt.length-1];jt.pop(),Re(e,!1)}function Re(e,t){var n=D;if((t?X.echoes&&(!pn++||e!==D):pn&&(!--pn||e!==D))&&Ci(t?Ea.bind(null,e):Aa),e!==D&&(D=e,n===Xe&&(Xe.env=Ai()),ar)){var r=Xe.env.Promise,i=e.env;Yt.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(F,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Ai(){var e=F.Promise;return ar?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(F,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Yt.then,gthen:e.prototype.then}:{}}function nt(e,t,n,r,i){var o=D;try{return Re(e,!0),t(n,r,i)}finally{Re(o,!1)}}function Ci(e){bi.call(Pn,e)}function Jt(e,t,n,r){return typeof e!="function"?e:function(){var i=D;n&&tt(),Re(t,!0);try{return e.apply(this,arguments)}finally{Re(i,!1),r&&Ci(xe)}}}function Er(e,t){return function(n,r){return e.call(this,Jt(n,t),Jt(r,t))}}var Ar="unhandledrejection";function Cr(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(F.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Ar,!0,!0),Z(r,i)):F.CustomEvent&&(r=new CustomEvent(Ar,{detail:i}),Z(r,i)),r&&F.dispatchEvent&&(dispatchEvent(r),!F.PromiseRejectionEvent&&F.onunhandledrejection))try{F.onunhandledrejection(r)}catch{}pe&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var z=k.reject;function Mn(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!D.letThrough&&!e._vip){if(e._state.openComplete)return z(new R.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return z(new R.DatabaseClosed);e.open().catch(M)}return e._state.dbReadyPromise.then(function(){return Mn(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===rr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Mn(e,t,n,r)})):z(o)}return i._promise(t,function(o,a){return Pe(function(){return D.trans=i,r(o,a,i)})}).then(function(o){return i._completion.then(function(){return o})})}}var kr="3.2.2",Oe=String.fromCharCode(65535),Nn=-1/0,ve="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ki="String expected.",lt=[],cn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ca=cn,ka=cn,Di=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},fn="__dbnames",vn="readonly",yn="readwrite";function Fe(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Pi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Tt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=xt(t),delete t[e]),t}:function(t){return t}}var Da=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||D.trans,o=this.name;function a(u,l,c){if(!c.schema[o])throw new R.NotFound("Table "+o+" not part of transaction");return n(c.idbtrans,c)}var s=Et();try{return i&&i.db===this.db?i===D.trans?i._promise(t,a,r):Pe(function(){return i._promise(t,a,r)},{trans:i,transless:D.transless||D}):Mn(this.db,t,[this.name],a)}finally{s&&At()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(o){return r.hook.reading.fire(o)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(G(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=V(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(c){return c.compound&&n.every(function(f){return c.keyPath.indexOf(f)>=0})&&c.keyPath.every(function(f){return n.indexOf(f)>=0})})[0];if(r&&this.db._maxKey!==Oe)return this.where(r.name).equals(r.keyPath.map(function(c){return t[c]}));!r&&pe&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,o=this.db._deps.indexedDB;function a(c,f){try{return o.cmp(c,f)===0}catch{return!1}}var s=n.reduce(function(c,f){var d=c[0],g=c[1],p=i[f],v=t[f];return[d||p,d||!p?Fe(g,p&&p.multi?function(b){var x=be(b,f);return G(x)&&x.some(function(_){return a(v,_)})}:function(b){return a(v,be(b,f))}):g]},[null,null]),u=s[0],l=s[1];return u?this.where(u.name).equals(t[u.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,G(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var o in r)if(ie(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){Z(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,s=t;return a&&o&&(s=Tt(a)(t)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"add",keys:n!=null?[n]:null,values:[s]})}).then(function(u){return u.numFailures?k.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{le(t,a,u)}catch{}return u})},e.prototype.update=function(t,n){if(typeof t=="object"&&!G(t)){var r=be(t,this.schema.primKey.keyPath);if(r===void 0)return z(new R.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?V(n).forEach(function(i){le(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,s=t;return a&&o&&(s=Tt(a)(t)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"put",values:[s],keys:n!=null?[n]:null})}).then(function(u){return u.numFailures?k.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{le(t,a,u)}catch{}return u})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?k.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Pi})}).then(function(n){return n.numFailures?k.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(o){return n.hook.reading.fire(o)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,l=u.auto,c=u.keyPath;if(c&&o)throw new R.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new R.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,d=c&&l?t.map(Tt(c)):t;return i.core.mutate({trans:s,type:"add",keys:o,values:d,wantResults:a}).then(function(g){var p=g.numFailures,v=g.results,b=g.lastResult,x=g.failures,_=a?v:b;if(p===0)return _;throw new ut(i.name+".bulkAdd(): "+p+" of "+f+" operations failed",x)})})},e.prototype.bulkPut=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,l=u.auto,c=u.keyPath;if(c&&o)throw new R.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new R.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,d=c&&l?t.map(Tt(c)):t;return i.core.mutate({trans:s,type:"put",keys:o,values:d,wantResults:a}).then(function(g){var p=g.numFailures,v=g.results,b=g.lastResult,x=g.failures,_=a?v:b;if(p===0)return _;throw new ut(i.name+".bulkPut(): "+p+" of "+f+" operations failed",x)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var o=i.numFailures,a=i.lastResult,s=i.failures;if(o===0)return a;throw new ut(n.name+".bulkDelete(): "+o+" of "+r+" operations failed",s)})},e}();function Ct(e){var t={},n=function(s,u){if(u){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return t[s].subscribe.apply(null,c),e}else if(typeof s=="string")return t[s]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(s,u,l){if(typeof s=="object")return a(s);u||(u=pa),l||(l=M);var c={subscribers:[],fire:l,subscribe:function(f){c.subscribers.indexOf(f)===-1&&(c.subscribers.push(f),c.fire=u(c.fire,f))},unsubscribe:function(f){c.subscribers=c.subscribers.filter(function(d){return d!==f}),c.fire=c.subscribers.reduce(u,l)}};return t[s]=n[s]=c,c}function a(s){V(s).forEach(function(u){var l=s[u];if(G(l))o(u,s[u][0],s[u][1]);else if(l==="asap")var c=o(u,St,function(){for(var d=arguments.length,g=new Array(d);d--;)g[d]=arguments[d];c.subscribers.forEach(function(p){li(function(){p.apply(null,g)})})});else throw new R.InvalidArgument("Invalid event config")})}}function kt(e,t){return Ze(t).from({prototype:e}),t}function Pa(e){return kt(Da.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Ct(null,{creating:[fa,M],reading:[ca,St],updating:[ha,M],deleting:[da,M]})})}function He(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function mn(e,t){e.filter=Fe(e.filter,t)}function gn(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Fe(r(),t())}:t,e.justLimit=n&&!r}function Ra(e,t){e.isMatch=Fe(e.isMatch,t)}function Wt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new R.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Dr(e,t,n){var r=Wt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function It(e,t,n,r){var i=e.replayFilter?Fe(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(s,u,l){if(!i||i(u,l,function(d){return u.stop(d)},function(d){return u.fail(d)})){var c=u.primaryKey,f=""+c;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(c)),ie(o,f)||(o[f]=!0,t(s,u,l))}};return Promise.all([e.or._iterate(a,n),Pr(Dr(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}else return Pr(Dr(e,r,n),Fe(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Pr(e,t,n,r){var i=r?function(a,s,u){return n(r(a),s,u)}:n,o=j(i);return e.then(function(a){if(a)return a.start(function(){var s=function(){return a.continue()};(!t||t(a,function(u){return s=u},function(u){a.stop(u),s=M},function(u){a.fail(u),s=M}))&&o(a.value,a,function(u){return s=u}),s()})})}function J(e,t){try{var n=Rr(e),r=Rr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Ia(Tr(e),Tr(t));case"Array":return Ta(e,t)}}catch{}return NaN}function Ta(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var a=J(e[o],t[o]);if(a!==0)return a}return n===r?0:n<r?-1:1}function Ia(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}function Rr(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=Cn(e);return n==="ArrayBuffer"?"binary":n}function Tr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Ka=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,z.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,z.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Fe(n.algorithm,t)},e.prototype._iterate=function(t,n){return It(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&Z(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return It(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,o=i.table.core;if(He(i,!0))return o.count({trans:r,query:{index:Wt(i,o.schema),range:i.range}}).then(function(s){return Math.min(s,i.limit)});var a=0;return It(i,function(){return++a,!1},r,o).then(function(){return a})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],o=r.length-1;function a(l,c){return c?a(l[r[c]],c-1):l[i]}var s=this._ctx.dir==="next"?1:-1;function u(l,c){var f=a(l,o),d=a(c,o);return f<d?-s:f>d?s:0}return this.toArray(function(l){return l.sort(u)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&He(i,!0)&&i.limit>0){var o=i.valueMapper,a=Wt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:a,range:i.range}}).then(function(u){var l=u.result;return o?l.map(o):l})}else{var s=[];return It(i,function(u){return s.push(u)},r,i.table.core).then(function(){return s})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,He(n)?gn(n,function(){var r=t;return function(i,o){return r===0?!0:r===1?(--r,!1):(o(function(){i.advance(r),r=0}),!1)}}):gn(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),gn(this._ctx,function(){var n=t;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this},e.prototype.until=function(t,n){return mn(this._ctx,function(r,i,o){return t(r.value)?(i(o),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return mn(this._ctx,function(n){return t(n.value)}),Ra(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&He(n,!0)&&n.limit>0)return this._read(function(i){var o=Wt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(i){var o=i.result;return o}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return mn(this._ctx,function(i){var o=i.primaryKey.toString(),a=ie(r,o);return r[o]=!0,!a}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var o;if(typeof t=="function")o=t;else{var a=V(t),s=a.length;o=function(x){for(var _=!1,y=0;y<s;++y){var m=a[y],h=t[m];be(x,m)!==h&&(le(x,m,h),_=!0)}return _}}var u=r.table.core,l=u.schema.primaryKey,c=l.outbound,f=l.extractKey,d=n.db._options.modifyChunkSize||200,g=[],p=0,v=[],b=function(x,_){var y=_.failures,m=_.numFailures;p+=x-m;for(var h=0,w=V(y);h<w.length;h++){var C=w[h];g.push(y[C])}};return n.clone().primaryKeys().then(function(x){var _=function(y){var m=Math.min(d,x.length-y);return u.getMany({trans:i,keys:x.slice(y,y+m),cache:"immutable"}).then(function(h){for(var w=[],C=[],E=c?[]:null,S=[],A=0;A<m;++A){var T=h[A],$={value:xt(T),primKey:x[y+A]};o.call($,$.value,$)!==!1&&($.value==null?S.push(x[y+A]):!c&&J(f(T),f($.value))!==0?(S.push(x[y+A]),w.push($.value)):(C.push($.value),c&&E.push(x[y+A])))}var K=He(r)&&r.limit===1/0&&(typeof t!="function"||t===bn)&&{index:r.index,range:r.range};return Promise.resolve(w.length>0&&u.mutate({trans:i,type:"add",values:w}).then(function(W){for(var P in W.failures)S.splice(parseInt(P),1);b(w.length,W)})).then(function(){return(C.length>0||K&&typeof t=="object")&&u.mutate({trans:i,type:"put",keys:E,values:C,criteria:K,changeSpec:typeof t!="function"&&t}).then(function(W){return b(C.length,W)})}).then(function(){return(S.length>0||K&&t===bn)&&u.mutate({trans:i,type:"delete",keys:S,criteria:K}).then(function(W){return b(S.length,W)})}).then(function(){return x.length>y+m&&_(y+d)})})};return _(0).then(function(){if(g.length>0)throw new zt("Error modifying one or more objects",g,p,v);return x.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return He(t)&&(t.isPrimKey&&!ka||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,o=n;return t.table.core.count({trans:r,query:{index:i,range:o}}).then(function(a){return t.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(function(s){var u=s.failures;s.lastResult,s.results;var l=s.numFailures;if(l)throw new zt("Could not delete some values",Object.keys(u).map(function(c){return u[c]}),a-l);return a-l})})}):this.modify(bn)},e}(),bn=function(e,t){return t.value=null};function Oa(e){return kt(Ka.prototype,function(n,r){this.db=e;var i=Pi,o=null;if(r)try{i=r()}catch(l){o=l}var a=n._ctx,s=a.table,u=s.hook.reading.fire;this._ctx={table:s,index:a.index,isPrimKey:!a.index||s.schema.primKey.keyPath&&a.index===s.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:a.or,valueMapper:u!==St?u:null}})}function $a(e,t){return e<t?-1:e===t?0:1}function Ba(e,t){return e>t?-1:e===t?0:1}function ne(e,t,n){var r=e instanceof Ti?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function qe(e){return new e.Collection(e,function(){return Ri("")}).limit(0)}function Ma(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Na(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function La(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,u=0;u<a;++u){var l=t[u];if(l!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[u],l)<0&&(s=u)}return a<r.length&&o==="next"?e+n.substr(e.length):a<e.length&&o==="prev"?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function Kt(e,t,n,r){var i,o,a,s,u,l,c,f=n.length;if(!n.every(function(v){return typeof v=="string"}))return ne(e,ki);function d(v){i=Ma(v),o=Na(v),a=v==="next"?$a:Ba;var b=n.map(function(x){return{lower:o(x),upper:i(x)}}).sort(function(x,_){return a(x.lower,_.lower)});s=b.map(function(x){return x.upper}),u=b.map(function(x){return x.lower}),l=v,c=v==="next"?"":r}d("next");var g=new e.Collection(e,function(){return Ae(s[0],u[f-1]+r)});g._ondirectionchange=function(v){d(v)};var p=0;return g._addAlgorithm(function(v,b,x){var _=v.key;if(typeof _!="string")return!1;var y=o(_);if(t(y,u,p))return!0;for(var m=null,h=p;h<f;++h){var w=La(_,y,s[h],u[h],a,l);w===null&&m===null?p=h+1:(m===null||a(m,w)>0)&&(m=w)}return b(m!==null?function(){v.continue(m+c)}:x),!1}),g}function Ae(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Ri(e){return{type:1,lower:e,upper:e}}var Ti=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?qe(this):new this.Collection(this,function(){return Ae(t,n,!r,!i)})}catch{return ne(this,ve)}},e.prototype.equals=function(t){return t==null?ne(this,ve):new this.Collection(this,function(){return Ri(t)})},e.prototype.above=function(t){return t==null?ne(this,ve):new this.Collection(this,function(){return Ae(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?ne(this,ve):new this.Collection(this,function(){return Ae(t,void 0,!1)})},e.prototype.below=function(t){return t==null?ne(this,ve):new this.Collection(this,function(){return Ae(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?ne(this,ve):new this.Collection(this,function(){return Ae(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?ne(this,ki):this.between(t,t+Oe,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Kt(this,function(n,r){return n.indexOf(r[0])===0},[t],Oe)},e.prototype.equalsIgnoreCase=function(t){return Kt(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=me.apply(ze,arguments);return t.length===0?qe(this):Kt(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=me.apply(ze,arguments);return t.length===0?qe(this):Kt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,Oe)},e.prototype.anyOf=function(){var t=this,n=me.apply(ze,arguments),r=this._cmp;try{n.sort(r)}catch{return ne(this,ve)}if(n.length===0)return qe(this);var i=new this.Collection(this,function(){return Ae(n[0],n[n.length-1])});i._ondirectionchange=function(a){r=a==="next"?t._ascending:t._descending,n.sort(r)};var o=0;return i._addAlgorithm(function(a,s,u){for(var l=a.key;r(l,n[o])>0;)if(++o,o===n.length)return s(u),!1;return r(l,n[o])===0?!0:(s(function(){a.continue(n[o])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[Nn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=me.apply(ze,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return ne(this,ve)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Nn,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,o=this._ascending,a=this._descending,s=this._min,u=this._max;if(t.length===0)return qe(this);if(!t.every(function(h){return h[0]!==void 0&&h[1]!==void 0&&o(h[0],h[1])<=0}))return ne(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",R.InvalidArgument);var l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;function f(h,w){for(var C=0,E=h.length;C<E;++C){var S=h[C];if(i(w[0],S[1])<0&&i(w[1],S[0])>0){S[0]=s(S[0],w[0]),S[1]=u(S[1],w[1]);break}}return C===E&&h.push(w),h}var d=o;function g(h,w){return d(h[0],w[0])}var p;try{p=t.reduce(f,[]),p.sort(g)}catch{return ne(this,ve)}var v=0,b=c?function(h){return o(h,p[v][1])>0}:function(h){return o(h,p[v][1])>=0},x=l?function(h){return a(h,p[v][0])>0}:function(h){return a(h,p[v][0])>=0};function _(h){return!b(h)&&!x(h)}var y=b,m=new this.Collection(this,function(){return Ae(p[0][0],p[p.length-1][1],!l,!c)});return m._ondirectionchange=function(h){h==="next"?(y=b,d=o):(y=x,d=a),p.sort(g)},m._addAlgorithm(function(h,w,C){for(var E=h.key;y(E);)if(++v,v===p.length)return w(C),!1;return _(E)?!0:(r._cmp(E,p[v][1])===0||r._cmp(E,p[v][0])===0||w(function(){d===o?h.continue(p[v][0]):h.continue(p[v][1])}),!1)}),m},e.prototype.startsWithAnyOf=function(){var t=me.apply(ze,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?qe(this):this.inAnyRange(t.map(function(n){return[n,n+Oe]})):ne(this,"startsWithAnyOf() only works with strings")},e}();function Fa(e){return kt(Ti.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var o=e._deps.indexedDB;if(!o)throw new R.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(a,s){return o.cmp(s,a)},this._max=function(a,s){return o.cmp(a,s)>0?a:s},this._min=function(a,s){return o.cmp(a,s)<0?a:s},this._IDBKeyRange=e._deps.IDBKeyRange})}function he(e){return j(function(t){return vt(t),e(t.target.error),!1})}function vt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var yt="storagemutated",De="x-storagemutated-1",Te=Ct(null,yt),ja=function(){function e(){}return e.prototype._lock=function(){return it(!D.global),++this._reculock,this._reculock===1&&!D.global&&(D.lockOwnerFor=this),this},e.prototype._unlock=function(){if(it(!D.global),--this._reculock===0)for(D.global||(D.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{nt(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&D.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(it(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new R.DatabaseClosed(i);case"MissingAPIError":throw new R.MissingAPI(i.message,i);default:throw new R.OpenFailed(i)}if(!this.active)throw new R.TransactionInactive;return it(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=j(function(o){vt(o),n._reject(t.error)}),t.onabort=j(function(o){vt(o),n.active&&n._reject(new R.Abort(t.error)),n.active=!1,n.on("abort").fire(o)}),t.oncomplete=j(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Te.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return z(new R.ReadOnly("Transaction is readonly"));if(!this.active)return z(new R.TransactionInactive);if(this._locked())return new k(function(a,s){i._blockedFuncs.push([function(){i._promise(t,n,r).then(a,s)},D])});if(r)return Pe(function(){var a=new k(function(s,u){i._lock();var l=n(s,u,i);l&&l.then&&l.then(s,u)});return a.finally(function(){return i._unlock()}),a._lib=!0,a});var o=new k(function(a,s){var u=n(a,s,i);u&&u.then&&u.then(a,s)});return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=k.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var o=n._waitingFor;return new k(function(a,s){r.then(function(u){return n._waitingQueue.push(j(a.bind(null,u)))},function(u){return n._waitingQueue.push(j(s.bind(null,u)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new R.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(ie(n,t))return n[t];var r=this.schema[t];if(!r)throw new R.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function Wa(e){return kt(ja.prototype,function(n,r,i,o,a){var s=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=Ct(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new k(function(u,l){s._resolve=u,s._reject=l}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(u){var l=s.active;return s.active=!1,s.on.error.fire(u),s.parent?s.parent._reject(u):l&&s.idbtrans&&s.idbtrans.abort(),z(u)})})}function Ln(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+Ii(t)}}function Ii(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Ki(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:ci(n,function(r){return[r.name,r]})}}function Ua(e){return e.length===1?e[0]:e}var mt=function(e){try{return e.only([[]]),mt=function(){return[[]]},[[]]}catch{return mt=function(){return Oe},Oe}};function Fn(e){return e==null?function(){}:typeof e=="string"?Va(e):function(t){return be(t,e)}}function Va(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return be(n,e)}}function Ir(e){return[].slice.call(e)}var Ha=0;function ct(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function qa(e,t,n){function r(f,d){var g=Ir(f.objectStoreNames);return{schema:{name:f.name,tables:g.map(function(p){return d.objectStore(p)}).map(function(p){var v=p.keyPath,b=p.autoIncrement,x=G(v),_=v==null,y={},m={name:p.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_,compound:x,keyPath:v,autoIncrement:b,unique:!0,extractKey:Fn(v)},indexes:Ir(p.indexNames).map(function(h){return p.index(h)}).map(function(h){var w=h.name,C=h.unique,E=h.multiEntry,S=h.keyPath,A=G(S),T={name:w,compound:A,keyPath:S,unique:C,multiEntry:E,extractKey:Fn(S)};return y[ct(S)]=T,T}),getIndexByKeyPath:function(h){return y[ct(h)]}};return y[":id"]=m.primaryKey,v!=null&&(y[ct(v)]=m.primaryKey),m})},hasGetAll:g.length>0&&"getAll"in d.objectStore(g[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var d=f.lower,g=f.upper,p=f.lowerOpen,v=f.upperOpen,b=d===void 0?g===void 0?null:t.upperBound(g,!!v):g===void 0?t.lowerBound(d,!!p):t.bound(d,g,!!p,!!v);return b}function o(f){var d=f.name;function g(b){var x=b.trans,_=b.type,y=b.keys,m=b.values,h=b.range;return new Promise(function(w,C){w=j(w);var E=x.objectStore(d),S=E.keyPath==null,A=_==="put"||_==="add";if(!A&&_!=="delete"&&_!=="deleteRange")throw new Error("Invalid operation type: "+_);var T=(y||m||{length:1}).length;if(y&&m&&y.length!==m.length)throw new Error("Given keys array must have same length as given values array.");if(T===0)return w({numFailures:0,failures:{},results:[],lastResult:void 0});var $,K=[],W=[],P=0,q=function(de){++P,vt(de)};if(_==="deleteRange"){if(h.type===4)return w({numFailures:P,failures:W,results:[],lastResult:void 0});h.type===3?K.push($=E.clear()):K.push($=E.delete(i(h)))}else{var Y=A?S?[m,y]:[m,null]:[y,null],te=Y[0],fe=Y[1];if(A)for(var oe=0;oe<T;++oe)K.push($=fe&&fe[oe]!==void 0?E[_](te[oe],fe[oe]):E[_](te[oe])),$.onerror=q;else for(var oe=0;oe<T;++oe)K.push($=E[_](te[oe])),$.onerror=q}var Ee=function(de){var rt=de.target.result;K.forEach(function(ae,Dt){return ae.error!=null&&(W[Dt]=ae.error)}),w({numFailures:P,failures:W,results:_==="delete"?y:K.map(function(ae){return ae.result}),lastResult:rt})};$.onerror=function(de){q(de),Ee(de)},$.onsuccess=Ee})}function p(b){var x=b.trans,_=b.values,y=b.query,m=b.reverse,h=b.unique;return new Promise(function(w,C){w=j(w);var E=y.index,S=y.range,A=x.objectStore(d),T=E.isPrimaryKey?A:A.index(E.name),$=m?h?"prevunique":"prev":h?"nextunique":"next",K=_||!("openKeyCursor"in T)?T.openCursor(i(S),$):T.openKeyCursor(i(S),$);K.onerror=he(C),K.onsuccess=j(function(W){var P=K.result;if(!P){w(null);return}P.___id=++Ha,P.done=!1;var q=P.continue.bind(P),Y=P.continuePrimaryKey;Y&&(Y=Y.bind(P));var te=P.advance.bind(P),fe=function(){throw new Error("Cursor not started")},oe=function(){throw new Error("Cursor not stopped")};P.trans=x,P.stop=P.continue=P.continuePrimaryKey=P.advance=fe,P.fail=j(C),P.next=function(){var Ee=this,de=1;return this.start(function(){return de--?Ee.continue():Ee.stop()}).then(function(){return Ee})},P.start=function(Ee){var de=new Promise(function(ae,Dt){ae=j(ae),K.onerror=he(Dt),P.fail=Dt,P.stop=function(Wi){P.stop=P.continue=P.continuePrimaryKey=P.advance=oe,ae(Wi)}}),rt=function(){if(K.result)try{Ee()}catch(ae){P.fail(ae)}else P.done=!0,P.start=function(){throw new Error("Cursor behind last entry")},P.stop()};return K.onsuccess=j(function(ae){K.onsuccess=rt,rt()}),P.continue=q,P.continuePrimaryKey=Y,P.advance=te,rt(),de},w(P)},C)})}function v(b){return function(x){return new Promise(function(_,y){_=j(_);var m=x.trans,h=x.values,w=x.limit,C=x.query,E=w===1/0?void 0:w,S=C.index,A=C.range,T=m.objectStore(d),$=S.isPrimaryKey?T:T.index(S.name),K=i(A);if(w===0)return _({result:[]});if(b){var W=h?$.getAll(K,E):$.getAllKeys(K,E);W.onsuccess=function(te){return _({result:te.target.result})},W.onerror=he(y)}else{var P=0,q=h||!("openKeyCursor"in $)?$.openCursor(K):$.openKeyCursor(K),Y=[];q.onsuccess=function(te){var fe=q.result;if(!fe)return _({result:Y});if(Y.push(h?fe.value:fe.primaryKey),++P===w)return _({result:Y});fe.continue()},q.onerror=he(y)}})}}return{name:d,schema:f,mutate:g,getMany:function(b){var x=b.trans,_=b.keys;return new Promise(function(y,m){y=j(y);for(var h=x.objectStore(d),w=_.length,C=new Array(w),E=0,S=0,A,T=function(P){var q=P.target;(C[q._pos]=q.result)!=null,++S===E&&y(C)},$=he(m),K=0;K<w;++K){var W=_[K];W!=null&&(A=h.get(_[K]),A._pos=K,A.onsuccess=T,A.onerror=$,++E)}E===0&&y(C)})},get:function(b){var x=b.trans,_=b.key;return new Promise(function(y,m){y=j(y);var h=x.objectStore(d),w=h.get(_);w.onsuccess=function(C){return y(C.target.result)},w.onerror=he(m)})},query:v(u),openCursor:p,count:function(b){var x=b.query,_=b.trans,y=x.index,m=x.range;return new Promise(function(h,w){var C=_.objectStore(d),E=y.isPrimaryKey?C:C.index(y.name),S=i(m),A=S?E.count(S):E.count();A.onsuccess=j(function(T){return h(T.target.result)}),A.onerror=he(w)})}}}var a=r(e,n),s=a.schema,u=a.hasGetAll,l=s.tables.map(function(f){return o(f)}),c={};return l.forEach(function(f){return c[f.name]=f}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(f){var d=c[f];if(!d)throw new Error("Table '"+f+"' not found");return c[f]},MIN_KEY:-1/0,MAX_KEY:mt(t),schema:s}}function za(e,t){return t.reduce(function(n,r){var i=r.create;return O(O({},n),i(n))},e)}function Ya(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var o=za(qa(t,i,r),e.dbcore);return{dbcore:o}}function lr(e,t){var n=e._novip,r=t.db,i=Ya(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(o){var a=o.name;n.core.schema.tables.some(function(s){return s.name===a})&&(o.core=n.core.table(a),n[a]instanceof n.Table&&(n[a].core=o.core))})}function Zt(e,t,n,r){var i=e._novip;n.forEach(function(o){var a=r[o];t.forEach(function(s){var u=er(s,o);(!u||"value"in u&&u.value===void 0)&&(s===i.Transaction.prototype||s instanceof i.Transaction?_e(s,o,{get:function(){return this.table(o)},set:function(l){si(this,o,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):s[o]=new i.Table(o,a))})})}function jn(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function Xa(e,t){return e._cfg.version-t._cfg.version}function Ga(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),s=D.transless||D;Pe(function(){D.trans=o,D.transless=s,t===0?(V(i).forEach(function(u){cr(n,u,i[u].primKey,i[u].indexes)}),lr(e,n),k.follow(function(){return e.on.populate.fire(o)}).catch(a)):Qa(e,t,o,n).catch(a)})}function Qa(e,t,n,r){var i=e._novip,o=[],a=i._versions,s=i._dbSchema=fr(i,i.idbdb,r),u=!1,l=a.filter(function(f){return f._cfg.version>=t});l.forEach(function(f){o.push(function(){var d=s,g=f._cfg.dbschema;Un(i,d,r),Un(i,g,r),s=i._dbSchema=g;var p=Oi(d,g);p.add.forEach(function(m){cr(r,m[0],m[1].primKey,m[1].indexes)}),p.change.forEach(function(m){if(m.recreate)throw new R.Upgrade("Not yet support for changing primary key");var h=r.objectStore(m.name);m.add.forEach(function(w){return Wn(h,w)}),m.change.forEach(function(w){h.deleteIndex(w.name),Wn(h,w)}),m.del.forEach(function(w){return h.deleteIndex(w)})});var v=f._cfg.contentUpgrade;if(v&&f._cfg.version>t){lr(i,r),n._memoizedTables={},u=!0;var b=fi(g);p.del.forEach(function(m){b[m]=d[m]}),jn(i,[i.Transaction.prototype]),Zt(i,[i.Transaction.prototype],V(b),b),n.schema=b;var x=tr(v);x&&tt();var _,y=k.follow(function(){if(_=v(n),_&&x){var m=xe.bind(null,null);_.then(m,m)}});return _&&typeof _.then=="function"?k.resolve(_):y.then(function(){return _})}}),o.push(function(d){if(!u||!Ca){var g=f._cfg.dbschema;Za(g,d)}jn(i,[i.Transaction.prototype]),Zt(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function c(){return o.length?k.resolve(o.shift()(n.idbtrans)).then(c):k.resolve()}return c().then(function(){Ja(s,r)})}function Oi(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(!i)n.add.push([r,o]);else{var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!cn)a.recreate=!0,n.change.push(a);else{var s=i.idxByName,u=o.idxByName,l=void 0;for(l in s)u[l]||a.del.push(l);for(l in u){var c=s[l],f=u[l];c?c.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}}return n}function cr(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(o){return Wn(i,o)}),i}function Ja(e,t){V(e).forEach(function(n){t.db.objectStoreNames.contains(n)||cr(t,n,e[n].primKey,e[n].indexes)})}function Za(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function Wn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function fr(e,t,n){var r={},i=un(t.objectStoreNames,0);return i.forEach(function(o){for(var a=n.objectStore(o),s=a.keyPath,u=Ln(Ii(s),s||"",!1,!1,!!a.autoIncrement,s&&typeof s!="string",!0),l=[],c=0;c<a.indexNames.length;++c){var f=a.index(a.indexNames[c]);s=f.keyPath;var d=Ln(f.name,s,!!f.unique,!!f.multiEntry,!1,s&&typeof s!="string",!1);l.push(d)}r[o]=Ki(o,u,l)}),r}function es(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=fr(r,t,n);r._storeNames=un(t.objectStoreNames,0),Zt(r,[r._allTables],V(i),i)}function ts(e,t){var n=fr(e,e.idbdb,t),r=Oi(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Un(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,o=0;o<i.length;++o){var a=i[o],s=n.objectStore(a);r._hasGetAll="getAll"in s;for(var u=0;u<s.indexNames.length;++u){var l=s.indexNames[u],c=s.index(l).keyPath,f=typeof c=="string"?c:"["+un(c).join("+")+"]";if(t[a]){var d=t[a].idxByName[f];d&&(d.name=l,delete t[a].idxByName[f],t[a].idxByName[l]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&F.WorkerGlobalScope&&F instanceof F.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function ns(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Ln(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),G(i),n===0)})}var rs=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){V(t).forEach(function(r){if(t[r]!==null){var i=ns(t[r]),o=i.shift();if(o.multi)throw new R.Schema("Primary key cannot be multi-valued");i.forEach(function(a){if(a.auto)throw new R.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new R.Schema("Index must have a name and cannot be an empty string")}),n[r]=Ki(r,o,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?Z(this._cfg.storesSource,t):t;var r=n._versions,i={},o={};return r.forEach(function(a){Z(i,a._cfg.storesSource),o=a._cfg.dbschema={},a._parseStoresSpec(i,o)}),n._dbSchema=o,jn(n,[n._allTables,n,n.Transaction.prototype]),Zt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],V(o),o),n._storeNames=V(o),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=ir(this._cfg.contentUpgrade||M,t),this},e}();function is(e){return kt(rs.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function dr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new yr(fn,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function hr(e){return e&&typeof e.databases=="function"}function os(e){var t=e.indexedDB,n=e.IDBKeyRange;return hr(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==fn})}):dr(t,n).toCollection().primaryKeys()}function as(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!hr(n)&&t!==fn&&dr(n,r).put({name:t}).catch(M)}function ss(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!hr(n)&&t!==fn&&dr(n,r).delete(t).catch(M)}function Vn(e){return Pe(function(){return D.letThrough=!0,e()})}function us(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function ls(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?z(t.dbOpenError):e});pe&&(t.openCanceller._stackHolder=Ue()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new R.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,a=null,s=!1;return k.race([r,(typeof navigator>"u"?k.resolve():us()).then(function(){return new k(function(u,l){if(i(),!n)throw new R.MissingAPI;var c=e.name,f=t.autoSchema?n.open(c):n.open(c,Math.round(e.verno*10));if(!f)throw new R.MissingAPI;f.onerror=he(l),f.onblocked=j(e._fireOnBlocked),f.onupgradeneeded=j(function(d){if(a=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=vt,a.abort(),f.result.close();var g=n.deleteDatabase(c);g.onsuccess=g.onerror=j(function(){l(new R.NoSuchDatabase("Database "+c+" doesnt exist"))})}else{a.onerror=he(l);var p=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;s=p<1,e._novip.idbdb=f.result,Ga(e,p/10,a,l)}},l),f.onsuccess=j(function(){a=null;var d=e._novip.idbdb=f.result,g=un(d.objectStoreNames);if(g.length>0)try{var p=d.transaction(Ua(g),"readonly");t.autoSchema?es(e,d,p):(Un(e,e._dbSchema,p),ts(e,p)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),lr(e,p)}catch{}lt.push(e),d.onversionchange=j(function(v){t.vcFired=!0,e.on("versionchange").fire(v)}),d.onclose=j(function(v){e.on("close").fire(v)}),s&&as(e._deps,c),u()},l)})})]).then(function(){return i(),t.onReadyBeingFired=[],k.resolve(Vn(function(){return e.on.ready.fire(e.vip)})).then(function u(){if(t.onReadyBeingFired.length>0){var l=t.onReadyBeingFired.reduce(ir,M);return t.onReadyBeingFired=[],k.resolve(Vn(function(){return l(e.vip)})).then(u)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(u){t.dbOpenError=u;try{a&&a.abort()}catch{}return r===t.openCanceller&&e._close(),z(u)}).finally(function(){t.openComplete=!0,o()})}function Hn(e){var t=function(a){return e.next(a)},n=function(a){return e.throw(a)},r=o(t),i=o(n);function o(a){return function(s){var u=a(s),l=u.value;return u.done?l:!l||typeof l.then!="function"?G(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return o(t)()}function cs(e,t,n){var r=arguments.length;if(r<2)throw new R.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=di(i);return[e,o,n]}function $i(e,t,n,r,i){return k.resolve().then(function(){var o=D.transless||D,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===rr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return $i(e,t,n,null,i)})):z(f)}var u=tr(i);u&&tt();var l,c=k.follow(function(){if(l=i.call(a,a),l)if(u){var f=xe.bind(null,null);l.then(f,f)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=Hn(l))},s);return(l&&typeof l.then=="function"?k.resolve(l).then(function(f){return a.active?f:z(new R.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return l})).then(function(f){return r&&a._resolve(),a._completion.then(function(){return f})}).catch(function(f){return a._reject(f),z(f)})})}function Ot(e,t,n){for(var r=G(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function fs(e){return O(O({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},o=[];function a(v,b,x){var _=ct(v),y=i[_]=i[_]||[],m=v==null?0:typeof v=="string"?1:v.length,h=b>0,w=O(O({},x),{isVirtual:h,keyTail:b,keyLength:m,extractKey:Fn(v),unique:!h&&x.unique});if(y.push(w),w.isPrimaryKey||o.push(w),m>1){var C=m===2?v[0]:v.slice(0,m-1);a(C,b+1,x)}return y.sort(function(E,S){return E.keyTail-S.keyTail}),w}var s=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];for(var u=0,l=r.indexes;u<l.length;u++){var c=l[u];a(c.keyPath,0,c)}function f(v){var b=i[ct(v)];return b&&b[0]}function d(v,b){return{type:v.type===1?2:v.type,lower:Ot(v.lower,v.lowerOpen?e.MAX_KEY:e.MIN_KEY,b),lowerOpen:!0,upper:Ot(v.upper,v.upperOpen?e.MIN_KEY:e.MAX_KEY,b),upperOpen:!0}}function g(v){var b=v.query.index;return b.isVirtual?O(O({},v),{query:{index:b,range:d(v.query.range,b.keyTail)}}):v}var p=O(O({},n),{schema:O(O({},r),{primaryKey:s,indexes:o,getIndexByKeyPath:f}),count:function(v){return n.count(g(v))},query:function(v){return n.query(g(v))},openCursor:function(v){var b=v.query.index,x=b.keyTail,_=b.isVirtual,y=b.keyLength;if(!_)return n.openCursor(v);function m(h){function w(E){E!=null?h.continue(Ot(E,v.reverse?e.MAX_KEY:e.MIN_KEY,x)):v.unique?h.continue(h.key.slice(0,y).concat(v.reverse?e.MIN_KEY:e.MAX_KEY,x)):h.continue()}var C=Object.create(h,{continue:{value:w},continuePrimaryKey:{value:function(E,S){h.continuePrimaryKey(Ot(E,e.MAX_KEY,x),S)}},primaryKey:{get:function(){return h.primaryKey}},key:{get:function(){var E=h.key;return y===1?E[0]:E.slice(0,y)}},value:{get:function(){return h.value}}});return C}return n.openCursor(g(v)).then(function(h){return h&&m(h)})}});return p}})}var ds={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:fs};function pr(e,t,n,r){return n=n||{},r=r||"",V(e).forEach(function(i){if(!ie(t,i))n[r+i]=void 0;else{var o=e[i],a=t[i];if(typeof o=="object"&&typeof a=="object"&&o&&a){var s=Cn(o),u=Cn(a);s!==u?n[r+i]=t[i]:s==="Object"?pr(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i])}else o!==a&&(n[r+i]=t[i])}}),V(t).forEach(function(i){ie(e,i)||(n[r+i]=t[i])}),n}function hs(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ps={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return O(O({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=O(O({},n),{mutate:function(o){var a=D.trans,s=a.table(t).hook,u=s.deleting,l=s.creating,c=s.updating;switch(o.type){case"add":if(l.fire===M)break;return a._promise("readwrite",function(){return f(o)},!0);case"put":if(l.fire===M&&c.fire===M)break;return a._promise("readwrite",function(){return f(o)},!0);case"delete":if(u.fire===M)break;return a._promise("readwrite",function(){return f(o)},!0);case"deleteRange":if(u.fire===M)break;return a._promise("readwrite",function(){return d(o)},!0)}return n.mutate(o);function f(p){var v=D.trans,b=p.keys||hs(r,p);if(!b)throw new Error("Keys missing");return p=p.type==="add"||p.type==="put"?O(O({},p),{keys:b}):O({},p),p.type!=="delete"&&(p.values=En([],p.values,!0)),p.keys&&(p.keys=En([],p.keys,!0)),vs(n,p,b).then(function(x){var _=b.map(function(y,m){var h=x[m],w={onerror:null,onsuccess:null};if(p.type==="delete")u.fire.call(w,y,h,v);else if(p.type==="add"||h===void 0){var C=l.fire.call(w,y,p.values[m],v);y==null&&C!=null&&(y=C,p.keys[m]=y,r.outbound||le(p.values[m],r.keyPath,y))}else{var E=pr(h,p.values[m]),S=c.fire.call(w,E,y,h,v);if(S){var A=p.values[m];Object.keys(S).forEach(function(T){ie(A,T)?A[T]=S[T]:le(A,T,S[T])})}}return w});return n.mutate(p).then(function(y){for(var m=y.failures,h=y.results,w=y.numFailures,C=y.lastResult,E=0;E<b.length;++E){var S=h?h[E]:b[E],A=_[E];S==null?A.onerror&&A.onerror(m[E]):A.onsuccess&&A.onsuccess(p.type==="put"&&x[E]?p.values[E]:S)}return{failures:m,results:h,numFailures:w,lastResult:C}}).catch(function(y){return _.forEach(function(m){return m.onerror&&m.onerror(y)}),Promise.reject(y)})})}function d(p){return g(p.trans,p.range,1e4)}function g(p,v,b){return n.query({trans:p,values:!1,query:{index:r,range:v},limit:b}).then(function(x){var _=x.result;return f({type:"delete",keys:_,trans:p}).then(function(y){return y.numFailures>0?Promise.reject(y.failures[0]):_.length<b?{failures:[],numFailures:0,lastResult:void 0}:g(p,O(O({},v),{lower:_[_.length-1],lowerOpen:!0}),b)})})}}});return i}})}};function vs(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Bi(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)J(t.keys[i],e[o])===0&&(r.push(n?xt(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch{return null}}var ys={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return O(O({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Bi(r.keys,r.trans._cache,r.cache==="clone");return i?k.resolve(i):n.getMany(r).then(function(o){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?xt(o):o},o})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},wn;function vr(e){return!("from"in e)}var ye=function(e,t){if(this)Z(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new ye;return e&&"d"in e&&Z(n,e),n}};Je(ye.prototype,(wn={add:function(e){return en(this,e),this},addKey:function(e){return gt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return gt(t,n,n)}),this}},wn[kn]=function(){return qn(this)},wn));function gt(e,t,n){var r=J(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(vr(e))return Z(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(J(n,e.from)<0)return i?gt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Kr(e);if(J(t,e.to)>0)return o?gt(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Kr(e);J(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),J(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;i&&!e.l&&en(e,i),o&&a&&en(e,o)}}function en(e,t){function n(r,i){var o=i.from,a=i.to,s=i.l,u=i.r;gt(r,o,a),s&&n(r,s),u&&n(r,u)}vr(t)||n(e,t)}function ms(e,t){var n=qn(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=qn(e),a=o.next(i.from),s=a.value;!r.done&&!a.done;){if(J(s.from,i.to)<=0&&J(s.to,i.from)>=0)return!0;J(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(a=o.next(i.from)).value}return!1}function qn(e){var t=vr(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&J(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||J(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Kr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var o=i==="r"?"l":"r",a=O({},e),s=e[i];e.from=s.from,e.to=s.to,e[i]=s[i],a[i]=s[o],e[o]=a,a.d=Or(a)}e.d=Or(e)}function Or(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var gs={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new ye(e.MIN_KEY,e.MAX_KEY);return O(O({},e),{table:function(r){var i=e.table(r),o=i.schema,a=o.primaryKey,s=a.extractKey,u=a.outbound,l=O(O({},i),{mutate:function(d){var g=d.trans,p=g.mutatedParts||(g.mutatedParts={}),v=function(C){var E="idb://"+t+"/"+r+"/"+C;return p[E]||(p[E]=new ye)},b=v(""),x=v(":dels"),_=d.type,y=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[],m=y[0],h=y[1],w=d.trans._cache;return i.mutate(d).then(function(C){if(G(m)){_!=="delete"&&(m=C.results),b.addKeys(m);var E=Bi(m,w);!E&&_!=="add"&&x.addKeys(m),(E||h)&&bs(v,o,E,h)}else if(m){var S={from:m.lower,to:m.upper};x.add(S),b.add(S)}else b.add(n),x.add(n),o.indexes.forEach(function(A){return v(A.name).add(n)});return C})}}),c=function(d){var g,p,v=d.query,b=v.index,x=v.range;return[b,new ye((g=x.lower)!==null&&g!==void 0?g:e.MIN_KEY,(p=x.upper)!==null&&p!==void 0?p:e.MAX_KEY)]},f={get:function(d){return[a,new ye(d.key)]},getMany:function(d){return[a,new ye().addKeys(d.keys)]},count:c,query:c,openCursor:c};return V(f).forEach(function(d){l[d]=function(g){var p=D.subscr;if(p){var v=function(w){var C="idb://"+t+"/"+r+"/"+w;return p[C]||(p[C]=new ye)},b=v(""),x=v(":dels"),_=f[d](g),y=_[0],m=_[1];if(v(y.name||"").add(m),!y.isPrimaryKey)if(d==="count")x.add(n);else{var h=d==="query"&&u&&g.values&&i.query(O(O({},g),{values:!1}));return i[d].apply(this,arguments).then(function(w){if(d==="query"){if(u&&g.values)return h.then(function(A){var T=A.result;return b.addKeys(T),w});var C=g.values?w.result.map(s):w.result;g.values?b.addKeys(C):x.addKeys(C)}else if(d==="openCursor"){var E=w,S=g.values;return E&&Object.create(E,{key:{get:function(){return x.addKey(E.primaryKey),E.key}},primaryKey:{get:function(){var A=E.primaryKey;return x.addKey(A),A}},value:{get:function(){return S&&b.addKey(E.primaryKey),E.value}}})}return w})}}return i[d].apply(this,arguments)}}),l}})}};function bs(e,t,n,r){function i(o){var a=e(o.name||"");function s(l){return l!=null?o.extractKey(l):null}var u=function(l){return o.multiEntry&&G(l)?l.forEach(function(c){return a.addKey(c)}):a.addKey(l)};(n||r).forEach(function(l,c){var f=n&&s(n[c]),d=r&&s(r[c]);J(f,d)!==0&&(f!=null&&u(f),d!=null&&u(d))})}t.indexes.forEach(i)}var yr=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=O({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:M,dbReadyPromise:null,cancelOpen:M,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};a.dbReadyPromise=new k(function(s){a.dbReadyResolve=s}),a.openCanceller=new k(function(s,u){a.cancelOpen=u}),this._state=a,this.name=t,this.on=Ct(this,"populate","blocked","versionchange","close",{ready:[ir,M]}),this.on.ready.subscribe=ui(this.on.ready.subscribe,function(s){return function(u,l){e.vip(function(){var c=r._state;if(c.openComplete)c.dbOpenError||k.resolve().then(u),l&&s(u);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(u),l&&s(u);else{s(u);var f=r;l||s(function d(){f.on.ready.unsubscribe(u),f.on.ready.unsubscribe(d)})}})}}),this.Collection=Oa(this),this.Table=Pa(this),this.Transaction=Wa(this),this.Version=is(this),this.WhereClause=Fa(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+s.oldVersion/10)}),this._maxKey=mt(n.IDBKeyRange),this._createTransaction=function(s,u,l,c){return new r.Transaction(s,u,l,r._options.chromeTransactionDurability,c)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),lt.filter(function(u){return u.name===r.name&&u!==r&&!u._state.vcFired}).map(function(u){return u.on("versionchange").fire(s)})},this.use(ds),this.use(ps),this.use(gs),this.use(ys),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new R.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new R.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(Xa),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||D.letThrough||this._vip)?t():new k(function(r,i){if(n._state.openComplete)return i(new R.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new R.DatabaseClosed);return}n.open().catch(M)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,o=t.name;o&&this.unuse({stack:n,name:o});var a=this._middlewares[n]||(this._middlewares[n]=[]);return a.push({stack:n,create:r,level:i??10,name:o}),a.sort(function(s,u){return s.level-u.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(o){return i?o.create!==i:r?o.name!==r:!1})),this},e.prototype.open=function(){return ls(this)},e.prototype._close=function(){var t=this._state,n=lt.indexOf(this);if(n>=0&&lt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new k(function(r){t.dbReadyResolve=r}),t.openCanceller=new k(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new R.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new k(function(i,o){var a=function(){t.close();var s=t._deps.indexedDB.deleteDatabase(t.name);s.onsuccess=j(function(){ss(t._deps,t.name),i()}),s.onerror=he(o),s.onblocked=t._fireOnBlocked};if(n)throw new R.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return V(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=cs.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,o=D.trans;(!o||o.db!==this||t.indexOf("!")!==-1)&&(o=null);var a=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var s,u;try{if(u=n.map(function(c){var f=c instanceof i.Table?c.name:c;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t===vn)s=vn;else if(t=="rw"||t==yn)s=yn;else throw new R.InvalidArgument("Invalid transaction mode: "+t);if(o){if(o.mode===vn&&s===yn)if(a)o=null;else throw new R.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&u.forEach(function(c){if(o&&o.storeNames.indexOf(c)===-1)if(a)o=null;else throw new R.SubTransaction("Table "+c+" not included in parent transaction.")}),a&&o&&!o.active&&(o=null)}}catch(c){return o?o._promise(null,function(f,d){d(c)}):z(c)}var l=$i.bind(null,this,s,u,o,r);return o?o._promise(s,l,"lock"):D.trans?nt(D.transless,function(){return i._whenReady(l)}):this._whenReady(l)},e.prototype.table=function(t){if(!ie(this._allTables,t))throw new R.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),ws=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",_s=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[ws]=function(){return this},e}();function Mi(e,t){return V(t).forEach(function(n){var r=e[n]||(e[n]=new ye);en(r,t[n])}),e}function Ni(e){return new _s(function(t){var n=tr(e);function r(g){n&&tt();var p=function(){return Pe(e,{subscr:g,trans:null})},v=D.trans?nt(D.transless,p):p();return n&&v.then(xe,xe),v}var i=!1,o={},a={},s={get closed(){return i},unsubscribe:function(){i=!0,Te.storagemutated.unsubscribe(f)}};t.start&&t.start(s);var u=!1,l=!1;function c(){return V(a).some(function(g){return o[g]&&ms(o[g],a[g])})}var f=function(g){Mi(o,g),c()&&d()},d=function(){if(!(u||i)){o={};var g={},p=r(g);l||(Te(yt,f),l=!0),u=!0,Promise.resolve(p).then(function(v){u=!1,!i&&(c()?d():(o={},a=g,t.next&&t.next(v)))},function(v){u=!1,t.error&&t.error(v),s.unsubscribe()})}};return d(),s})}var zn;try{zn={indexedDB:F.indexedDB||F.mozIndexedDB||F.webkitIndexedDB||F.msIndexedDB,IDBKeyRange:F.IDBKeyRange||F.webkitIDBKeyRange}}catch{zn={indexedDB:null,IDBKeyRange:null}}var Ke=yr;Je(Ke,O(O({},ln),{delete:function(e){var t=new Ke(e,{addons:[]});return t.delete()},exists:function(e){return new Ke(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return os(Ke.dependencies).then(e)}catch{return z(new R.MissingAPI)}},defineClass:function(){function e(t){Z(this,t)}return e},ignoreTransaction:function(e){return D.trans?nt(D.transless,e):e()},vip:Vn,async:function(e){return function(){try{var t=Hn(e.apply(this,arguments));return!t||typeof t.then!="function"?k.resolve(t):t}catch(n){return z(n)}}},spawn:function(e,t,n){try{var r=Hn(e.apply(n,t||[]));return!r||typeof r.then!="function"?k.resolve(r):r}catch(i){return z(i)}},currentTransaction:{get:function(){return D.trans||null}},waitFor:function(e,t){var n=k.resolve(typeof e=="function"?Ke.ignoreTransaction(e):e).timeout(t||6e4);return D.trans?D.trans.waitFor(n):n},Promise:k,debug:{get:function(){return pe},set:function(e){pi(e,e==="dexie"?function(){return!0}:Di)}},derive:Ze,extend:Z,props:Je,override:ui,Events:Ct,on:Te,liveQuery:Ni,extendObservabilitySet:Mi,getByKeyPath:be,setByKeyPath:le,delByKeyPath:ea,shallowClone:fi,deepClone:xt,getObjectDiff:pr,cmp:J,asap:li,minKey:Nn,addons:[],connections:lt,errnames:rr,dependencies:zn,semVer:kr,version:kr.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));Ke.maxKey=mt(Ke.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Te(yt,function(e){if(!ge){var t;cn?(t=document.createEvent("CustomEvent"),t.initCustomEvent(De,!0,!0,e)):t=new CustomEvent(De,{detail:e}),ge=!0,dispatchEvent(t),ge=!1}}),addEventListener(De,function(e){var t=e.detail;ge||tn(t)}));function tn(e){var t=ge;try{ge=!0,Te.storagemutated.fire(e)}finally{ge=t}}var ge=!1;if(typeof BroadcastChannel<"u"){var $r=new BroadcastChannel(De);Te(yt,function(e){ge||$r.postMessage(e)}),$r.onmessage=function(e){e.data&&tn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Te(yt,function(e){try{ge||(typeof localStorage<"u"&&localStorage.setItem(De,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&En([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:De,changedParts:e})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(e){if(e.key===De){var t=JSON.parse(e.newValue);t&&tn(t.changedParts)}});var Br=self.document&&navigator.serviceWorker;Br&&Br.addEventListener("message",xs)}function xs(e){var t=e.data;t&&t.type===De&&tn(t.changedParts)}k.rejectionMapper=la;pi(pe,Di);class Ss extends yr{decks;words;constructor(){super("vocabulary"),this.version(1).stores({decks:"++id, name",words:"++id, word, deckId"})}}const re=new Ss,Ge=e=>{const[t,n]=ee(),i=Ni(e).subscribe(o=>{n(()=>o)});return nn(()=>{i.unsubscribe()}),t};const Es=H('<main><h1>Home</h1><ul aria-label="List of decks" class="deck-list"></ul></main>'),As=H("<li></li>"),Cs=()=>{const e=Ge(async()=>await re.decks.toArray());return(()=>{const t=Es.cloneNode(!0),n=t.firstChild,r=n.nextSibling;return B(r,I(no,{get each(){return e()},children:i=>(()=>{const o=As.cloneNode(!0);return B(o,I(we,{class:"deck-card",get href(){return`/deck/${i.id?.toString()}`},get children(){return i.name}})),o})()})),B(t,I(we,{class:"button",href:"/create-deck",children:"Create deck"}),null),t})()},ks=H('<main><h1>Create Deck</h1><form><label for="input-create-deck-name">Name</label><input class="input" id="input-create-deck-name"><button class="button">Create</button></form></main>'),Ds=()=>{let e;const t=ri(),n=r=>{r.preventDefault(),re.decks.add({name:e.value}).then(()=>t("/")).catch(console.error)};return(()=>{const r=ks.cloneNode(!0),i=r.firstChild,o=i.nextSibling,a=o.firstChild,s=a.nextSibling;o.addEventListener("submit",n);const u=e;return typeof u=="function"?$t(u,s):e=s,r})()};function dn(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Se(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Ut(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ut=function(n){return typeof n}:Ut=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ut(e)}function bt(e){Se(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Ut(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Ps(e,t){Se(2,arguments);var n=bt(e),r=dn(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function Li(e,t){Se(2,arguments);var n=bt(e).getTime(),r=dn(t);return new Date(n+r)}var Rs=36e5;function Ts(e,t){Se(2,arguments);var n=dn(t);return Li(e,n*Rs)}function Yn(e){Se(1,arguments);var t=bt(e);return t.setHours(0,0,0,0),t}var Is=6e4;function Ks(e,t){Se(2,arguments);var n=dn(t);return Li(e,n*Is)}function Os(e,t){Se(2,arguments);var n=Yn(e),r=Yn(t);return n.getTime()===r.getTime()}function Fi(e,t){Se(2,arguments);var n=bt(e),r=bt(t);return n.getTime()<r.getTime()}function $s(e){return Se(1,arguments),Os(e,Date.now())}const Bs=H('<main><h1></h1><h2>Word count: <!> | Due: </h2><div class="deck-actions"></div></main>'),Ms=()=>{const{id:e}=sn(),t=parseInt(e,10),n=Ge(async()=>await re.decks.get(parseInt(e,10))),r=Ge(async()=>await re.words.where("deckId").equals(t).count()),i=Ge(async()=>await re.words.where("deckId").equals(t).and(o=>Fi(o.dueDate,new Date)).count());return(()=>{const o=Bs.cloneNode(!0),a=o.firstChild,s=a.nextSibling,u=s.firstChild,l=u.nextSibling;l.nextSibling;const c=s.nextSibling;return B(a,()=>n()?.name),B(s,r,l),B(s,i,null),B(c,I(we,{class:"button",href:`/deck/${e}/add-word`,children:"Add word"}),null),B(c,I(we,{class:"button success",href:`/deck/${e}/study`,children:"Study"}),null),o})()},Ns=30,Ls=.5,Fs=H('<form><label for="input-word-text">Word / Phrase</label><input class="input" id="input-word-text"><label for="input-word-meaning">Meaning</label><input class="input" id="input-word-meaning"><label for="input-word-context">Context</label><input class="input" id="input-word-context"><button class="button"></button></form>'),ji=e=>{let t,n,r;const i=a=>{a.preventDefault(),e.onSubmit({word:t.value,meaning:n.value,context:r.value}),e.resetForm===!0&&(t.value="",n.value="",r.value="")},o=a=>a==null?"":a.toString();return(()=>{const a=Fs.cloneNode(!0),s=a.firstChild,u=s.nextSibling,l=u.nextSibling,c=l.nextSibling,f=c.nextSibling,d=f.nextSibling,g=d.nextSibling;a.addEventListener("submit",i);const p=t;typeof p=="function"?$t(p,u):t=u;const v=n;typeof v=="function"?$t(v,c):n=c;const b=r;return typeof b=="function"?$t(b,d):r=d,B(g,()=>e.submitText),ue(()=>u.value=o(e.defaultData?.word)),ue(()=>c.value=o(e.defaultData?.meaning)),ue(()=>d.value=o(e.defaultData?.context)),a})()};const js=H('<main><div class="added-words"></div><h1>Add Word</h1></main>'),Ws=()=>{const{id:e}=sn(),[t,n]=ee([]),r=i=>{re.words.add({word:i.word,meaning:i.meaning,context:i.context,dueDate:Ks(new Date,Ns),deckId:parseInt(e,10),nextIntervalDays:Ls}).then(()=>{n(o=>[i.word,...o])}).catch(console.error)};return(()=>{const i=js.cloneNode(!0),o=i.firstChild;return o.nextSibling,B(i,I(we,{class:"button narrow",href:`/deck/${e}`,children:"Back to Deck"}),o),B(o,I(se,{get when(){return t().length>0},get children(){return["Just added: ",L(()=>t().join(", "))]}})),B(i,I(ji,{onSubmit:r,submitText:"Add",resetForm:!0}),null),i})()},Us="modulepreload",Vs=function(e){return"/vocab-trainer/"+e},Mr={},Hs=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=Vs(o),o in Mr)return;Mr[o]=!0;const a=o.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const f=i[c];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const l=document.createElement("link");if(l.rel=a?"stylesheet":Us,a||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),a)return new Promise((c,f)=>{l.addEventListener("load",c),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())};function qs(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:a}=e;let s,u,l,c;const f=async(g=!0)=>{await l,g&&s?.addEventListener("controlling",p=>{p.isUpdate&&window.location.reload()}),await c?.()};async function d(){if("serviceWorker"in navigator){const{Workbox:g,messageSW:p}=await Hs(()=>import("./workbox-window.prod.es5.d2780aeb.js"),[]);c=async()=>{u&&u.waiting&&await p(u.waiting,{type:"SKIP_WAITING"})},s=new g("/vocab-trainer/sw.js",{scope:"/vocab-trainer/",type:"classic"}),s.addEventListener("activated",v=>{v.isUpdate||r?.()});{const v=()=>{n?.()};s.addEventListener("waiting",v),s.addEventListener("externalwaiting",v)}s.register({immediate:t}).then(v=>{u=v,o?o("/vocab-trainer/sw.js",v):i?.(v)}).catch(v=>{a?.(v)})}}return l=d(),f}function zs(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:a}=e,[s,u]=ee(!1),[l,c]=ee(!1),f=qs({immediate:t,onOfflineReady(){c(!0),r?.()},onNeedRefresh(){u(!0),n?.()},onRegistered:i,onRegisteredSW:o,onRegisterError:a});return{needRefresh:[s,u],offlineReady:[l,c],updateServiceWorker:f}}const Ys=H('<main><h1>Settings</h1><div class="settings"><button class="button">Delete data</button><button class="button">Update</button></div></main>'),Xs=()=>{const e=()=>{re.delete().then(async()=>await re.open()).catch(console.error)},t=zs();return(()=>{const n=Ys.cloneNode(!0),r=n.firstChild,i=r.nextSibling,o=i.firstChild,a=o.nextSibling;return o.$$click=e,a.$$click=()=>t?.updateServiceWorker(),n})()};wt(["click"]);const Gs=H('<div class="header-actions"></div>'),Nr=H('<div class="card"></div>'),Qs=H('<div class="actions"><button class="button failure">Forgotton</button><button class="button success">Remembered</button></div>'),Lr=H('<p class="answer"></p>'),Js=H('<div class="actions"><button class="button failure">Incorrect</button><button class="button success">Correct</button></div>'),Zs=H("<p>Finished</p>"),eu=H("<p>No words to study currently</p>"),tu=H("<main><h1>Study </h1></main>"),nu=H(`<div class="actions"><button class="button failure">Still can't recall</button><button class="button success">Remembered with context</button></div>`),ru=H('<div class="actions"><button class="button failure">Continue</button></div>'),iu=()=>{const{id:e}=sn(),t=parseInt(e,10),n=Ge(async()=>await re.decks.get(t)),[r,i]=ee(),[o,a]=ee(),[s,u]=ee();re.words.where("deckId").equals(t).and(y=>Fi(new Date(0),new Date)).toArray().then(y=>{const m=y.reduce((h,w)=>(h[w.id]={word:w,reviewed:!1},h),{});i(m),a(l(m))}).catch(console.error);const l=y=>{const m=Object.values(y).filter(w=>!w.reviewed);if(m.length===0)return;const h=Math.floor(Math.random()*m.length);return m[h].word},c=()=>{u({userSaidTheyRememberedCorrectly:!0})},f=()=>{u({userSaidTheyRememberedCorrectly:!1})},d=()=>{u({userSaidTheyRememberedCorrectly:!0,requiredContext:!0})},g=()=>{u({userSaidTheyRememberedCorrectly:!1,forgotWithContext:!0})},p=()=>{const y=s()?.requiredContext===!0;b(y?1.1:2)},v=()=>{b(1)},b=y=>{const m=o(),h=m.nextIntervalDays,w=new Date;let C;C=h<1?Ts(w,h*24):Ps(w,h),$s(C)||(C=Yn(C)),re.words.update(m.id,{dueDate:C,nextIntervalDays:h*y}).catch(console.error);const E=r();E[m.id].reviewed=!0,i(E),a(l(E)),u(void 0)},x=y=>y==null?!0:Object.values(y).length>0,_=()=>{if(s()?.forgotWithContext===!0)return!1;const y=o();return y?.context!=null&&y.context!==""};return(()=>{const y=tu.cloneNode(!0),m=y.firstChild;return m.firstChild,B(m,()=>n()?.name,null),B(y,I(se,{get when(){return o()},get children(){return[(()=>{const h=Gs.cloneNode(!0);return B(h,I(we,{class:"button narrow",get href(){return`/edit-word/${o()?.id}`},children:"Edit"})),h})(),(()=>{const h=Nr.cloneNode(!0);return B(h,()=>o()?.word),h})(),I(se,{get when(){return s()==null},get children(){const h=Qs.cloneNode(!0),w=h.firstChild,C=w.nextSibling;return w.$$click=f,C.$$click=c,h}}),I(se,{get when(){return s()!=null},get children(){return[I(se,{get when(){return!s()?.userSaidTheyRememberedCorrectly},get children(){return[L(()=>L(()=>!!_())()&&[(()=>{const h=Nr.cloneNode(!0);return B(h,()=>o()?.context),h})(),(()=>{const h=nu.cloneNode(!0),w=h.firstChild,C=w.nextSibling;return w.$$click=g,C.$$click=d,h})()]),L(()=>L(()=>!_())()&&[(()=>{const h=Lr.cloneNode(!0);return B(h,()=>o()?.meaning),h})(),(()=>{const h=ru.cloneNode(!0),w=h.firstChild;return w.$$click=v,h})()])]}}),I(se,{get when(){return s()?.userSaidTheyRememberedCorrectly},get children(){return[(()=>{const h=Lr.cloneNode(!0);return B(h,()=>o()?.meaning),h})(),(()=>{const h=Js.cloneNode(!0),w=h.firstChild,C=w.nextSibling;return w.$$click=v,C.$$click=p,h})()]}})]}})]}}),null),B(y,I(se,{get when(){return L(()=>o()==null)()&&x(r())},get children(){return Zs.cloneNode(!0)}}),null),B(y,I(se,{get when(){return L(()=>r()!=null)()&&!x(r())},get children(){return eu.cloneNode(!0)}}),null),y})()};wt(["click"]);const ou=H("<main><h1>Edit</h1></main>"),au=()=>{const{id:e}=sn(),[{returnTo:t}]=Lo(),n=parseInt(e,10),r=Ge(async()=>await re.words.get(n)),i=s=>{re.words.update(n,s).catch(console.error)},o=()=>{const s=r();return{word:s?.word,meaning:s?.meaning,context:s?.context}},a=t??"/";return(()=>{const s=ou.cloneNode(!0);return s.firstChild,B(s,I(we,{href:a,children:"Back"}),null),B(s,I(se,{get when(){return r()},get children(){return I(ji,{onSubmit:i,submitText:"Update",get defaultData(){return o()}})}}),null),s})()},su=H('<div><header><nav></nav><button class="color-mode-switcher"></button></header><div class="outlet"></div></div>'),uu=()=>{const e=window.matchMedia("(prefers-color-scheme: light)").matches,[t,n]=ee(e);window.matchMedia("(prefers-color-scheme: light)").addEventListener("change",i=>{document.documentElement.removeAttribute("class"),n(i.matches)});const r=()=>{const i=t()?"dark-mode":"light-mode";document.documentElement.classList.contains(i)?document.documentElement.classList.remove(i):document.documentElement.classList.add(i)};return(()=>{const i=su.cloneNode(!0),o=i.firstChild,a=o.firstChild,s=a.nextSibling,u=o.nextSibling;return B(a,I(we,{href:"/",children:"Home"}),null),B(a,I(we,{href:"/settings",children:"Settings"}),null),s.$$click=r,B(s,()=>t()?"Dark mode":"Light mode"),B(u,I(Yo,{get children(){return[I(Ie,{path:"/",element:Cs}),I(Ie,{path:"/settings",element:Xs}),I(Ie,{path:"/deck/:id",element:Ms}),I(Ie,{path:"/deck/:id/add-word",element:Ws}),I(Ie,{path:"/deck/:id/study",element:iu}),I(Ie,{path:"/edit-word/:id",element:au}),I(Ie,{path:"/create-deck",element:Ds})]}})),i})()};wt(["click"]);co(()=>I(zo,{get base(){return"/vocab-trainer/"},get children(){return I(uu,{})}}),document.getElementById("root"));
