(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const be={},ki=(e,t)=>e===t,Mn=Symbol("solid-proxy"),Pi=Symbol("solid-track"),Ot={equals:ki};let Ti=Ir;const Be=1,It=2,kr={owned:null,cleanups:null,context:null,owner:null};var M=null;let Pe=null,j=null,X=null,Te=null,Fn=0;function et(e,t){const n=j,r=M,i=e.length===0,o=i?kr:{owned:null,cleanups:null,context:null,owner:t||r},a=i?e:()=>e(()=>ue(()=>jn(o)));M=o,j=null;try{return Me(a,!0)}finally{j=n,M=r}}function Ke(e,t){t=t?Object.assign({},Ot,t):Ot;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),Rr(n,i));return[Kr.bind(n),r]}function _e(e,t,n){const r=Dr(e,t,!1,Be);zt(r)}function W(e,t,n){n=n?Object.assign({},Ot,n):Ot;const r=Dr(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,zt(r),Kr.bind(r)}function ue(e){const t=j;j=null;try{return e()}finally{j=t}}function Pr(e,t,n){const r=Array.isArray(e);let i,o=n&&n.defer;return a=>{let u;if(r){u=Array(e.length);for(let l=0;l<e.length;l++)u[l]=e[l]()}else u=e();if(o){o=!1;return}const s=ue(()=>t(u,i,a));return i=u,s}}function Ht(e){return M===null||(M.cleanups===null?M.cleanups=[e]:M.cleanups.push(e)),e}function Ki(){return M}function Ri(e,t){const n=M;M=e;try{return Me(t,!0)}finally{M=n}}function Di(e){const t=j,n=M;return Promise.resolve().then(()=>{j=t,M=n;let r;return Me(e,!1),j=M=null,r?r.done:void 0})}function Tr(e,t){const n=Symbol("context");return{id:n,Provider:Mi(n),defaultValue:e}}function Ln(e){let t;return(t=Fr(M,e.id))!==void 0?t:e.defaultValue}function Nn(e){const t=W(e),n=W(()=>ln(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Kr(){const e=Pe;if(this.sources&&(this.state||e))if(this.state===Be||e)zt(this);else{const t=X;X=null,Me(()=>Bt(this),!1),X=t}if(j){const t=this.observers?this.observers.length:0;j.sources?(j.sources.push(this),j.sourceSlots.push(t)):(j.sources=[this],j.sourceSlots=[t]),this.observers?(this.observers.push(j),this.observerSlots.push(j.sources.length-1)):(this.observers=[j],this.observerSlots=[j.sources.length-1])}return this.value}function Rr(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Me(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],a=Pe&&Pe.running;a&&Pe.disposed.has(o),(a&&!o.tState||!a&&!o.state)&&(o.pure?X.push(o):Te.push(o),o.observers&&Br(o)),a||(o.state=Be)}if(X.length>1e6)throw X=[],new Error},!1)),t}function zt(e){if(!e.fn)return;jn(e);const t=M,n=j,r=Fn;j=M=e,Oi(e,e.value,r),j=n,M=t}function Oi(e,t,n){let r;try{r=e.fn(t)}catch(i){e.pure&&(e.state=Be),Mr(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Rr(e,r):e.value=r,e.updatedAt=n)}function Dr(e,t,n,r=Be,i){const o={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:M,context:null,pure:n};return M===null||M!==kr&&(M.owned?M.owned.push(o):M.owned=[o]),o}function Or(e){const t=Pe;if(e.state===0||t)return;if(e.state===It||t)return Bt(e);if(e.suspense&&ue(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Fn);)(e.state||t)&&n.push(e);for(let r=n.length-1;r>=0;r--)if(e=n[r],e.state===Be||t)zt(e);else if(e.state===It||t){const i=X;X=null,Me(()=>Bt(e,n[0]),!1),X=i}}function Me(e,t){if(X)return e();let n=!1;t||(X=[]),Te?n=!0:Te=[],Fn++;try{const r=e();return Ii(n),r}catch(r){X||(Te=null),Mr(r)}}function Ii(e){if(X&&(Ir(X),X=null),e)return;const t=Te;Te=null,t.length&&Me(()=>Ti(t),!1)}function Ir(e){for(let t=0;t<e.length;t++)Or(e[t])}function Bt(e,t){const n=Pe;e.state=0;for(let r=0;r<e.sources.length;r+=1){const i=e.sources[r];i.sources&&(i.state===Be||n?i!==t&&Or(i):(i.state===It||n)&&Bt(i,t))}}function Br(e){const t=Pe;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(!r.state||t)&&(r.state=It,r.pure?X.push(r):Te.push(r),r.observers&&Br(r))}}function jn(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const o=i.pop(),a=n.observerSlots.pop();r<i.length&&(o.sourceSlots[a]=r,i[r]=o,n.observerSlots[r]=a)}}if(e.owned){for(t=0;t<e.owned.length;t++)jn(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Bi(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function Mr(e){throw e=Bi(e),e}function Fr(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:Fr(e.owner,t):void 0}function ln(e){if(typeof e=="function"&&!e.length)return ln(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=ln(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Mi(e,t){return function(r){let i;return _e(()=>i=ue(()=>(M.context={[e]:r.value},Nn(()=>r.children))),void 0),i}}const Fi=Symbol("fallback");function ar(e){for(let t=0;t<e.length;t++)e[t]()}function Li(e,t,n={}){let r=[],i=[],o=[],a=0,u=t.length>1?[]:null;return Ht(()=>ar(o)),()=>{let s=e()||[],l,c;return s[Pi],ue(()=>{let h=s.length,y,d,p,m,_,w,g,b,v;if(h===0)a!==0&&(ar(o),o=[],r=[],i=[],a=0,u&&(u=[])),n.fallback&&(r=[Fi],i[0]=et(x=>(o[0]=x,n.fallback())),a=1);else if(a===0){for(i=new Array(h),c=0;c<h;c++)r[c]=s[c],i[c]=et(f);a=h}else{for(p=new Array(h),m=new Array(h),u&&(_=new Array(h)),w=0,g=Math.min(a,h);w<g&&r[w]===s[w];w++);for(g=a-1,b=h-1;g>=w&&b>=w&&r[g]===s[b];g--,b--)p[b]=i[g],m[b]=o[g],u&&(_[b]=u[g]);for(y=new Map,d=new Array(b+1),c=b;c>=w;c--)v=s[c],l=y.get(v),d[c]=l===void 0?-1:l,y.set(v,c);for(l=w;l<=g;l++)v=r[l],c=y.get(v),c!==void 0&&c!==-1?(p[c]=i[l],m[c]=o[l],u&&(_[c]=u[l]),c=d[c],y.set(v,c)):o[l]();for(c=w;c<h;c++)c in p?(i[c]=p[c],o[c]=m[c],u&&(u[c]=_[c],u[c](c))):i[c]=et(f);i=i.slice(0,a=h),r=s.slice(0)}return i});function f(h){if(o[c]=h,u){const[y,d]=Ke(c);return u[c]=d,t(s[c],y)}return t(s[c])}}}function z(e,t){return ue(()=>e(t||{}))}function wt(){return!0}const Lr={get(e,t,n){return t===Mn?n:e.get(t)},has(e,t){return e.has(t)},set:wt,deleteProperty:wt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:wt,deleteProperty:wt}},ownKeys(e){return e.keys()}};function Zt(e){return(e=typeof e=="function"?e():e)?e:{}}function cn(...e){if(e.some(n=>n&&(Mn in n||typeof n=="function")))return new Proxy({get(n){for(let r=e.length-1;r>=0;r--){const i=Zt(e[r])[n];if(i!==void 0)return i}},has(n){for(let r=e.length-1;r>=0;r--)if(n in Zt(e[r]))return!0;return!1},keys(){const n=[];for(let r=0;r<e.length;r++)n.push(...Object.keys(Zt(e[r])));return[...new Set(n)]}},Lr);const t={};for(let n=e.length-1;n>=0;n--)if(e[n]){const r=Object.getOwnPropertyDescriptors(e[n]);for(const i in r)i in t||Object.defineProperty(t,i,{enumerable:!0,get(){for(let o=e.length-1;o>=0;o--){const a=(e[o]||{})[i];if(a!==void 0)return a}}})}return t}function Ni(e,...t){const n=new Set(t.flat()),r=Object.getOwnPropertyDescriptors(e),i=Mn in e;i||t.push(Object.keys(r).filter(a=>!n.has(a)));const o=t.map(a=>{const u={};for(let s=0;s<a.length;s++){const l=a[s];!i&&!(l in e)||Object.defineProperty(u,l,r[l]?r[l]:{get(){return e[l]},set(){return!0},enumerable:!0})}return u});return i&&o.push(new Proxy({get(a){return n.has(a)?void 0:e[a]},has(a){return n.has(a)?!1:a in e},keys(){return Object.keys(e).filter(a=>!n.has(a))}},Lr)),o}function ji(e){const t="fallback"in e&&{fallback:()=>e.fallback};return W(Li(()=>e.each,e.children,t||void 0))}function Nr(e){let t=!1;const n=e.keyed,r=W(()=>e.when,void 0,{equals:(i,o)=>t?i===o:!i==!o});return W(()=>{const i=r();if(i){const o=e.children,a=typeof o=="function"&&o.length>0;return t=n||a,a?ue(()=>o(i)):o}return e.fallback})}const $i=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Vi=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...$i]),Ui=new Set(["innerHTML","textContent","innerText","children"]),Wi=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),ur=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),Hi=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),zi={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function Yi(e,t,n){let r=n.length,i=t.length,o=r,a=0,u=0,s=t[i-1].nextSibling,l=null;for(;a<i||u<o;){if(t[a]===n[u]){a++,u++;continue}for(;t[i-1]===n[o-1];)i--,o--;if(i===a){const c=o<r?u?n[u-1].nextSibling:n[o-u]:s;for(;u<o;)e.insertBefore(n[u++],c)}else if(o===u)for(;a<i;)(!l||!l.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[o-1]&&n[u]===t[i-1]){const c=t[--i].nextSibling;e.insertBefore(n[u++],t[a++].nextSibling),e.insertBefore(n[--o],c),t[i]=n[o]}else{if(!l){l=new Map;let f=u;for(;f<o;)l.set(n[f],f++)}const c=l.get(t[a]);if(c!=null)if(u<c&&c<o){let f=a,h=1,y;for(;++f<i&&f<o&&!((y=l.get(t[f]))==null||y!==c+h);)h++;if(h>c-u){const d=t[a];for(;u<c;)e.insertBefore(n[u++],d)}else e.replaceChild(n[u++],t[a++])}else a++;else t[a++].remove()}}}const sr="_$DX_DELEGATE";function qi(e,t,n,r={}){let i;return et(o=>{i=o,t===document?e():Ce(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function ze(e,t,n){const r=document.createElement("template");r.innerHTML=e;let i=r.content.firstChild;return n&&(i=i.firstChild),i}function $n(e,t=window.document){const n=t[sr]||(t[sr]=new Set);for(let r=0,i=e.length;r<i;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,io))}}function jr(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Xi(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function Qi(e,t){t==null?e.removeAttribute("class"):e.className=t}function Gi(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=o=>i.call(e,n[1],o))}else e.addEventListener(t,n)}function Ji(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let o,a;for(o=0,a=i.length;o<a;o++){const u=i[o];!u||u==="undefined"||t[u]||(lr(e,u,!1),delete n[u])}for(o=0,a=r.length;o<a;o++){const u=r[o],s=!!t[u];!u||u==="undefined"||n[u]===s||!s||(lr(e,u,!0),n[u]=s)}return n}function Zi(e,t,n){if(!t)return n?jr(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,o;for(o in n)t[o]==null&&r.removeProperty(o),delete n[o];for(o in t)i=t[o],i!==n[o]&&(r.setProperty(o,i),n[o]=i);return n}function eo(e,t={},n,r){const i={};return r||_e(()=>i.children=We(e,t.children,i.children)),_e(()=>t.ref&&t.ref(e)),_e(()=>no(e,t,n,!0,i,!0)),i}function to(e,t,n){return ue(()=>e(t,n))}function Ce(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return We(e,t,r,n);_e(i=>We(e,t(),i,n),r)}function no(e,t,n,r,i={},o=!1){t||(t={});for(const a in i)if(!(a in t)){if(a==="children")continue;i[a]=cr(e,a,null,i[a],n,o)}for(const a in t){if(a==="children"){r||We(e,t.children);continue}const u=t[a];i[a]=cr(e,a,u,i[a],n,o)}}function ro(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function lr(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,o=r.length;i<o;i++)e.classList.toggle(r[i],n)}function cr(e,t,n,r,i,o){let a,u,s;if(t==="style")return Zi(e,n,r);if(t==="classList")return Ji(e,n,r);if(n===r)return r;if(t==="ref")o||n(e);else if(t.slice(0,3)==="on:"){const l=t.slice(3);r&&e.removeEventListener(l,r),n&&e.addEventListener(l,n)}else if(t.slice(0,10)==="oncapture:"){const l=t.slice(10);r&&e.removeEventListener(l,r,!0),n&&e.addEventListener(l,n,!0)}else if(t.slice(0,2)==="on"){const l=t.slice(2).toLowerCase(),c=Hi.has(l);if(!c&&r){const f=Array.isArray(r)?r[0]:r;e.removeEventListener(l,f)}(c||n)&&(Gi(e,l,n,c),c&&$n([l]))}else if((s=Ui.has(t))||!i&&(ur[t]||(u=Vi.has(t)))||(a=e.nodeName.includes("-")))t==="class"||t==="className"?Qi(e,n):a&&!u&&!s?e[ro(t)]=n:e[ur[t]||t]=n;else{const l=i&&t.indexOf(":")>-1&&zi[t.split(":")[0]];l?Xi(e,l,t,n):jr(e,Wi[t]||t,n)}return n}function io(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),be.registry&&!be.done&&(be.done=!0,document.querySelectorAll("[id^=pl-]").forEach(r=>r.remove()));n!==null;){const r=n[t];if(r&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?r.call(n,i,e):r.call(n,e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function We(e,t,n,r,i){for(be.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(be.context)return n;if(o==="number"&&(t=t.toString()),a){let u=n[0];u&&u.nodeType===3?u.data=t:u=document.createTextNode(t),n=Le(e,n,r,u)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean"){if(be.context)return n;n=Le(e,n,r)}else{if(o==="function")return _e(()=>{let u=t();for(;typeof u=="function";)u=u();n=We(e,u,n,r)}),()=>n;if(Array.isArray(t)){const u=[],s=n&&Array.isArray(n);if(fn(u,t,n,i))return _e(()=>n=We(e,u,n,r,!0)),()=>n;if(be.context){if(!u.length)return n;for(let l=0;l<u.length;l++)if(u[l].parentNode)return n=u}if(u.length===0){if(n=Le(e,n,r),a)return n}else s?n.length===0?fr(e,u,r):Yi(e,n,u):(n&&Le(e),fr(e,u));n=u}else if(t instanceof Node){if(be.context&&t.parentNode)return n=a?[t]:t;if(Array.isArray(n)){if(a)return n=Le(e,n,r,t);Le(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function fn(e,t,n,r){let i=!1;for(let o=0,a=t.length;o<a;o++){let u=t[o],s=n&&n[o];if(u instanceof Node)e.push(u);else if(!(u==null||u===!0||u===!1))if(Array.isArray(u))i=fn(e,u,s)||i;else if(typeof u=="function")if(r){for(;typeof u=="function";)u=u();i=fn(e,Array.isArray(u)?u:[u],Array.isArray(s)?s:[s])||i}else e.push(u),i=!0;else{const l=String(u);s&&s.nodeType===3&&s.data===l?e.push(s):e.push(document.createTextNode(l))}}return i}function fr(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function Le(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let o=!1;for(let a=t.length-1;a>=0;a--){const u=t[a];if(i!==u){const s=u.parentNode===e;!o&&!a?s?e.replaceChild(i,u):e.insertBefore(i,n):s&&u.remove()}else o=!0}}else e.insertBefore(i,n);return[i]}const oo=!1;function ao(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function uo([e,t],n,r){return[n?()=>n(e()):e,r?i=>t(r(i)):t]}function so(e){try{return document.querySelector(e)}catch{return null}}function lo(e,t){const n=so(`#${e}`);n?n.scrollIntoView():t&&window.scrollTo(0,0)}function co(e,t,n,r){let i=!1;const o=u=>typeof u=="string"?{value:u}:u,a=uo(Ke(o(e()),{equals:(u,s)=>u.value===s.value}),void 0,u=>(!i&&t(u),u));return n&&Ht(n((u=e())=>{i=!0,a[1](o(u)),i=!1})),{signal:a,utils:r}}function fo(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:Ke({value:""})};return e}function ho(){return co(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:e,replace:t,scroll:n,state:r})=>{t?window.history.replaceState(r,"",e):window.history.pushState(r,"",e),lo(window.location.hash.slice(1),n)},e=>ao(window,"popstate",()=>e()),{go:e=>window.history.go(e)})}const po=/^(?:[a-z0-9]+:)?\/\//i,vo=/^\/+|\/+$/g;function tt(e,t=!1){const n=e.replace(vo,"");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function Ct(e,t,n){if(po.test(t))return;const r=tt(e),i=n&&tt(n);let o="";return!i||t.startsWith("/")?o=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?o=r+i:o=i,(o||"/")+tt(t,!o)}function yo(e,t){if(e==null)throw new Error(t);return e}function $r(e,t){return tt(e).replace(/\/*(\*.*)?$/g,"")+tt(t)}function mo(e){const t={};return e.searchParams.forEach((n,r)=>{t[r]=n}),t}function Ve(e,t){return decodeURIComponent(t?e.replace(/\+/g," "):e)}function go(e,t){const[n,r]=e.split("/*",2),i=n.split("/").filter(Boolean),o=i.length;return a=>{const u=a.split("/").filter(Boolean),s=u.length-o;if(s<0||s>0&&r===void 0&&!t)return null;const l={path:o?"":"/",params:{}};for(let c=0;c<o;c++){const f=i[c],h=u[c];if(f[0]===":")l.params[f.slice(1)]=h;else if(f.localeCompare(h,void 0,{sensitivity:"base"})!==0)return null;l.path+=`/${h}`}return r&&(l.params[r]=s?u.slice(-s).join("/"):""),l}}function bo(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,o)=>i+(o.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Vr(e){const t=new Map,n=Ki();return new Proxy({},{get(r,i){return t.has(i)||Ri(n,()=>t.set(i,W(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function Ur(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return Ur(r).reduce((o,a)=>[...o,...i.map(u=>u+a)],[])}const wo=100,Wr=Tr(),Yt=Tr(),qt=()=>yo(Ln(Wr),"Make sure your app is wrapped in a <Router />");let ot;const Vn=()=>ot||Ln(Yt)||qt().base,_o=e=>{const t=Vn();return W(()=>t.resolvePath(e()))},xo=e=>{const t=qt();return W(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},Eo=()=>qt().location;function Ao(e,t="",n){const{component:r,data:i,children:o}=e,a=!o||Array.isArray(o)&&!o.length,u={key:e,element:r?()=>z(r,{}):()=>{const{element:s}=e;return s===void 0&&n?z(n,{}):s},preload:e.component?r.preload:e.preload,data:i};return Hr(e.path).reduce((s,l)=>{for(const c of Ur(l)){const f=$r(t,c),h=a?f:f.split("/*",1)[0];s.push({...u,originalPath:c,pattern:h,matcher:go(h,!a)})}return s},[])}function So(e,t=0){return{routes:e,score:bo(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const o=e[i],a=o.matcher(n);if(!a)return null;r.unshift({...a,route:o})}return r}}}function Hr(e){return Array.isArray(e)?e:[e]}function zr(e,t="",n,r=[],i=[]){const o=Hr(e);for(let a=0,u=o.length;a<u;a++){const s=o[a];if(s&&typeof s=="object"&&s.hasOwnProperty("path")){const l=Ao(s,t,n);for(const c of l){if(r.push(c),s.children)zr(s.children,c.pattern,n,r,i);else{const f=So([...r],i.length);i.push(f)}r.pop()}}}return r.length?i:i.sort((a,u)=>u.score-a.score)}function Co(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}function ko(e,t){const n=new URL("http://sar"),r=W(s=>{const l=e();try{return new URL(l,n)}catch{return console.error(`Invalid path ${l}`),s}},n,{equals:(s,l)=>s.href===l.href}),i=W(()=>Ve(r().pathname)),o=W(()=>Ve(r().search,!0)),a=W(()=>Ve(r().hash)),u=W(()=>"");return{get pathname(){return i()},get search(){return o()},get hash(){return a()},get state(){return t()},get key(){return u()},query:Vr(Pr(o,()=>mo(r())))}}function Po(e,t="",n,r){const{signal:[i,o],utils:a={}}=fo(e),u=a.parsePath||(E=>E),s=a.renderPath||(E=>E),l=Ct("",t),c=void 0;if(l===void 0)throw new Error(`${l} is not a valid base path`);l&&!i().value&&o({value:l,replace:!0,scroll:!1});const[f,h]=Ke(!1),y=async E=>{h(!0);try{await Di(E)}finally{h(!1)}},[d,p]=Ke(i().value),[m,_]=Ke(i().state),w=ko(d,m),g=[],b={pattern:l,params:{},path:()=>l,outlet:()=>null,resolvePath(E){return Ct(l,E)}};if(n)try{ot=b,b.data=n({data:void 0,params:{},location:w,navigate:x(b)})}finally{ot=void 0}function v(E,S,R){ue(()=>{if(typeof S=="number"){S&&(a.go?a.go(S):console.warn("Router integration does not support relative routing"));return}const{replace:I,resolve:D,scroll:N,state:T}={replace:!1,resolve:!0,scroll:!0,...R},V=D?E.resolvePath(S):Ct("",S);if(V===void 0)throw new Error(`Path '${S}' is not a routable path`);if(g.length>=wo)throw new Error("Too many redirects");const H=d();if((V!==H||T!==m())&&!oo){const J=g.push({value:H,replace:I,scroll:N,state:m()});y(()=>{p(V),_(T)}).then(()=>{g.length===J&&k({value:V,state:T})})}})}function x(E){return E=E||Ln(Yt)||b,(S,R)=>v(E,S,R)}function k(E){const S=g[0];S&&((E.value!==S.value||E.state!==S.state)&&o({...E,replace:S.replace,scroll:S.scroll}),g.length=0)}_e(()=>{const{value:E,state:S}=i();ue(()=>{E!==d()&&y(()=>{p(E),_(S)})})});{let E=function(S){if(S.defaultPrevented||S.button!==0||S.metaKey||S.altKey||S.ctrlKey||S.shiftKey)return;const R=S.composedPath().find(J=>J instanceof Node&&J.nodeName.toUpperCase()==="A");if(!R||!R.hasAttribute("link"))return;const I=R.href;if(R.target||!I&&!R.hasAttribute("state"))return;const D=(R.getAttribute("rel")||"").split(/\s+/);if(R.hasAttribute("download")||D&&D.includes("external"))return;const N=new URL(I),T=Ve(N.pathname);if(N.origin!==window.location.origin||l&&T&&!T.toLowerCase().startsWith(l.toLowerCase()))return;const V=u(T+Ve(N.search,!0)+Ve(N.hash)),H=R.getAttribute("state");S.preventDefault(),v(b,V,{resolve:!1,replace:R.hasAttribute("replace"),scroll:!R.hasAttribute("noscroll"),state:H&&JSON.parse(H)})};var A=E;$n(["click"]),document.addEventListener("click",E),Ht(()=>document.removeEventListener("click",E))}return{base:b,out:c,location:w,isRouting:f,renderPath:s,parsePath:u,navigatorFactory:x}}function To(e,t,n,r){const{base:i,location:o,navigatorFactory:a}=e,{pattern:u,element:s,preload:l,data:c}=r().route,f=W(()=>r().path),h=Vr(()=>r().params);l&&l();const y={parent:t,pattern:u,get child(){return n()},path:f,params:h,data:t.data,outlet:s,resolvePath(d){return Ct(i.path(),d,f())}};if(c)try{ot=y,y.data=c({data:t.data,params:h,location:o,navigate:a(y)})}finally{ot=void 0}return y}const Ko=ze("<a link></a>"),Ro=e=>{const{source:t,url:n,base:r,data:i,out:o}=e,a=t||ho(),u=Po(a,r,i);return z(Wr.Provider,{value:u,get children(){return e.children}})},Do=e=>{const t=qt(),n=Vn(),r=Nn(()=>e.children),i=W(()=>zr(r(),$r(n.pattern,e.base||""),Oo)),o=W(()=>Co(i(),t.location.pathname));t.out&&t.out.matches.push(o().map(({route:l,path:c,params:f})=>({originalPath:l.originalPath,pattern:l.pattern,path:c,params:f})));const a=[];let u;const s=W(Pr(o,(l,c,f)=>{let h=c&&l.length===c.length;const y=[];for(let d=0,p=l.length;d<p;d++){const m=c&&c[d],_=l[d];f&&m&&_.route.key===m.route.key?y[d]=f[d]:(h=!1,a[d]&&a[d](),et(w=>{a[d]=w,y[d]=To(t,y[d-1]||n,()=>s()[d+1],()=>o()[d])}))}return a.splice(l.length).forEach(d=>d()),f&&h?f:(u=y[0],y)}));return z(Nr,{get when(){return s()&&u},children:l=>z(Yt.Provider,{value:l,get children(){return l.outlet()}})})},en=e=>{const t=Nn(()=>e.children);return cn(e,{get children(){return t()}})},Oo=()=>{const e=Vn();return z(Nr,{get when(){return e.child},children:t=>z(Yt.Provider,{value:t,get children(){return t.outlet()}})})};function hr(e){e=cn({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=Ni(e,["href","state","activeClass","inactiveClass","end"]),n=_o(()=>e.href),r=xo(n),i=Eo(),o=W(()=>{const a=n();if(a===void 0)return!1;const u=a.split(/[?#]/,1)[0].toLowerCase(),s=i.pathname.toLowerCase();return e.end?u===s:s.startsWith(u)});return(()=>{const a=Ko.cloneNode(!0);return eo(a,cn(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{[e.inactiveClass]:!o(),[e.activeClass]:o(),...t.classList}},get["aria-current"](){return o()?"page":void 0}}),!1,!1),a})()}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var O=function(){return O=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},O.apply(this,arguments)};function hn(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var F=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$=Object.keys,q=Array.isArray;typeof Promise<"u"&&!F.Promise&&(F.Promise=Promise);function G(e,t){return typeof t!="object"||$(t).forEach(function(n){e[n]=t[n]}),e}var at=Object.getPrototypeOf,Io={}.hasOwnProperty;function ee(e,t){return Io.call(e,t)}function He(e,t){typeof t=="function"&&(t=t(at(e))),(typeof Reflect>"u"?$:Reflect.ownKeys)(t).forEach(function(n){pe(e,n,t[n])})}var Yr=Object.defineProperty;function pe(e,t,n,r){Yr(e,t,G(n&&ee(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Ye(e){return{from:function(t){return e.prototype=Object.create(t.prototype),pe(e.prototype,"constructor",e),{extend:He.bind(null,e.prototype)}}}}var Bo=Object.getOwnPropertyDescriptor;function Un(e,t){var n=Bo(e,t),r;return n||(r=at(e))&&Un(r,t)}var Mo=[].slice;function Xt(e,t,n){return Mo.call(e,t,n)}function qr(e,t){return t(e)}function Je(e){if(!e)throw new Error("Assertion Failed")}function Xr(e){F.setImmediate?setImmediate(e):setTimeout(e,0)}function Qr(e,t){return e.reduce(function(n,r,i){var o=t(r,i);return o&&(n[o[0]]=o[1]),n},{})}function Fo(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function de(e,t){if(ee(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var o=de(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(a!==-1){var u=e[t.substr(0,a)];return u===void 0?void 0:de(u,t.substr(a+1))}}function re(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Je(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)re(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var a=t.substr(0,o),u=t.substr(o+1);if(u==="")n===void 0?q(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var s=e[a];(!s||!ee(e,a))&&(s=e[a]={}),re(s,u,n)}}else n===void 0?q(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Lo(e,t){typeof t=="string"?re(e,t,void 0):"length"in t&&[].map.call(t,function(n){re(e,n,void 0)})}function Gr(e){var t={};for(var n in e)ee(e,n)&&(t[n]=e[n]);return t}var No=[].concat;function Jr(e){return No.apply([],e)}var Zr="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Jr([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return F[e]}),jo=Zr.map(function(e){return F[e]});Qr(Zr,function(e){return[e,!0]});var ge=null;function dt(e){ge=typeof WeakMap<"u"&&new WeakMap;var t=dn(e);return ge=null,t}function dn(e){if(!e||typeof e!="object")return e;var t=ge&&ge.get(e);if(t)return t;if(q(e)){t=[],ge&&ge.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(dn(e[n]))}else if(jo.indexOf(e.constructor)>=0)t=e;else{var i=at(e);t=i===Object.prototype?{}:Object.create(i),ge&&ge.set(e,t);for(var o in e)ee(e,o)&&(t[o]=dn(e[o]))}return t}var $o={}.toString;function pn(e){return $o.call(e).slice(8,-1)}var vn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Vo=typeof vn=="symbol"?function(e){var t;return e!=null&&(t=e[vn])&&t.apply(e)}:function(){return null},$e={};function fe(e){var t,n,r,i;if(arguments.length===1){if(q(e))return e.slice();if(this===$e&&typeof e=="string")return[e];if(i=Vo(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Wn=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},se=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ei(e,t){se=e,ti=t}var ti=function(){return!0},Uo=!new Error("").stack;function Fe(){if(Uo)try{throw Fe.arguments,new Error}catch(e){return e}return new Error}function yn(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(ti).map(function(r){return`
`+r}).join("")):""}var Wo=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],ni=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Hn=Wo.concat(ni),Ho={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function qe(e,t){this._e=Fe(),this.name=e,this.message=t}Ye(qe).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+yn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function ri(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Mt(e,t,n,r){this._e=Fe(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=ri(e,t)}Ye(Mt).from(qe);function nt(e,t){this._e=Fe(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=ri(e,t)}Ye(nt).from(qe);var zn=Hn.reduce(function(e,t){return e[t]=t+"Error",e},{}),zo=qe,K=Hn.reduce(function(e,t){var n=t+"Error";function r(i,o){this._e=Fe(),this.name=n,i?typeof i=="string"?(this.message=""+i+(o?`
 `+o:""),this.inner=o||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=Ho[t]||n,this.inner=null)}return Ye(r).from(zo),e[t]=r,e},{});K.Syntax=SyntaxError;K.Type=TypeError;K.Range=RangeError;var dr=ni.reduce(function(e,t){return e[t+"Error"]=K[t],e},{});function Yo(e,t){if(!e||e instanceof qe||e instanceof TypeError||e instanceof SyntaxError||!e.name||!dr[e.name])return e;var n=new dr[e.name](t||e.message,e);return"stack"in e&&pe(n,"stack",{get:function(){return this.inner.stack}}),n}var Qt=Hn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=K[t]),e},{});Qt.ModifyError=Mt;Qt.DexieError=qe;Qt.BulkError=nt;function B(){}function pt(e){return e}function qo(e,t){return e==null||e===pt?t:function(n){return t(e(n))}}function Oe(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Xo(e,t){return e===B?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Oe(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Oe(i,this.onerror):i),o!==void 0?o:n}}function Qo(e,t){return e===B?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Oe(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Oe(r,this.onerror):r)}}function Go(e,t){return e===B?t:function(n){var r=e.apply(this,arguments);G(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Oe(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Oe(o,this.onerror):o),r===void 0?a===void 0?void 0:a:G(r,a)}}function Jo(e,t){return e===B?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Yn(e,t){return e===B?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}var ut={},Zo=100,ea=20,ii=100,qn=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,at(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,at(t),e]}(),mn=qn[0],Ft=qn[1],gn=qn[2],oi=Ft&&Ft.then,kt=mn&&mn.constructor,Xn=!!gn,bn=!1,ta=gn?function(){gn.then(_t)}:F.setImmediate?setImmediate.bind(null,_t):F.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){_t(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(_t,0)},st=function(e,t){Ze.push([e,t]),Lt&&(ta(),Lt=!1)},wn=!0,Lt=!0,Re=[],Pt=[],_n=null,xn=pt,Ue={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:yr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{yr(e[0],e[1])}catch{}})}},P=Ue,Ze=[],De=0,Tt=[];function C(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=B,this._lib=!1;var t=this._PSD=P;if(se&&(this._stackHolder=Fe(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==ut)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&An(this,this._value);return}this._state=null,this._value=null,++t.ref,ui(this,e)}var En={get:function(){var e=P,t=Nt;function n(r,i){var o=this,a=!e.global&&(e!==P||t!==Nt),u=a&&!ve(),s=new C(function(l,c){Qn(o,new ai($t(r,e,a,u),$t(i,e,a,u),l,c,e))});return se&&ci(s,this),s}return n.prototype=ut,n},set:function(e){pe(this,"then",e&&e.prototype===ut?En:{get:function(){return e},set:En.set})}};He(C.prototype,{then:En,_then:function(e,t){Qn(this,new ai(null,null,e,t,P))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Kt(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Kt(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Kt(t)})},stack:{get:function(){if(this._stack)return this._stack;try{bn=!0;var e=li(this,[],ea),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{bn=!1}}},timeout:function(e,t){var n=this;return e<1/0?new C(function(r,i){var o=setTimeout(function(){return i(new K.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&pe(C.prototype,Symbol.toStringTag,"Dexie.Promise");Ue.env=fi();function ai(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}He(C,{all:function(){var e=fe.apply(null,arguments).map(jt);return new C(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,o){return C.resolve(i).then(function(a){e[o]=a,--r||t(e)},n)})})},resolve:function(e){if(e instanceof C)return e;if(e&&typeof e.then=="function")return new C(function(n,r){e.then(n,r)});var t=new C(ut,!0,e);return ci(t,_n),t},reject:Kt,race:function(){var e=fe.apply(null,arguments).map(jt);return new C(function(t,n){e.map(function(r){return C.resolve(r).then(t,n)})})},PSD:{get:function(){return P},set:function(e){return P=e}},totalEchoes:{get:function(){return Nt}},newPSD:xe,usePSD:Qe,scheduler:{get:function(){return st},set:function(e){st=e}},rejectionMapper:{get:function(){return xn},set:function(e){xn=e}},follow:function(e,t){return new C(function(n,r){return xe(function(i,o){var a=P;a.unhandleds=[],a.onunhandled=o,a.finalize=Oe(function(){var u=this;ra(function(){u.unhandleds.length===0?i():o(u.unhandleds[0])})},a.finalize),e()},t,n,r)})}});kt&&(kt.allSettled&&pe(C,"allSettled",function(){var e=fe.apply(null,arguments).map(jt);return new C(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,o){return C.resolve(i).then(function(a){return r[o]={status:"fulfilled",value:a}},function(a){return r[o]={status:"rejected",reason:a}}).then(function(){return--n||t(r)})})})}),kt.any&&typeof AggregateError<"u"&&pe(C,"any",function(){var e=fe.apply(null,arguments).map(jt);return new C(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(o,a){return C.resolve(o).then(function(u){return t(u)},function(u){i[a]=u,--r||n(new AggregateError(i))})})})}));function ui(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&vt();n&&typeof n.then=="function"?ui(e,function(i,o){n instanceof C?n._then(i,o):n.then(i,o)}):(e._state=!0,e._value=n,si(e)),r&&yt()}},An.bind(null,e))}catch(n){An(e,n)}}function An(e,t){if(Pt.push(t),e._state===null){var n=e._lib&&vt();t=xn(t),e._state=!1,e._value=t,se&&t!==null&&typeof t=="object"&&!t._promise&&Fo(function(){var r=Un(t,"stack");t._promise=e,pe(t,"stack",{get:function(){return bn?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),ia(e),si(e),n&&yt()}}function si(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Qn(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),De===0&&(++De,st(function(){--De===0&&Gn()},[]))}function Qn(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++De,st(na,[n,e,t])}function na(e,t,n){try{_n=t;var r,i=t._value;t._state?r=e(i):(Pt.length&&(Pt=[]),r=e(i),Pt.indexOf(i)===-1&&oa(t)),n.resolve(r)}catch(o){n.reject(o)}finally{_n=null,--De===0&&Gn(),--n.psd.ref||n.psd.finalize()}}function li(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,o,a;i!=null?(o=i.name||"Error",a=i.message||i,r=yn(i,0)):(o=i,a=""),t.push(o+(a?": "+a:"")+r)}return se&&(r=yn(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&li(e._prev,t,n)),t}function ci(e,t){var n=t?t._numPrev+1:0;n<Zo&&(e._prev=t,e._numPrev=n)}function _t(){vt()&&yt()}function vt(){var e=wn;return wn=!1,Lt=!1,e}function yt(){var e,t,n;do for(;Ze.length>0;)for(e=Ze,Ze=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Ze.length>0);wn=!0,Lt=!0}function Gn(){var e=Re;Re=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Tt.slice(0),n=t.length;n;)t[--n]()}function ra(e){function t(){e(),Tt.splice(Tt.indexOf(t),1)}Tt.push(t),++De,st(function(){--De===0&&Gn()},[])}function ia(e){Re.some(function(t){return t._value===e._value})||Re.push(e)}function oa(e){for(var t=Re.length;t;)if(Re[--t]._value===e._value){Re.splice(t,1);return}}function Kt(e){return new C(ut,!1,e)}function L(e,t){var n=P;return function(){var r=vt(),i=P;try{return Ee(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{Ee(i,!1),r&&yt()}}}var Y={awaits:0,echoes:0,id:0},aa=0,Rt=[],tn=0,Nt=0,ua=0;function xe(e,t,n,r){var i=P,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++ua;var a=Ue.env;o.env=Xn?{Promise:C,PromiseProp:{value:C,configurable:!0,writable:!0},all:C.all,race:C.race,allSettled:C.allSettled,any:C.any,resolve:C.resolve,reject:C.reject,nthen:pr(a.nthen,o),gthen:pr(a.gthen,o)}:{},t&&G(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=Qe(o,e,n,r);return o.ref===0&&o.finalize(),u}function Xe(){return Y.id||(Y.id=++aa),++Y.awaits,Y.echoes+=ii,Y.id}function ve(){return Y.awaits?(--Y.awaits===0&&(Y.id=0),Y.echoes=Y.awaits*ii,!0):!1}(""+oi).indexOf("[native code]")===-1&&(Xe=ve=B);function jt(e){return Y.echoes&&e&&e.constructor===kt?(Xe(),e.then(function(t){return ve(),t},function(t){return ve(),U(t)})):e}function sa(e){++Nt,(!Y.echoes||--Y.echoes===0)&&(Y.echoes=Y.id=0),Rt.push(P),Ee(e,!0)}function la(){var e=Rt[Rt.length-1];Rt.pop(),Ee(e,!1)}function Ee(e,t){var n=P;if((t?Y.echoes&&(!tn++||e!==P):tn&&(!--tn||e!==P))&&hi(t?sa.bind(null,e):la),e!==P&&(P=e,n===Ue&&(Ue.env=fi()),Xn)){var r=Ue.env.Promise,i=e.env;Ft.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(F,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function fi(){var e=F.Promise;return Xn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(F,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Ft.then,gthen:e.prototype.then}:{}}function Qe(e,t,n,r,i){var o=P;try{return Ee(e,!0),t(n,r,i)}finally{Ee(o,!1)}}function hi(e){oi.call(mn,e)}function $t(e,t,n,r){return typeof e!="function"?e:function(){var i=P;n&&Xe(),Ee(t,!0);try{return e.apply(this,arguments)}finally{Ee(i,!1),r&&hi(ve)}}}function pr(e,t){return function(n,r){return e.call(this,$t(n,t),$t(r,t))}}var vr="unhandledrejection";function yr(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(F.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(vr,!0,!0),G(r,i)):F.CustomEvent&&(r=new CustomEvent(vr,{detail:i}),G(r,i)),r&&F.dispatchEvent&&(dispatchEvent(r),!F.PromiseRejectionEvent&&F.onunhandledrejection))try{F.onunhandledrejection(r)}catch{}se&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var U=C.reject;function Sn(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!P.letThrough&&!e._vip){if(e._state.openComplete)return U(new K.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return U(new K.DatabaseClosed);e.open().catch(B)}return e._state.dbReadyPromise.then(function(){return Sn(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===zn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Sn(e,t,n,r)})):U(o)}return i._promise(t,function(o,a){return xe(function(){return P.trans=i,r(o,a,i)})}).then(function(o){return i._completion.then(function(){return o})})}}var mr="3.2.2",ke=String.fromCharCode(65535),Cn=-1/0,le="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",di="String expected.",rt=[],Gt=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),ca=Gt,fa=Gt,pi=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},Jt="__dbnames",nn="readonly",rn="readwrite";function Ie(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var vi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=dt(t),delete t[e]),t}:function(t){return t}}var ha=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||P.trans,o=this.name;function a(s,l,c){if(!c.schema[o])throw new K.NotFound("Table "+o+" not part of transaction");return n(c.idbtrans,c)}var u=vt();try{return i&&i.db===this.db?i===P.trans?i._promise(t,a,r):xe(function(){return i._promise(t,a,r)},{trans:i,transless:P.transless||P}):Sn(this.db,t,[this.name],a)}finally{u&&yt()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(o){return r.hook.reading.fire(o)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(q(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=$(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(c){return c.compound&&n.every(function(f){return c.keyPath.indexOf(f)>=0})&&c.keyPath.every(function(f){return n.indexOf(f)>=0})})[0];if(r&&this.db._maxKey!==ke)return this.where(r.name).equals(r.keyPath.map(function(c){return t[c]}));!r&&se&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,o=this.db._deps.indexedDB;function a(c,f){try{return o.cmp(c,f)===0}catch{return!1}}var u=n.reduce(function(c,f){var h=c[0],y=c[1],d=i[f],p=t[f];return[h||d,h||!d?Ie(y,d&&d.multi?function(m){var _=de(m,f);return q(_)&&_.some(function(w){return a(p,w)})}:function(m){return a(p,de(m,f))}):y]},[null,null]),s=u[0],l=u[1];return s?this.where(s.name).equals(t[s.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,q(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var o in r)if(ee(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){G(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,u=t;return a&&o&&(u=xt(a)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[u]})}).then(function(s){return s.numFailures?C.reject(s.failures[0]):s.lastResult}).then(function(s){if(a)try{re(t,a,s)}catch{}return s})},e.prototype.update=function(t,n){if(typeof t=="object"&&!q(t)){var r=de(t,this.schema.primKey.keyPath);if(r===void 0)return U(new K.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?$(n).forEach(function(i){re(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,u=t;return a&&o&&(u=xt(a)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[u],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?C.reject(s.failures[0]):s.lastResult}).then(function(s){if(a)try{re(t,a,s)}catch{}return s})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?C.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:vi})}).then(function(n){return n.numFailures?C.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(o){return n.hook.reading.fire(o)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,l=s.auto,c=s.keyPath;if(c&&o)throw new K.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,h=c&&l?t.map(xt(c)):t;return i.core.mutate({trans:u,type:"add",keys:o,values:h,wantResults:a}).then(function(y){var d=y.numFailures,p=y.results,m=y.lastResult,_=y.failures,w=a?p:m;if(d===0)return w;throw new nt(i.name+".bulkAdd(): "+d+" of "+f+" operations failed",_)})})},e.prototype.bulkPut=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,l=s.auto,c=s.keyPath;if(c&&o)throw new K.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,h=c&&l?t.map(xt(c)):t;return i.core.mutate({trans:u,type:"put",keys:o,values:h,wantResults:a}).then(function(y){var d=y.numFailures,p=y.results,m=y.lastResult,_=y.failures,w=a?p:m;if(d===0)return w;throw new nt(i.name+".bulkPut(): "+d+" of "+f+" operations failed",_)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var o=i.numFailures,a=i.lastResult,u=i.failures;if(o===0)return a;throw new nt(n.name+".bulkDelete(): "+o+" of "+r+" operations failed",u)})},e}();function mt(e){var t={},n=function(u,s){if(s){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return t[u].subscribe.apply(null,c),e}else if(typeof u=="string")return t[u]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(u,s,l){if(typeof u=="object")return a(u);s||(s=Jo),l||(l=B);var c={subscribers:[],fire:l,subscribe:function(f){c.subscribers.indexOf(f)===-1&&(c.subscribers.push(f),c.fire=s(c.fire,f))},unsubscribe:function(f){c.subscribers=c.subscribers.filter(function(h){return h!==f}),c.fire=c.subscribers.reduce(s,l)}};return t[u]=n[u]=c,c}function a(u){$(u).forEach(function(s){var l=u[s];if(q(l))o(s,u[s][0],u[s][1]);else if(l==="asap")var c=o(s,pt,function(){for(var h=arguments.length,y=new Array(h);h--;)y[h]=arguments[h];c.subscribers.forEach(function(d){Xr(function(){d.apply(null,y)})})});else throw new K.InvalidArgument("Invalid event config")})}}function gt(e,t){return Ye(t).from({prototype:e}),t}function da(e){return gt(ha.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:mt(null,{creating:[Xo,B],reading:[qo,pt],updating:[Go,B],deleting:[Qo,B]})})}function Ne(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function on(e,t){e.filter=Ie(e.filter,t)}function an(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ie(r(),t())}:t,e.justLimit=n&&!r}function pa(e,t){e.isMatch=Ie(e.isMatch,t)}function Dt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new K.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function gr(e,t,n){var r=Dt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Et(e,t,n,r){var i=e.replayFilter?Ie(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(u,s,l){if(!i||i(s,l,function(h){return s.stop(h)},function(h){return s.fail(h)})){var c=s.primaryKey,f=""+c;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(c)),ee(o,f)||(o[f]=!0,t(u,s,l))}};return Promise.all([e.or._iterate(a,n),br(gr(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}else return br(gr(e,r,n),Ie(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function br(e,t,n,r){var i=r?function(a,u,s){return n(r(a),u,s)}:n,o=L(i);return e.then(function(a){if(a)return a.start(function(){var u=function(){return a.continue()};(!t||t(a,function(s){return u=s},function(s){a.stop(s),u=B},function(s){a.fail(s),u=B}))&&o(a.value,a,function(s){return u=s}),u()})})}function Q(e,t){try{var n=wr(e),r=wr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return ya(_r(e),_r(t));case"Array":return va(e,t)}}catch{}return NaN}function va(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var a=Q(e[o],t[o]);if(a!==0)return a}return n===r?0:n<r?-1:1}function ya(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}function wr(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=pn(e);return n==="ArrayBuffer"?"binary":n}function _r(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var ma=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,U.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,U.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Ie(n.algorithm,t)},e.prototype._iterate=function(t,n){return Et(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&G(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return Et(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,o=i.table.core;if(Ne(i,!0))return o.count({trans:r,query:{index:Dt(i,o.schema),range:i.range}}).then(function(u){return Math.min(u,i.limit)});var a=0;return Et(i,function(){return++a,!1},r,o).then(function(){return a})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],o=r.length-1;function a(l,c){return c?a(l[r[c]],c-1):l[i]}var u=this._ctx.dir==="next"?1:-1;function s(l,c){var f=a(l,o),h=a(c,o);return f<h?-u:f>h?u:0}return this.toArray(function(l){return l.sort(s)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Ne(i,!0)&&i.limit>0){var o=i.valueMapper,a=Dt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:a,range:i.range}}).then(function(s){var l=s.result;return o?l.map(o):l})}else{var u=[];return Et(i,function(s){return u.push(s)},r,i.table.core).then(function(){return u})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,Ne(n)?an(n,function(){var r=t;return function(i,o){return r===0?!0:r===1?(--r,!1):(o(function(){i.advance(r),r=0}),!1)}}):an(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),an(this._ctx,function(){var n=t;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this},e.prototype.until=function(t,n){return on(this._ctx,function(r,i,o){return t(r.value)?(i(o),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return on(this._ctx,function(n){return t(n.value)}),pa(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&Ne(n,!0)&&n.limit>0)return this._read(function(i){var o=Dt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(i){var o=i.result;return o}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return on(this._ctx,function(i){var o=i.primaryKey.toString(),a=ee(r,o);return r[o]=!0,!a}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var o;if(typeof t=="function")o=t;else{var a=$(t),u=a.length;o=function(_){for(var w=!1,g=0;g<u;++g){var b=a[g],v=t[b];de(_,b)!==v&&(re(_,b,v),w=!0)}return w}}var s=r.table.core,l=s.schema.primaryKey,c=l.outbound,f=l.extractKey,h=n.db._options.modifyChunkSize||200,y=[],d=0,p=[],m=function(_,w){var g=w.failures,b=w.numFailures;d+=_-b;for(var v=0,x=$(g);v<x.length;v++){var k=x[v];y.push(g[k])}};return n.clone().primaryKeys().then(function(_){var w=function(g){var b=Math.min(h,_.length-g);return s.getMany({trans:i,keys:_.slice(g,g+b),cache:"immutable"}).then(function(v){for(var x=[],k=[],A=c?[]:null,E=[],S=0;S<b;++S){var R=v[S],I={value:dt(R),primKey:_[g+S]};o.call(I,I.value,I)!==!1&&(I.value==null?E.push(_[g+S]):!c&&Q(f(R),f(I.value))!==0?(E.push(_[g+S]),x.push(I.value)):(k.push(I.value),c&&A.push(_[g+S])))}var D=Ne(r)&&r.limit===1/0&&(typeof t!="function"||t===un)&&{index:r.index,range:r.range};return Promise.resolve(x.length>0&&s.mutate({trans:i,type:"add",values:x}).then(function(N){for(var T in N.failures)E.splice(parseInt(T),1);m(x.length,N)})).then(function(){return(k.length>0||D&&typeof t=="object")&&s.mutate({trans:i,type:"put",keys:A,values:k,criteria:D,changeSpec:typeof t!="function"&&t}).then(function(N){return m(k.length,N)})}).then(function(){return(E.length>0||D&&t===un)&&s.mutate({trans:i,type:"delete",keys:E,criteria:D}).then(function(N){return m(E.length,N)})}).then(function(){return _.length>g+b&&w(g+h)})})};return w(0).then(function(){if(y.length>0)throw new Mt("Error modifying one or more objects",y,d,p);return _.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return Ne(t)&&(t.isPrimKey&&!fa||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,o=n;return t.table.core.count({trans:r,query:{index:i,range:o}}).then(function(a){return t.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(function(u){var s=u.failures;u.lastResult,u.results;var l=u.numFailures;if(l)throw new Mt("Could not delete some values",Object.keys(s).map(function(c){return s[c]}),a-l);return a-l})})}):this.modify(un)},e}(),un=function(e,t){return t.value=null};function ga(e){return gt(ma.prototype,function(n,r){this.db=e;var i=vi,o=null;if(r)try{i=r()}catch(l){o=l}var a=n._ctx,u=a.table,s=u.hook.reading.fire;this._ctx={table:u,index:a.index,isPrimKey:!a.index||u.schema.primKey.keyPath&&a.index===u.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:a.or,valueMapper:s!==pt?s:null}})}function ba(e,t){return e<t?-1:e===t?0:1}function wa(e,t){return e>t?-1:e===t?0:1}function Z(e,t,n){var r=e instanceof mi?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function je(e){return new e.Collection(e,function(){return yi("")}).limit(0)}function _a(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function xa(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function Ea(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),u=-1,s=0;s<a;++s){var l=t[s];if(l!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;i(e[s],l)<0&&(u=s)}return a<r.length&&o==="next"?e+n.substr(e.length):a<e.length&&o==="prev"?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function At(e,t,n,r){var i,o,a,u,s,l,c,f=n.length;if(!n.every(function(p){return typeof p=="string"}))return Z(e,di);function h(p){i=_a(p),o=xa(p),a=p==="next"?ba:wa;var m=n.map(function(_){return{lower:o(_),upper:i(_)}}).sort(function(_,w){return a(_.lower,w.lower)});u=m.map(function(_){return _.upper}),s=m.map(function(_){return _.lower}),l=p,c=p==="next"?"":r}h("next");var y=new e.Collection(e,function(){return me(u[0],s[f-1]+r)});y._ondirectionchange=function(p){h(p)};var d=0;return y._addAlgorithm(function(p,m,_){var w=p.key;if(typeof w!="string")return!1;var g=o(w);if(t(g,s,d))return!0;for(var b=null,v=d;v<f;++v){var x=Ea(w,g,u[v],s[v],a,l);x===null&&b===null?d=v+1:(b===null||a(b,x)>0)&&(b=x)}return m(b!==null?function(){p.continue(b+c)}:_),!1}),y}function me(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function yi(e){return{type:1,lower:e,upper:e}}var mi=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?je(this):new this.Collection(this,function(){return me(t,n,!r,!i)})}catch{return Z(this,le)}},e.prototype.equals=function(t){return t==null?Z(this,le):new this.Collection(this,function(){return yi(t)})},e.prototype.above=function(t){return t==null?Z(this,le):new this.Collection(this,function(){return me(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?Z(this,le):new this.Collection(this,function(){return me(t,void 0,!1)})},e.prototype.below=function(t){return t==null?Z(this,le):new this.Collection(this,function(){return me(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?Z(this,le):new this.Collection(this,function(){return me(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?Z(this,di):this.between(t,t+ke,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):At(this,function(n,r){return n.indexOf(r[0])===0},[t],ke)},e.prototype.equalsIgnoreCase=function(t){return At(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=fe.apply($e,arguments);return t.length===0?je(this):At(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=fe.apply($e,arguments);return t.length===0?je(this):At(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,ke)},e.prototype.anyOf=function(){var t=this,n=fe.apply($e,arguments),r=this._cmp;try{n.sort(r)}catch{return Z(this,le)}if(n.length===0)return je(this);var i=new this.Collection(this,function(){return me(n[0],n[n.length-1])});i._ondirectionchange=function(a){r=a==="next"?t._ascending:t._descending,n.sort(r)};var o=0;return i._addAlgorithm(function(a,u,s){for(var l=a.key;r(l,n[o])>0;)if(++o,o===n.length)return u(s),!1;return r(l,n[o])===0?!0:(u(function(){a.continue(n[o])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[Cn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=fe.apply($e,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Z(this,le)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Cn,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,o=this._ascending,a=this._descending,u=this._min,s=this._max;if(t.length===0)return je(this);if(!t.every(function(v){return v[0]!==void 0&&v[1]!==void 0&&o(v[0],v[1])<=0}))return Z(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",K.InvalidArgument);var l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;function f(v,x){for(var k=0,A=v.length;k<A;++k){var E=v[k];if(i(x[0],E[1])<0&&i(x[1],E[0])>0){E[0]=u(E[0],x[0]),E[1]=s(E[1],x[1]);break}}return k===A&&v.push(x),v}var h=o;function y(v,x){return h(v[0],x[0])}var d;try{d=t.reduce(f,[]),d.sort(y)}catch{return Z(this,le)}var p=0,m=c?function(v){return o(v,d[p][1])>0}:function(v){return o(v,d[p][1])>=0},_=l?function(v){return a(v,d[p][0])>0}:function(v){return a(v,d[p][0])>=0};function w(v){return!m(v)&&!_(v)}var g=m,b=new this.Collection(this,function(){return me(d[0][0],d[d.length-1][1],!l,!c)});return b._ondirectionchange=function(v){v==="next"?(g=m,h=o):(g=_,h=a),d.sort(y)},b._addAlgorithm(function(v,x,k){for(var A=v.key;g(A);)if(++p,p===d.length)return x(k),!1;return w(A)?!0:(r._cmp(A,d[p][1])===0||r._cmp(A,d[p][0])===0||x(function(){h===o?v.continue(d[p][0]):v.continue(d[p][1])}),!1)}),b},e.prototype.startsWithAnyOf=function(){var t=fe.apply($e,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?je(this):this.inAnyRange(t.map(function(n){return[n,n+ke]})):Z(this,"startsWithAnyOf() only works with strings")},e}();function Aa(e){return gt(mi.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var o=e._deps.indexedDB;if(!o)throw new K.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(a,u){return o.cmp(u,a)},this._max=function(a,u){return o.cmp(a,u)>0?a:u},this._min=function(a,u){return o.cmp(a,u)<0?a:u},this._IDBKeyRange=e._deps.IDBKeyRange})}function ae(e){return L(function(t){return lt(t),e(t.target.error),!1})}function lt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var ct="storagemutated",we="x-storagemutated-1",Ae=mt(null,ct),Sa=function(){function e(){}return e.prototype._lock=function(){return Je(!P.global),++this._reculock,this._reculock===1&&!P.global&&(P.lockOwnerFor=this),this},e.prototype._unlock=function(){if(Je(!P.global),--this._reculock===0)for(P.global||(P.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Qe(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&P.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(Je(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new K.DatabaseClosed(i);case"MissingAPIError":throw new K.MissingAPI(i.message,i);default:throw new K.OpenFailed(i)}if(!this.active)throw new K.TransactionInactive;return Je(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=L(function(o){lt(o),n._reject(t.error)}),t.onabort=L(function(o){lt(o),n.active&&n._reject(new K.Abort(t.error)),n.active=!1,n.on("abort").fire(o)}),t.oncomplete=L(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Ae.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return U(new K.ReadOnly("Transaction is readonly"));if(!this.active)return U(new K.TransactionInactive);if(this._locked())return new C(function(a,u){i._blockedFuncs.push([function(){i._promise(t,n,r).then(a,u)},P])});if(r)return xe(function(){var a=new C(function(u,s){i._lock();var l=n(u,s,i);l&&l.then&&l.then(u,s)});return a.finally(function(){return i._unlock()}),a._lib=!0,a});var o=new C(function(a,u){var s=n(a,u,i);s&&s.then&&s.then(a,u)});return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=C.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var o=n._waitingFor;return new C(function(a,u){r.then(function(s){return n._waitingQueue.push(L(a.bind(null,s)))},function(s){return n._waitingQueue.push(L(u.bind(null,s)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new K.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(ee(n,t))return n[t];var r=this.schema[t];if(!r)throw new K.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function Ca(e){return gt(Sa.prototype,function(n,r,i,o,a){var u=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=mt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new C(function(s,l){u._resolve=s,u._reject=l}),this._completion.then(function(){u.active=!1,u.on.complete.fire()},function(s){var l=u.active;return u.active=!1,u.on.error.fire(s),u.parent?u.parent._reject(s):l&&u.idbtrans&&u.idbtrans.abort(),U(s)})})}function kn(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+gi(t)}}function gi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function bi(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Qr(n,function(r){return[r.name,r]})}}function ka(e){return e.length===1?e[0]:e}var ft=function(e){try{return e.only([[]]),ft=function(){return[[]]},[[]]}catch{return ft=function(){return ke},ke}};function Pn(e){return e==null?function(){}:typeof e=="string"?Pa(e):function(t){return de(t,e)}}function Pa(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return de(n,e)}}function xr(e){return[].slice.call(e)}var Ta=0;function it(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function Ka(e,t,n){function r(f,h){var y=xr(f.objectStoreNames);return{schema:{name:f.name,tables:y.map(function(d){return h.objectStore(d)}).map(function(d){var p=d.keyPath,m=d.autoIncrement,_=q(p),w=p==null,g={},b={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w,compound:_,keyPath:p,autoIncrement:m,unique:!0,extractKey:Pn(p)},indexes:xr(d.indexNames).map(function(v){return d.index(v)}).map(function(v){var x=v.name,k=v.unique,A=v.multiEntry,E=v.keyPath,S=q(E),R={name:x,compound:S,keyPath:E,unique:k,multiEntry:A,extractKey:Pn(E)};return g[it(E)]=R,R}),getIndexByKeyPath:function(v){return g[it(v)]}};return g[":id"]=b.primaryKey,p!=null&&(g[it(p)]=b.primaryKey),b})},hasGetAll:y.length>0&&"getAll"in h.objectStore(y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var h=f.lower,y=f.upper,d=f.lowerOpen,p=f.upperOpen,m=h===void 0?y===void 0?null:t.upperBound(y,!!p):y===void 0?t.lowerBound(h,!!d):t.bound(h,y,!!d,!!p);return m}function o(f){var h=f.name;function y(m){var _=m.trans,w=m.type,g=m.keys,b=m.values,v=m.range;return new Promise(function(x,k){x=L(x);var A=_.objectStore(h),E=A.keyPath==null,S=w==="put"||w==="add";if(!S&&w!=="delete"&&w!=="deleteRange")throw new Error("Invalid operation type: "+w);var R=(g||b||{length:1}).length;if(g&&b&&g.length!==b.length)throw new Error("Given keys array must have same length as given values array.");if(R===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});var I,D=[],N=[],T=0,V=function(oe){++T,lt(oe)};if(w==="deleteRange"){if(v.type===4)return x({numFailures:T,failures:N,results:[],lastResult:void 0});v.type===3?D.push(I=A.clear()):D.push(I=A.delete(i(v)))}else{var H=S?E?[b,g]:[b,null]:[g,null],J=H[0],ie=H[1];if(S)for(var te=0;te<R;++te)D.push(I=ie&&ie[te]!==void 0?A[w](J[te],ie[te]):A[w](J[te])),I.onerror=V;else for(var te=0;te<R;++te)D.push(I=A[w](J[te])),I.onerror=V}var ye=function(oe){var Ge=oe.target.result;D.forEach(function(ne,bt){return ne.error!=null&&(N[bt]=ne.error)}),x({numFailures:T,failures:N,results:w==="delete"?g:D.map(function(ne){return ne.result}),lastResult:Ge})};I.onerror=function(oe){V(oe),ye(oe)},I.onsuccess=ye})}function d(m){var _=m.trans,w=m.values,g=m.query,b=m.reverse,v=m.unique;return new Promise(function(x,k){x=L(x);var A=g.index,E=g.range,S=_.objectStore(h),R=A.isPrimaryKey?S:S.index(A.name),I=b?v?"prevunique":"prev":v?"nextunique":"next",D=w||!("openKeyCursor"in R)?R.openCursor(i(E),I):R.openKeyCursor(i(E),I);D.onerror=ae(k),D.onsuccess=L(function(N){var T=D.result;if(!T){x(null);return}T.___id=++Ta,T.done=!1;var V=T.continue.bind(T),H=T.continuePrimaryKey;H&&(H=H.bind(T));var J=T.advance.bind(T),ie=function(){throw new Error("Cursor not started")},te=function(){throw new Error("Cursor not stopped")};T.trans=_,T.stop=T.continue=T.continuePrimaryKey=T.advance=ie,T.fail=L(k),T.next=function(){var ye=this,oe=1;return this.start(function(){return oe--?ye.continue():ye.stop()}).then(function(){return ye})},T.start=function(ye){var oe=new Promise(function(ne,bt){ne=L(ne),D.onerror=ae(bt),T.fail=bt,T.stop=function(Ci){T.stop=T.continue=T.continuePrimaryKey=T.advance=te,ne(Ci)}}),Ge=function(){if(D.result)try{ye()}catch(ne){T.fail(ne)}else T.done=!0,T.start=function(){throw new Error("Cursor behind last entry")},T.stop()};return D.onsuccess=L(function(ne){D.onsuccess=Ge,Ge()}),T.continue=V,T.continuePrimaryKey=H,T.advance=J,Ge(),oe},x(T)},k)})}function p(m){return function(_){return new Promise(function(w,g){w=L(w);var b=_.trans,v=_.values,x=_.limit,k=_.query,A=x===1/0?void 0:x,E=k.index,S=k.range,R=b.objectStore(h),I=E.isPrimaryKey?R:R.index(E.name),D=i(S);if(x===0)return w({result:[]});if(m){var N=v?I.getAll(D,A):I.getAllKeys(D,A);N.onsuccess=function(J){return w({result:J.target.result})},N.onerror=ae(g)}else{var T=0,V=v||!("openKeyCursor"in I)?I.openCursor(D):I.openKeyCursor(D),H=[];V.onsuccess=function(J){var ie=V.result;if(!ie)return w({result:H});if(H.push(v?ie.value:ie.primaryKey),++T===x)return w({result:H});ie.continue()},V.onerror=ae(g)}})}}return{name:h,schema:f,mutate:y,getMany:function(m){var _=m.trans,w=m.keys;return new Promise(function(g,b){g=L(g);for(var v=_.objectStore(h),x=w.length,k=new Array(x),A=0,E=0,S,R=function(T){var V=T.target;(k[V._pos]=V.result)!=null,++E===A&&g(k)},I=ae(b),D=0;D<x;++D){var N=w[D];N!=null&&(S=v.get(w[D]),S._pos=D,S.onsuccess=R,S.onerror=I,++A)}A===0&&g(k)})},get:function(m){var _=m.trans,w=m.key;return new Promise(function(g,b){g=L(g);var v=_.objectStore(h),x=v.get(w);x.onsuccess=function(k){return g(k.target.result)},x.onerror=ae(b)})},query:p(s),openCursor:d,count:function(m){var _=m.query,w=m.trans,g=_.index,b=_.range;return new Promise(function(v,x){var k=w.objectStore(h),A=g.isPrimaryKey?k:k.index(g.name),E=i(b),S=E?A.count(E):A.count();S.onsuccess=L(function(R){return v(R.target.result)}),S.onerror=ae(x)})}}}var a=r(e,n),u=a.schema,s=a.hasGetAll,l=u.tables.map(function(f){return o(f)}),c={};return l.forEach(function(f){return c[f.name]=f}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(f){var h=c[f];if(!h)throw new Error("Table '"+f+"' not found");return c[f]},MIN_KEY:-1/0,MAX_KEY:ft(t),schema:u}}function Ra(e,t){return t.reduce(function(n,r){var i=r.create;return O(O({},n),i(n))},e)}function Da(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var o=Ra(Ka(t,i,r),e.dbcore);return{dbcore:o}}function Jn(e,t){var n=e._novip,r=t.db,i=Da(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(o){var a=o.name;n.core.schema.tables.some(function(u){return u.name===a})&&(o.core=n.core.table(a),n[a]instanceof n.Table&&(n[a].core=o.core))})}function Vt(e,t,n,r){var i=e._novip;n.forEach(function(o){var a=r[o];t.forEach(function(u){var s=Un(u,o);(!s||"value"in s&&s.value===void 0)&&(u===i.Transaction.prototype||u instanceof i.Transaction?pe(u,o,{get:function(){return this.table(o)},set:function(l){Yr(this,o,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):u[o]=new i.Table(o,a))})})}function Tn(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function Oa(e,t){return e._cfg.version-t._cfg.version}function Ia(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),u=P.transless||P;xe(function(){P.trans=o,P.transless=u,t===0?($(i).forEach(function(s){Zn(n,s,i[s].primKey,i[s].indexes)}),Jn(e,n),C.follow(function(){return e.on.populate.fire(o)}).catch(a)):Ba(e,t,o,n).catch(a)})}function Ba(e,t,n,r){var i=e._novip,o=[],a=i._versions,u=i._dbSchema=er(i,i.idbdb,r),s=!1,l=a.filter(function(f){return f._cfg.version>=t});l.forEach(function(f){o.push(function(){var h=u,y=f._cfg.dbschema;Rn(i,h,r),Rn(i,y,r),u=i._dbSchema=y;var d=wi(h,y);d.add.forEach(function(b){Zn(r,b[0],b[1].primKey,b[1].indexes)}),d.change.forEach(function(b){if(b.recreate)throw new K.Upgrade("Not yet support for changing primary key");var v=r.objectStore(b.name);b.add.forEach(function(x){return Kn(v,x)}),b.change.forEach(function(x){v.deleteIndex(x.name),Kn(v,x)}),b.del.forEach(function(x){return v.deleteIndex(x)})});var p=f._cfg.contentUpgrade;if(p&&f._cfg.version>t){Jn(i,r),n._memoizedTables={},s=!0;var m=Gr(y);d.del.forEach(function(b){m[b]=h[b]}),Tn(i,[i.Transaction.prototype]),Vt(i,[i.Transaction.prototype],$(m),m),n.schema=m;var _=Wn(p);_&&Xe();var w,g=C.follow(function(){if(w=p(n),w&&_){var b=ve.bind(null,null);w.then(b,b)}});return w&&typeof w.then=="function"?C.resolve(w):g.then(function(){return w})}}),o.push(function(h){if(!s||!ca){var y=f._cfg.dbschema;Fa(y,h)}Tn(i,[i.Transaction.prototype]),Vt(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function c(){return o.length?C.resolve(o.shift()(n.idbtrans)).then(c):C.resolve()}return c().then(function(){Ma(u,r)})}function wi(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(!i)n.add.push([r,o]);else{var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!Gt)a.recreate=!0,n.change.push(a);else{var u=i.idxByName,s=o.idxByName,l=void 0;for(l in u)s[l]||a.del.push(l);for(l in s){var c=u[l],f=s[l];c?c.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}}return n}function Zn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(o){return Kn(i,o)}),i}function Ma(e,t){$(e).forEach(function(n){t.db.objectStoreNames.contains(n)||Zn(t,n,e[n].primKey,e[n].indexes)})}function Fa(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function Kn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function er(e,t,n){var r={},i=Xt(t.objectStoreNames,0);return i.forEach(function(o){for(var a=n.objectStore(o),u=a.keyPath,s=kn(gi(u),u||"",!1,!1,!!a.autoIncrement,u&&typeof u!="string",!0),l=[],c=0;c<a.indexNames.length;++c){var f=a.index(a.indexNames[c]);u=f.keyPath;var h=kn(f.name,u,!!f.unique,!!f.multiEntry,!1,u&&typeof u!="string",!1);l.push(h)}r[o]=bi(o,s,l)}),r}function La(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=er(r,t,n);r._storeNames=Xt(t.objectStoreNames,0),Vt(r,[r._allTables],$(i),i)}function Na(e,t){var n=er(e,e.idbdb,t),r=wi(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Rn(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,o=0;o<i.length;++o){var a=i[o],u=n.objectStore(a);r._hasGetAll="getAll"in u;for(var s=0;s<u.indexNames.length;++s){var l=u.indexNames[s],c=u.index(l).keyPath,f=typeof c=="string"?c:"["+Xt(c).join("+")+"]";if(t[a]){var h=t[a].idxByName[f];h&&(h.name=l,delete t[a].idxByName[f],t[a].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&F.WorkerGlobalScope&&F instanceof F.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function ja(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return kn(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),q(i),n===0)})}var $a=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){$(t).forEach(function(r){if(t[r]!==null){var i=ja(t[r]),o=i.shift();if(o.multi)throw new K.Schema("Primary key cannot be multi-valued");i.forEach(function(a){if(a.auto)throw new K.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new K.Schema("Index must have a name and cannot be an empty string")}),n[r]=bi(r,o,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?G(this._cfg.storesSource,t):t;var r=n._versions,i={},o={};return r.forEach(function(a){G(i,a._cfg.storesSource),o=a._cfg.dbschema={},a._parseStoresSpec(i,o)}),n._dbSchema=o,Tn(n,[n._allTables,n,n.Transaction.prototype]),Vt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],$(o),o),n._storeNames=$(o),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Yn(this._cfg.contentUpgrade||B,t),this},e}();function Va(e){return gt($a.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function tr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new or(Jt,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function nr(e){return e&&typeof e.databases=="function"}function Ua(e){var t=e.indexedDB,n=e.IDBKeyRange;return nr(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==Jt})}):tr(t,n).toCollection().primaryKeys()}function Wa(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!nr(n)&&t!==Jt&&tr(n,r).put({name:t}).catch(B)}function Ha(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!nr(n)&&t!==Jt&&tr(n,r).delete(t).catch(B)}function Dn(e){return xe(function(){return P.letThrough=!0,e()})}function za(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function Ya(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?U(t.dbOpenError):e});se&&(t.openCanceller._stackHolder=Fe()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new K.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,a=null,u=!1;return C.race([r,(typeof navigator>"u"?C.resolve():za()).then(function(){return new C(function(s,l){if(i(),!n)throw new K.MissingAPI;var c=e.name,f=t.autoSchema?n.open(c):n.open(c,Math.round(e.verno*10));if(!f)throw new K.MissingAPI;f.onerror=ae(l),f.onblocked=L(e._fireOnBlocked),f.onupgradeneeded=L(function(h){if(a=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=lt,a.abort(),f.result.close();var y=n.deleteDatabase(c);y.onsuccess=y.onerror=L(function(){l(new K.NoSuchDatabase("Database "+c+" doesnt exist"))})}else{a.onerror=ae(l);var d=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;u=d<1,e._novip.idbdb=f.result,Ia(e,d/10,a,l)}},l),f.onsuccess=L(function(){a=null;var h=e._novip.idbdb=f.result,y=Xt(h.objectStoreNames);if(y.length>0)try{var d=h.transaction(ka(y),"readonly");t.autoSchema?La(e,h,d):(Rn(e,e._dbSchema,d),Na(e,d)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Jn(e,d)}catch{}rt.push(e),h.onversionchange=L(function(p){t.vcFired=!0,e.on("versionchange").fire(p)}),h.onclose=L(function(p){e.on("close").fire(p)}),u&&Wa(e._deps,c),s()},l)})})]).then(function(){return i(),t.onReadyBeingFired=[],C.resolve(Dn(function(){return e.on.ready.fire(e.vip)})).then(function s(){if(t.onReadyBeingFired.length>0){var l=t.onReadyBeingFired.reduce(Yn,B);return t.onReadyBeingFired=[],C.resolve(Dn(function(){return l(e.vip)})).then(s)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(s){t.dbOpenError=s;try{a&&a.abort()}catch{}return r===t.openCanceller&&e._close(),U(s)}).finally(function(){t.openComplete=!0,o()})}function On(e){var t=function(a){return e.next(a)},n=function(a){return e.throw(a)},r=o(t),i=o(n);function o(a){return function(u){var s=a(u),l=s.value;return s.done?l:!l||typeof l.then!="function"?q(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return o(t)()}function qa(e,t,n){var r=arguments.length;if(r<2)throw new K.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=Jr(i);return[e,o,n]}function _i(e,t,n,r,i){return C.resolve().then(function(){var o=P.transless||P,a=e._createTransaction(t,n,e._dbSchema,r),u={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===zn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return _i(e,t,n,null,i)})):U(f)}var s=Wn(i);s&&Xe();var l,c=C.follow(function(){if(l=i.call(a,a),l)if(s){var f=ve.bind(null,null);l.then(f,f)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=On(l))},u);return(l&&typeof l.then=="function"?C.resolve(l).then(function(f){return a.active?f:U(new K.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return l})).then(function(f){return r&&a._resolve(),a._completion.then(function(){return f})}).catch(function(f){return a._reject(f),U(f)})})}function St(e,t,n){for(var r=q(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function Xa(e){return O(O({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},o=[];function a(p,m,_){var w=it(p),g=i[w]=i[w]||[],b=p==null?0:typeof p=="string"?1:p.length,v=m>0,x=O(O({},_),{isVirtual:v,keyTail:m,keyLength:b,extractKey:Pn(p),unique:!v&&_.unique});if(g.push(x),x.isPrimaryKey||o.push(x),b>1){var k=b===2?p[0]:p.slice(0,b-1);a(k,m+1,_)}return g.sort(function(A,E){return A.keyTail-E.keyTail}),x}var u=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(var s=0,l=r.indexes;s<l.length;s++){var c=l[s];a(c.keyPath,0,c)}function f(p){var m=i[it(p)];return m&&m[0]}function h(p,m){return{type:p.type===1?2:p.type,lower:St(p.lower,p.lowerOpen?e.MAX_KEY:e.MIN_KEY,m),lowerOpen:!0,upper:St(p.upper,p.upperOpen?e.MIN_KEY:e.MAX_KEY,m),upperOpen:!0}}function y(p){var m=p.query.index;return m.isVirtual?O(O({},p),{query:{index:m,range:h(p.query.range,m.keyTail)}}):p}var d=O(O({},n),{schema:O(O({},r),{primaryKey:u,indexes:o,getIndexByKeyPath:f}),count:function(p){return n.count(y(p))},query:function(p){return n.query(y(p))},openCursor:function(p){var m=p.query.index,_=m.keyTail,w=m.isVirtual,g=m.keyLength;if(!w)return n.openCursor(p);function b(v){function x(A){A!=null?v.continue(St(A,p.reverse?e.MAX_KEY:e.MIN_KEY,_)):p.unique?v.continue(v.key.slice(0,g).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,_)):v.continue()}var k=Object.create(v,{continue:{value:x},continuePrimaryKey:{value:function(A,E){v.continuePrimaryKey(St(A,e.MAX_KEY,_),E)}},primaryKey:{get:function(){return v.primaryKey}},key:{get:function(){var A=v.key;return g===1?A[0]:A.slice(0,g)}},value:{get:function(){return v.value}}});return k}return n.openCursor(y(p)).then(function(v){return v&&b(v)})}});return d}})}var Qa={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Xa};function rr(e,t,n,r){return n=n||{},r=r||"",$(e).forEach(function(i){if(!ee(t,i))n[r+i]=void 0;else{var o=e[i],a=t[i];if(typeof o=="object"&&typeof a=="object"&&o&&a){var u=pn(o),s=pn(a);u!==s?n[r+i]=t[i]:u==="Object"?rr(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i])}else o!==a&&(n[r+i]=t[i])}}),$(t).forEach(function(i){ee(e,i)||(n[r+i]=t[i])}),n}function Ga(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Ja={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return O(O({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=O(O({},n),{mutate:function(o){var a=P.trans,u=a.table(t).hook,s=u.deleting,l=u.creating,c=u.updating;switch(o.type){case"add":if(l.fire===B)break;return a._promise("readwrite",function(){return f(o)},!0);case"put":if(l.fire===B&&c.fire===B)break;return a._promise("readwrite",function(){return f(o)},!0);case"delete":if(s.fire===B)break;return a._promise("readwrite",function(){return f(o)},!0);case"deleteRange":if(s.fire===B)break;return a._promise("readwrite",function(){return h(o)},!0)}return n.mutate(o);function f(d){var p=P.trans,m=d.keys||Ga(r,d);if(!m)throw new Error("Keys missing");return d=d.type==="add"||d.type==="put"?O(O({},d),{keys:m}):O({},d),d.type!=="delete"&&(d.values=hn([],d.values,!0)),d.keys&&(d.keys=hn([],d.keys,!0)),Za(n,d,m).then(function(_){var w=m.map(function(g,b){var v=_[b],x={onerror:null,onsuccess:null};if(d.type==="delete")s.fire.call(x,g,v,p);else if(d.type==="add"||v===void 0){var k=l.fire.call(x,g,d.values[b],p);g==null&&k!=null&&(g=k,d.keys[b]=g,r.outbound||re(d.values[b],r.keyPath,g))}else{var A=rr(v,d.values[b]),E=c.fire.call(x,A,g,v,p);if(E){var S=d.values[b];Object.keys(E).forEach(function(R){ee(S,R)?S[R]=E[R]:re(S,R,E[R])})}}return x});return n.mutate(d).then(function(g){for(var b=g.failures,v=g.results,x=g.numFailures,k=g.lastResult,A=0;A<m.length;++A){var E=v?v[A]:m[A],S=w[A];E==null?S.onerror&&S.onerror(b[A]):S.onsuccess&&S.onsuccess(d.type==="put"&&_[A]?d.values[A]:E)}return{failures:b,results:v,numFailures:x,lastResult:k}}).catch(function(g){return w.forEach(function(b){return b.onerror&&b.onerror(g)}),Promise.reject(g)})})}function h(d){return y(d.trans,d.range,1e4)}function y(d,p,m){return n.query({trans:d,values:!1,query:{index:r,range:p},limit:m}).then(function(_){var w=_.result;return f({type:"delete",keys:w,trans:d}).then(function(g){return g.numFailures>0?Promise.reject(g.failures[0]):w.length<m?{failures:[],numFailures:0,lastResult:void 0}:y(d,O(O({},p),{lower:w[w.length-1],lowerOpen:!0}),m)})})}}});return i}})}};function Za(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function xi(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)Q(t.keys[i],e[o])===0&&(r.push(n?dt(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch{return null}}var eu={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return O(O({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=xi(r.keys,r.trans._cache,r.cache==="clone");return i?C.resolve(i):n.getMany(r).then(function(o){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?dt(o):o},o})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},sn;function ir(e){return!("from"in e)}var ce=function(e,t){if(this)G(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new ce;return e&&"d"in e&&G(n,e),n}};He(ce.prototype,(sn={add:function(e){return Ut(this,e),this},addKey:function(e){return ht(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return ht(t,n,n)}),this}},sn[vn]=function(){return In(this)},sn));function ht(e,t,n){var r=Q(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(ir(e))return G(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(Q(n,e.from)<0)return i?ht(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Er(e);if(Q(t,e.to)>0)return o?ht(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Er(e);Q(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),Q(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;i&&!e.l&&Ut(e,i),o&&a&&Ut(e,o)}}function Ut(e,t){function n(r,i){var o=i.from,a=i.to,u=i.l,s=i.r;ht(r,o,a),u&&n(r,u),s&&n(r,s)}ir(t)||n(e,t)}function tu(e,t){var n=In(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=In(e),a=o.next(i.from),u=a.value;!r.done&&!a.done;){if(Q(u.from,i.to)<=0&&Q(u.to,i.from)>=0)return!0;Q(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(a=o.next(i.from)).value}return!1}function In(e){var t=ir(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&Q(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||Q(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Er(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var o=i==="r"?"l":"r",a=O({},e),u=e[i];e.from=u.from,e.to=u.to,e[i]=u[i],a[i]=u[o],e[o]=a,a.d=Ar(a)}e.d=Ar(e)}function Ar(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var nu={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new ce(e.MIN_KEY,e.MAX_KEY);return O(O({},e),{table:function(r){var i=e.table(r),o=i.schema,a=o.primaryKey,u=a.extractKey,s=a.outbound,l=O(O({},i),{mutate:function(h){var y=h.trans,d=y.mutatedParts||(y.mutatedParts={}),p=function(k){var A="idb://"+t+"/"+r+"/"+k;return d[A]||(d[A]=new ce)},m=p(""),_=p(":dels"),w=h.type,g=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[],b=g[0],v=g[1],x=h.trans._cache;return i.mutate(h).then(function(k){if(q(b)){w!=="delete"&&(b=k.results),m.addKeys(b);var A=xi(b,x);!A&&w!=="add"&&_.addKeys(b),(A||v)&&ru(p,o,A,v)}else if(b){var E={from:b.lower,to:b.upper};_.add(E),m.add(E)}else m.add(n),_.add(n),o.indexes.forEach(function(S){return p(S.name).add(n)});return k})}}),c=function(h){var y,d,p=h.query,m=p.index,_=p.range;return[m,new ce((y=_.lower)!==null&&y!==void 0?y:e.MIN_KEY,(d=_.upper)!==null&&d!==void 0?d:e.MAX_KEY)]},f={get:function(h){return[a,new ce(h.key)]},getMany:function(h){return[a,new ce().addKeys(h.keys)]},count:c,query:c,openCursor:c};return $(f).forEach(function(h){l[h]=function(y){var d=P.subscr;if(d){var p=function(x){var k="idb://"+t+"/"+r+"/"+x;return d[k]||(d[k]=new ce)},m=p(""),_=p(":dels"),w=f[h](y),g=w[0],b=w[1];if(p(g.name||"").add(b),!g.isPrimaryKey)if(h==="count")_.add(n);else{var v=h==="query"&&s&&y.values&&i.query(O(O({},y),{values:!1}));return i[h].apply(this,arguments).then(function(x){if(h==="query"){if(s&&y.values)return v.then(function(S){var R=S.result;return m.addKeys(R),x});var k=y.values?x.result.map(u):x.result;y.values?m.addKeys(k):_.addKeys(k)}else if(h==="openCursor"){var A=x,E=y.values;return A&&Object.create(A,{key:{get:function(){return _.addKey(A.primaryKey),A.key}},primaryKey:{get:function(){var S=A.primaryKey;return _.addKey(S),S}},value:{get:function(){return E&&m.addKey(A.primaryKey),A.value}}})}return x})}}return i[h].apply(this,arguments)}}),l}})}};function ru(e,t,n,r){function i(o){var a=e(o.name||"");function u(l){return l!=null?o.extractKey(l):null}var s=function(l){return o.multiEntry&&q(l)?l.forEach(function(c){return a.addKey(c)}):a.addKey(l)};(n||r).forEach(function(l,c){var f=n&&u(n[c]),h=r&&u(r[c]);Q(f,h)!==0&&(f!=null&&s(f),h!=null&&s(h))})}t.indexes.forEach(i)}var or=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=O({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:B,dbReadyPromise:null,cancelOpen:B,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};a.dbReadyPromise=new C(function(u){a.dbReadyResolve=u}),a.openCanceller=new C(function(u,s){a.cancelOpen=s}),this._state=a,this.name=t,this.on=mt(this,"populate","blocked","versionchange","close",{ready:[Yn,B]}),this.on.ready.subscribe=qr(this.on.ready.subscribe,function(u){return function(s,l){e.vip(function(){var c=r._state;if(c.openComplete)c.dbOpenError||C.resolve().then(s),l&&u(s);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(s),l&&u(s);else{u(s);var f=r;l||u(function h(){f.on.ready.unsubscribe(s),f.on.ready.unsubscribe(h)})}})}}),this.Collection=ga(this),this.Table=da(this),this.Transaction=Ca(this),this.Version=Va(this),this.WhereClause=Aa(this),this.on("versionchange",function(u){u.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(u){!u.newVersion||u.newVersion<u.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+u.oldVersion/10)}),this._maxKey=ft(n.IDBKeyRange),this._createTransaction=function(u,s,l,c){return new r.Transaction(u,s,l,r._options.chromeTransactionDurability,c)},this._fireOnBlocked=function(u){r.on("blocked").fire(u),rt.filter(function(s){return s.name===r.name&&s!==r&&!s._state.vcFired}).map(function(s){return s.on("versionchange").fire(u)})},this.use(Qa),this.use(Ja),this.use(nu),this.use(eu),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(function(u){return u(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new K.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new K.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(Oa),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||P.letThrough||this._vip)?t():new C(function(r,i){if(n._state.openComplete)return i(new K.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new K.DatabaseClosed);return}n.open().catch(B)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,o=t.name;o&&this.unuse({stack:n,name:o});var a=this._middlewares[n]||(this._middlewares[n]=[]);return a.push({stack:n,create:r,level:i??10,name:o}),a.sort(function(u,s){return u.level-s.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(o){return i?o.create!==i:r?o.name!==r:!1})),this},e.prototype.open=function(){return Ya(this)},e.prototype._close=function(){var t=this._state,n=rt.indexOf(this);if(n>=0&&rt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new C(function(r){t.dbReadyResolve=r}),t.openCanceller=new C(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new K.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new C(function(i,o){var a=function(){t.close();var u=t._deps.indexedDB.deleteDatabase(t.name);u.onsuccess=L(function(){Ha(t._deps,t.name),i()}),u.onerror=ae(o),u.onblocked=t._fireOnBlocked};if(n)throw new K.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return $(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=qa.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,o=P.trans;(!o||o.db!==this||t.indexOf("!")!==-1)&&(o=null);var a=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var u,s;try{if(s=n.map(function(c){var f=c instanceof i.Table?c.name:c;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t===nn)u=nn;else if(t=="rw"||t==rn)u=rn;else throw new K.InvalidArgument("Invalid transaction mode: "+t);if(o){if(o.mode===nn&&u===rn)if(a)o=null;else throw new K.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&s.forEach(function(c){if(o&&o.storeNames.indexOf(c)===-1)if(a)o=null;else throw new K.SubTransaction("Table "+c+" not included in parent transaction.")}),a&&o&&!o.active&&(o=null)}}catch(c){return o?o._promise(null,function(f,h){h(c)}):U(c)}var l=_i.bind(null,this,u,s,o,r);return o?o._promise(u,l,"lock"):P.trans?Qe(P.transless,function(){return i._whenReady(l)}):this._whenReady(l)},e.prototype.table=function(t){if(!ee(this._allTables,t))throw new K.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),iu=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ou=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[iu]=function(){return this},e}();function Ei(e,t){return $(t).forEach(function(n){var r=e[n]||(e[n]=new ce);Ut(r,t[n])}),e}function Ai(e){return new ou(function(t){var n=Wn(e);function r(y){n&&Xe();var d=function(){return xe(e,{subscr:y,trans:null})},p=P.trans?Qe(P.transless,d):d();return n&&p.then(ve,ve),p}var i=!1,o={},a={},u={get closed(){return i},unsubscribe:function(){i=!0,Ae.storagemutated.unsubscribe(f)}};t.start&&t.start(u);var s=!1,l=!1;function c(){return $(a).some(function(y){return o[y]&&tu(o[y],a[y])})}var f=function(y){Ei(o,y),c()&&h()},h=function(){if(!(s||i)){o={};var y={},d=r(y);l||(Ae(ct,f),l=!0),s=!0,Promise.resolve(d).then(function(p){s=!1,!i&&(c()?h():(o={},a=y,t.next&&t.next(p)))},function(p){s=!1,t.error&&t.error(p),u.unsubscribe()})}};return h(),u})}var Bn;try{Bn={indexedDB:F.indexedDB||F.mozIndexedDB||F.webkitIndexedDB||F.msIndexedDB,IDBKeyRange:F.IDBKeyRange||F.webkitIDBKeyRange}}catch{Bn={indexedDB:null,IDBKeyRange:null}}var Se=or;He(Se,O(O({},Qt),{delete:function(e){var t=new Se(e,{addons:[]});return t.delete()},exists:function(e){return new Se(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return Ua(Se.dependencies).then(e)}catch{return U(new K.MissingAPI)}},defineClass:function(){function e(t){G(this,t)}return e},ignoreTransaction:function(e){return P.trans?Qe(P.transless,e):e()},vip:Dn,async:function(e){return function(){try{var t=On(e.apply(this,arguments));return!t||typeof t.then!="function"?C.resolve(t):t}catch(n){return U(n)}}},spawn:function(e,t,n){try{var r=On(e.apply(n,t||[]));return!r||typeof r.then!="function"?C.resolve(r):r}catch(i){return U(i)}},currentTransaction:{get:function(){return P.trans||null}},waitFor:function(e,t){var n=C.resolve(typeof e=="function"?Se.ignoreTransaction(e):e).timeout(t||6e4);return P.trans?P.trans.waitFor(n):n},Promise:C,debug:{get:function(){return se},set:function(e){ei(e,e==="dexie"?function(){return!0}:pi)}},derive:Ye,extend:G,props:He,override:qr,Events:mt,on:Ae,liveQuery:Ai,extendObservabilitySet:Ei,getByKeyPath:de,setByKeyPath:re,delByKeyPath:Lo,shallowClone:Gr,deepClone:dt,getObjectDiff:rr,cmp:Q,asap:Xr,minKey:Cn,addons:[],connections:rt,errnames:zn,dependencies:Bn,semVer:mr,version:mr.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));Se.maxKey=ft(Se.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ae(ct,function(e){if(!he){var t;Gt?(t=document.createEvent("CustomEvent"),t.initCustomEvent(we,!0,!0,e)):t=new CustomEvent(we,{detail:e}),he=!0,dispatchEvent(t),he=!1}}),addEventListener(we,function(e){var t=e.detail;he||Wt(t)}));function Wt(e){var t=he;try{he=!0,Ae.storagemutated.fire(e)}finally{he=t}}var he=!1;if(typeof BroadcastChannel<"u"){var Sr=new BroadcastChannel(we);Ae(ct,function(e){he||Sr.postMessage(e)}),Sr.onmessage=function(e){e.data&&Wt(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Ae(ct,function(e){try{he||(typeof localStorage<"u"&&localStorage.setItem(we,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&hn([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:we,changedParts:e})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(e){if(e.key===we){var t=JSON.parse(e.newValue);t&&Wt(t.changedParts)}});var Cr=self.document&&navigator.serviceWorker;Cr&&Cr.addEventListener("message",au)}function au(e){var t=e.data;t&&t.type===we&&Wt(t.changedParts)}C.rejectionMapper=Yo;ei(se,pi);class uu extends or{decks;constructor(){super("vocabulary"),this.version(1).stores({decks:"++id, name"})}}const Si=new uu,su=e=>{const[t,n]=Ke(),i=Ai(e).subscribe(o=>{n(()=>o)});return Ht(()=>{i.unsubscribe()}),t},lu=ze("<main><h1>Home</h1></main>"),cu=ze("<div></div>"),fu=()=>{const e=su(async()=>await Si.decks.toArray());return(()=>{const t=lu.cloneNode(!0);return t.firstChild,Ce(t,z(ji,{get each(){return e()},children:n=>(()=>{const r=cu.cloneNode(!0);return Ce(r,()=>n.name),r})()}),null),t})()},hu=ze("<main><h1>Test route</h1></main>"),du=()=>hu.cloneNode(!0),pu=ze('<main><h1>Create Deck</h1><form><label for="input-create-deck-name">Name</label><input id="input-create-deck-name"><button type="submit">Create</button></form></main>'),vu=()=>{let e;const t=n=>{n.preventDefault(),console.log("e",n),console.log(e)};return(()=>{const n=pu.cloneNode(!0),r=n.firstChild,i=r.nextSibling,o=i.firstChild,a=o.nextSibling;i.addEventListener("submit",t);const u=e;return typeof u=="function"?to(u,a):e=a,n})()};const yu=ze('<div><header><button class="color-mode-switcher"></button></header><button>Create default deck</button></div>'),mu=()=>{const e=()=>{Si.decks.add({name:"Default"}).catch(console.error)},t=window.matchMedia("(prefers-color-scheme: light)").matches,n=t?"Dark mode":"Light mode",r=()=>{const i=t?"dark-mode":"light-mode";document.documentElement.classList.contains(i)?document.documentElement.classList.remove(i):document.documentElement.classList.add(i)};return(()=>{const i=yu.cloneNode(!0),o=i.firstChild,a=o.firstChild,u=o.nextSibling;return Ce(o,z(hr,{href:"/",children:"Home"}),a),Ce(o,z(hr,{href:"/test",children:"Test"}),a),a.$$click=r,Ce(a,n),Ce(i,z(Do,{get children(){return[z(en,{path:"/",element:fu}),z(en,{path:"/test",element:du}),z(en,{path:"/create-deck",element:vu})]}}),u),u.$$click=()=>e(),i})()};$n(["click"]);qi(()=>z(Ro,{get base(){return"/vocab-trainer/"},get children(){return z(mu,{})}}),document.getElementById("root"));
