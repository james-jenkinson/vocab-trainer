(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Ae={},Li=(e,t)=>e===t,Yn=Symbol("solid-proxy"),Fi=Symbol("solid-track"),Vt={equals:Li};let ji=zr;const Fe=1,Ht=2,Lr={owned:null,cleanups:null,context:null,owner:null};var M=null;let Ke=null,W=null,Q=null,Oe=null,Xn=0;function ot(e,t){const n=W,r=M,i=e.length===0,o=i?Lr:{owned:null,cleanups:null,context:null,owner:t||r},a=i?e:()=>e(()=>de(()=>Jn(o)));M=o,W=null;try{return je(a,!0)}finally{W=n,M=r}}function ee(e,t){t=t?Object.assign({},Vt,t):Vt;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),Ur(n,i));return[Wr.bind(n),r]}function ke(e,t,n){const r=Vr(e,t,!1,Fe);rn(r)}function N(e,t,n){n=n?Object.assign({},Vt,n):Vt;const r=Vr(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,rn(r),Wr.bind(r)}function de(e){const t=W;W=null;try{return e()}finally{W=t}}function Fr(e,t,n){const r=Array.isArray(e);let i,o=n&&n.defer;return a=>{let s;if(r){s=Array(e.length);for(let l=0;l<e.length;l++)s[l]=e[l]()}else s=e();if(o){o=!1;return}const u=de(()=>t(s,i,a));return i=s,u}}function nn(e){return M===null||(M.cleanups===null?M.cleanups=[e]:M.cleanups.push(e)),e}function Wi(){return M}function Ui(e,t){const n=M;M=e;try{return je(t,!0)}finally{M=n}}function Vi(e){const t=W,n=M;return Promise.resolve().then(()=>{W=t,M=n;let r;return je(e,!1),W=M=null,r?r.done:void 0})}function jr(e,t){const n=Symbol("context");return{id:n,Provider:Yi(n),defaultValue:e}}function Gn(e){let t;return(t=Xr(M,e.id))!==void 0?t:e.defaultValue}function Qn(e){const t=N(e),n=N(()=>wn(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Wr(){const e=Ke;if(this.sources&&(this.state||e))if(this.state===Fe||e)rn(this);else{const t=Q;Q=null,je(()=>zt(this),!1),Q=t}if(W){const t=this.observers?this.observers.length:0;W.sources?(W.sources.push(this),W.sourceSlots.push(t)):(W.sources=[this],W.sourceSlots=[t]),this.observers?(this.observers.push(W),this.observerSlots.push(W.sources.length-1)):(this.observers=[W],this.observerSlots=[W.sources.length-1])}return this.value}function Ur(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&je(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],a=Ke&&Ke.running;a&&Ke.disposed.has(o),(a&&!o.tState||!a&&!o.state)&&(o.pure?Q.push(o):Oe.push(o),o.observers&&qr(o)),a||(o.state=Fe)}if(Q.length>1e6)throw Q=[],new Error},!1)),t}function rn(e){if(!e.fn)return;Jn(e);const t=M,n=W,r=Xn;W=M=e,Hi(e,e.value,r),W=n,M=t}function Hi(e,t,n){let r;try{r=e.fn(t)}catch(i){e.pure&&(e.state=Fe),Yr(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ur(e,r):e.value=r,e.updatedAt=n)}function Vr(e,t,n,r=Fe,i){const o={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:M,context:null,pure:n};return M===null||M!==Lr&&(M.owned?M.owned.push(o):M.owned=[o]),o}function Hr(e){const t=Ke;if(e.state===0||t)return;if(e.state===Ht||t)return zt(e);if(e.suspense&&de(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Xn);)(e.state||t)&&n.push(e);for(let r=n.length-1;r>=0;r--)if(e=n[r],e.state===Fe||t)rn(e);else if(e.state===Ht||t){const i=Q;Q=null,je(()=>zt(e,n[0]),!1),Q=i}}function je(e,t){if(Q)return e();let n=!1;t||(Q=[]),Oe?n=!0:Oe=[],Xn++;try{const r=e();return zi(n),r}catch(r){Q||(Oe=null),Yr(r)}}function zi(e){if(Q&&(zr(Q),Q=null),e)return;const t=Oe;Oe=null,t.length&&je(()=>ji(t),!1)}function zr(e){for(let t=0;t<e.length;t++)Hr(e[t])}function zt(e,t){const n=Ke;e.state=0;for(let r=0;r<e.sources.length;r+=1){const i=e.sources[r];i.sources&&(i.state===Fe||n?i!==t&&Hr(i):(i.state===Ht||n)&&zt(i,t))}}function qr(e){const t=Ke;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(!r.state||t)&&(r.state=Ht,r.pure?Q.push(r):Oe.push(r),r.observers&&qr(r))}}function Jn(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const o=i.pop(),a=n.observerSlots.pop();r<i.length&&(o.sourceSlots[a]=r,i[r]=o,n.observerSlots[r]=a)}}if(e.owned){for(t=0;t<e.owned.length;t++)Jn(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function qi(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function Yr(e){throw e=qi(e),e}function Xr(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:Xr(e.owner,t):void 0}function wn(e){if(typeof e=="function"&&!e.length)return wn(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=wn(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Yi(e,t){return function(r){let i;return ke(()=>i=de(()=>(M.context={[e]:r.value},Qn(()=>r.children))),void 0),i}}const Xi=Symbol("fallback");function mr(e){for(let t=0;t<e.length;t++)e[t]()}function Gi(e,t,n={}){let r=[],i=[],o=[],a=0,s=t.length>1?[]:null;return nn(()=>mr(o)),()=>{let u=e()||[],l,c;return u[Fi],de(()=>{let d=u.length,g,h,v,b,x,_,y,m,p;if(d===0)a!==0&&(mr(o),o=[],r=[],i=[],a=0,s&&(s=[])),n.fallback&&(r=[Xi],i[0]=ot(w=>(o[0]=w,n.fallback())),a=1);else if(a===0){for(i=new Array(d),c=0;c<d;c++)r[c]=u[c],i[c]=ot(f);a=d}else{for(v=new Array(d),b=new Array(d),s&&(x=new Array(d)),_=0,y=Math.min(a,d);_<y&&r[_]===u[_];_++);for(y=a-1,m=d-1;y>=_&&m>=_&&r[y]===u[m];y--,m--)v[m]=i[y],b[m]=o[y],s&&(x[m]=s[y]);for(g=new Map,h=new Array(m+1),c=m;c>=_;c--)p=u[c],l=g.get(p),h[c]=l===void 0?-1:l,g.set(p,c);for(l=_;l<=y;l++)p=r[l],c=g.get(p),c!==void 0&&c!==-1?(v[c]=i[l],b[c]=o[l],s&&(x[c]=s[l]),c=h[c],g.set(p,c)):o[l]();for(c=_;c<d;c++)c in v?(i[c]=v[c],o[c]=b[c],s&&(s[c]=x[c],s[c](c))):i[c]=ot(f);i=i.slice(0,a=d),r=u.slice(0)}return i});function f(d){if(o[c]=d,s){const[g,h]=ee(c);return s[c]=h,t(u[c],g)}return t(u[c])}}}function $(e,t){return de(()=>e(t||{}))}function Pt(){return!0}const Gr={get(e,t,n){return t===Yn?n:e.get(t)},has(e,t){return e.has(t)},set:Pt,deleteProperty:Pt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Pt,deleteProperty:Pt}},ownKeys(e){return e.keys()}};function dn(e){return(e=typeof e=="function"?e():e)?e:{}}function _n(...e){if(e.some(n=>n&&(Yn in n||typeof n=="function")))return new Proxy({get(n){for(let r=e.length-1;r>=0;r--){const i=dn(e[r])[n];if(i!==void 0)return i}},has(n){for(let r=e.length-1;r>=0;r--)if(n in dn(e[r]))return!0;return!1},keys(){const n=[];for(let r=0;r<e.length;r++)n.push(...Object.keys(dn(e[r])));return[...new Set(n)]}},Gr);const t={};for(let n=e.length-1;n>=0;n--)if(e[n]){const r=Object.getOwnPropertyDescriptors(e[n]);for(const i in r)i in t||Object.defineProperty(t,i,{enumerable:!0,get(){for(let o=e.length-1;o>=0;o--){const a=(e[o]||{})[i];if(a!==void 0)return a}}})}return t}function Qi(e,...t){const n=new Set(t.flat()),r=Object.getOwnPropertyDescriptors(e),i=Yn in e;i||t.push(Object.keys(r).filter(a=>!n.has(a)));const o=t.map(a=>{const s={};for(let u=0;u<a.length;u++){const l=a[u];!i&&!(l in e)||Object.defineProperty(s,l,r[l]?r[l]:{get(){return e[l]},set(){return!0},enumerable:!0})}return s});return i&&o.push(new Proxy({get(a){return n.has(a)?void 0:e[a]},has(a){return n.has(a)?!1:a in e},keys(){return Object.keys(e).filter(a=>!n.has(a))}},Gr)),o}function Ji(e){const t="fallback"in e&&{fallback:()=>e.fallback};return N(Gi(()=>e.each,e.children,t||void 0))}function ce(e){let t=!1;const n=e.keyed,r=N(()=>e.when,void 0,{equals:(i,o)=>t?i===o:!i==!o});return N(()=>{const i=r();if(i){const o=e.children,a=typeof o=="function"&&o.length>0;return t=n||a,a?de(()=>o(i)):o}return e.fallback})}const Zi=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],eo=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Zi]),to=new Set(["innerHTML","textContent","innerText","children"]),no=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),gr=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),ro=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),io={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function oo(e,t,n){let r=n.length,i=t.length,o=r,a=0,s=0,u=t[i-1].nextSibling,l=null;for(;a<i||s<o;){if(t[a]===n[s]){a++,s++;continue}for(;t[i-1]===n[o-1];)i--,o--;if(i===a){const c=o<r?s?n[s-1].nextSibling:n[o-s]:u;for(;s<o;)e.insertBefore(n[s++],c)}else if(o===s)for(;a<i;)(!l||!l.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[o-1]&&n[s]===t[i-1]){const c=t[--i].nextSibling;e.insertBefore(n[s++],t[a++].nextSibling),e.insertBefore(n[--o],c),t[i]=n[o]}else{if(!l){l=new Map;let f=s;for(;f<o;)l.set(n[f],f++)}const c=l.get(t[a]);if(c!=null)if(s<c&&c<o){let f=a,d=1,g;for(;++f<i&&f<o&&!((g=l.get(t[f]))==null||g!==c+d);)d++;if(d>c-s){const h=t[a];for(;s<c;)e.insertBefore(n[s++],h)}else e.replaceChild(n[s++],t[a++])}else a++;else t[a++].remove()}}}const br="_$DX_DELEGATE";function ao(e,t,n,r={}){let i;return ot(o=>{i=o,t===document?e():U(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function Y(e,t,n){const r=document.createElement("template");r.innerHTML=e;let i=r.content.firstChild;return n&&(i=i.firstChild),i}function wt(e,t=window.document){const n=t[br]||(t[br]=new Set);for(let r=0,i=e.length;r<i;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,yo))}}function Qr(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function so(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function uo(e,t){t==null?e.removeAttribute("class"):e.className=t}function lo(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=o=>i.call(e,n[1],o))}else e.addEventListener(t,n)}function co(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let o,a;for(o=0,a=i.length;o<a;o++){const s=i[o];!s||s==="undefined"||t[s]||(wr(e,s,!1),delete n[s])}for(o=0,a=r.length;o<a;o++){const s=r[o],u=!!t[s];!s||s==="undefined"||n[s]===u||!u||(wr(e,s,!0),n[s]=u)}return n}function fo(e,t,n){if(!t)return n?Qr(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,o;for(o in n)t[o]==null&&r.removeProperty(o),delete n[o];for(o in t)i=t[o],i!==n[o]&&(r.setProperty(o,i),n[o]=i);return n}function ho(e,t={},n,r){const i={};return r||ke(()=>i.children=Ge(e,t.children,i.children)),ke(()=>t.ref&&t.ref(e)),ke(()=>po(e,t,n,!0,i,!0)),i}function $t(e,t,n){return de(()=>e(t,n))}function U(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return Ge(e,t,r,n);ke(i=>Ge(e,t(),i,n),r)}function po(e,t,n,r,i={},o=!1){t||(t={});for(const a in i)if(!(a in t)){if(a==="children")continue;i[a]=_r(e,a,null,i[a],n,o)}for(const a in t){if(a==="children"){r||Ge(e,t.children);continue}const s=t[a];i[a]=_r(e,a,s,i[a],n,o)}}function vo(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function wr(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,o=r.length;i<o;i++)e.classList.toggle(r[i],n)}function _r(e,t,n,r,i,o){let a,s,u;if(t==="style")return fo(e,n,r);if(t==="classList")return co(e,n,r);if(n===r)return r;if(t==="ref")o||n(e);else if(t.slice(0,3)==="on:"){const l=t.slice(3);r&&e.removeEventListener(l,r),n&&e.addEventListener(l,n)}else if(t.slice(0,10)==="oncapture:"){const l=t.slice(10);r&&e.removeEventListener(l,r,!0),n&&e.addEventListener(l,n,!0)}else if(t.slice(0,2)==="on"){const l=t.slice(2).toLowerCase(),c=ro.has(l);if(!c&&r){const f=Array.isArray(r)?r[0]:r;e.removeEventListener(l,f)}(c||n)&&(lo(e,l,n,c),c&&wt([l]))}else if((u=to.has(t))||!i&&(gr[t]||(s=eo.has(t)))||(a=e.nodeName.includes("-")))t==="class"||t==="className"?uo(e,n):a&&!s&&!u?e[vo(t)]=n:e[gr[t]||t]=n;else{const l=i&&t.indexOf(":")>-1&&io[t.split(":")[0]];l?so(e,l,t,n):Qr(e,no[t]||t,n)}return n}function yo(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),Ae.registry&&!Ae.done&&(Ae.done=!0,document.querySelectorAll("[id^=pl-]").forEach(r=>r.remove()));n!==null;){const r=n[t];if(r&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?r.call(n,i,e):r.call(n,e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function Ge(e,t,n,r,i){for(Ae.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(Ae.context)return n;if(o==="number"&&(t=t.toString()),a){let s=n[0];s&&s.nodeType===3?s.data=t:s=document.createTextNode(t),n=Ue(e,n,r,s)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean"){if(Ae.context)return n;n=Ue(e,n,r)}else{if(o==="function")return ke(()=>{let s=t();for(;typeof s=="function";)s=s();n=Ge(e,s,n,r)}),()=>n;if(Array.isArray(t)){const s=[],u=n&&Array.isArray(n);if(xn(s,t,n,i))return ke(()=>n=Ge(e,s,n,r,!0)),()=>n;if(Ae.context){if(!s.length)return n;for(let l=0;l<s.length;l++)if(s[l].parentNode)return n=s}if(s.length===0){if(n=Ue(e,n,r),a)return n}else u?n.length===0?xr(e,s,r):oo(e,n,s):(n&&Ue(e),xr(e,s));n=s}else if(t instanceof Node){if(Ae.context&&t.parentNode)return n=a?[t]:t;if(Array.isArray(n)){if(a)return n=Ue(e,n,r,t);Ue(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function xn(e,t,n,r){let i=!1;for(let o=0,a=t.length;o<a;o++){let s=t[o],u=n&&n[o];if(s instanceof Node)e.push(s);else if(!(s==null||s===!0||s===!1))if(Array.isArray(s))i=xn(e,s,u)||i;else if(typeof s=="function")if(r){for(;typeof s=="function";)s=s();i=xn(e,Array.isArray(s)?s:[s],Array.isArray(u)?u:[u])||i}else e.push(s),i=!0;else{const l=String(s);u&&u.nodeType===3&&u.data===l?e.push(u):e.push(document.createTextNode(l))}}return i}function xr(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function Ue(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let o=!1;for(let a=t.length-1;a>=0;a--){const s=t[a];if(i!==s){const u=s.parentNode===e;!o&&!a?u?e.replaceChild(i,s):e.insertBefore(i,n):u&&s.remove()}else o=!0}}else e.insertBefore(i,n);return[i]}const mo=!1;function go(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function bo([e,t],n,r){return[n?()=>n(e()):e,r?i=>t(r(i)):t]}function wo(e){try{return document.querySelector(e)}catch{return null}}function _o(e,t){const n=wo(`#${e}`);n?n.scrollIntoView():t&&window.scrollTo(0,0)}function xo(e,t,n,r){let i=!1;const o=s=>typeof s=="string"?{value:s}:s,a=bo(ee(o(e()),{equals:(s,u)=>s.value===u.value}),void 0,s=>(!i&&t(s),s));return n&&nn(n((s=e())=>{i=!0,a[1](o(s)),i=!1})),{signal:a,utils:r}}function So(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:ee({value:""})};return e}function Eo(){return xo(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:e,replace:t,scroll:n,state:r})=>{t?window.history.replaceState(r,"",e):window.history.pushState(r,"",e),_o(window.location.hash.slice(1),n)},e=>go(window,"popstate",()=>e()),{go:e=>window.history.go(e)})}const Ao=/^(?:[a-z0-9]+:)?\/\//i,Co=/^\/+|\/+$/g;function at(e,t=!1){const n=e.replace(Co,"");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function Bt(e,t,n){if(Ao.test(t))return;const r=at(e),i=n&&at(n);let o="";return!i||t.startsWith("/")?o=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?o=r+i:o=i,(o||"/")+at(t,!o)}function ko(e,t){if(e==null)throw new Error(t);return e}function Jr(e,t){return at(e).replace(/\/*(\*.*)?$/g,"")+at(t)}function Do(e){const t={};return e.searchParams.forEach((n,r)=>{t[r]=n}),t}function Ye(e,t){return decodeURIComponent(t?e.replace(/\+/g," "):e)}function Po(e,t){const[n,r]=e.split("/*",2),i=n.split("/").filter(Boolean),o=i.length;return a=>{const s=a.split("/").filter(Boolean),u=s.length-o;if(u<0||u>0&&r===void 0&&!t)return null;const l={path:o?"":"/",params:{}};for(let c=0;c<o;c++){const f=i[c],d=s[c];if(f[0]===":")l.params[f.slice(1)]=d;else if(f.localeCompare(d,void 0,{sensitivity:"base"})!==0)return null;l.path+=`/${d}`}return r&&(l.params[r]=u?s.slice(-u).join("/"):""),l}}function Ro(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,o)=>i+(o.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Zr(e){const t=new Map,n=Wi();return new Proxy({},{get(r,i){return t.has(i)||Ui(n,()=>t.set(i,N(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function ei(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return ei(r).reduce((o,a)=>[...o,...i.map(s=>s+a)],[])}const To=100,ti=jr(),on=jr(),_t=()=>ko(Gn(ti),"Make sure your app is wrapped in a <Router />");let ft;const an=()=>ft||Gn(on)||_t().base,Io=e=>{const t=an();return N(()=>t.resolvePath(e()))},Ko=e=>{const t=_t();return N(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},Oo=()=>_t().navigatorFactory(),$o=()=>_t().location,Zn=()=>an().params;function Bo(e,t="",n){const{component:r,data:i,children:o}=e,a=!o||Array.isArray(o)&&!o.length,s={key:e,element:r?()=>$(r,{}):()=>{const{element:u}=e;return u===void 0&&n?$(n,{}):u},preload:e.component?r.preload:e.preload,data:i};return ni(e.path).reduce((u,l)=>{for(const c of ei(l)){const f=Jr(t,c),d=a?f:f.split("/*",1)[0];u.push({...s,originalPath:c,pattern:d,matcher:Po(d,!a)})}return u},[])}function Mo(e,t=0){return{routes:e,score:Ro(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const o=e[i],a=o.matcher(n);if(!a)return null;r.unshift({...a,route:o})}return r}}}function ni(e){return Array.isArray(e)?e:[e]}function ri(e,t="",n,r=[],i=[]){const o=ni(e);for(let a=0,s=o.length;a<s;a++){const u=o[a];if(u&&typeof u=="object"&&u.hasOwnProperty("path")){const l=Bo(u,t,n);for(const c of l){if(r.push(c),u.children)ri(u.children,c.pattern,n,r,i);else{const f=Mo([...r],i.length);i.push(f)}r.pop()}}}return r.length?i:i.sort((a,s)=>s.score-a.score)}function No(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}function Lo(e,t){const n=new URL("http://sar"),r=N(u=>{const l=e();try{return new URL(l,n)}catch{return console.error(`Invalid path ${l}`),u}},n,{equals:(u,l)=>u.href===l.href}),i=N(()=>Ye(r().pathname)),o=N(()=>Ye(r().search,!0)),a=N(()=>Ye(r().hash)),s=N(()=>"");return{get pathname(){return i()},get search(){return o()},get hash(){return a()},get state(){return t()},get key(){return s()},query:Zr(Fr(o,()=>Do(r())))}}function Fo(e,t="",n,r){const{signal:[i,o],utils:a={}}=So(e),s=a.parsePath||(S=>S),u=a.renderPath||(S=>S),l=Bt("",t),c=void 0;if(l===void 0)throw new Error(`${l} is not a valid base path`);l&&!i().value&&o({value:l,replace:!0,scroll:!1});const[f,d]=ee(!1),g=async S=>{d(!0);try{await Vi(S)}finally{d(!1)}},[h,v]=ee(i().value),[b,x]=ee(i().state),_=Lo(h,b),y=[],m={pattern:l,params:{},path:()=>l,outlet:()=>null,resolvePath(S){return Bt(l,S)}};if(n)try{ft=m,m.data=n({data:void 0,params:{},location:_,navigate:w(m)})}finally{ft=void 0}function p(S,A,T){de(()=>{if(typeof A=="number"){A&&(a.go?a.go(A):console.warn("Router integration does not support relative routing"));return}const{replace:O,resolve:I,scroll:j,state:P}={replace:!1,resolve:!0,scroll:!0,...T},H=I?S.resolvePath(A):Bt("",A);if(H===void 0)throw new Error(`Path '${A}' is not a routable path`);if(y.length>=To)throw new Error("Too many redirects");const q=h();if((H!==q||P!==b())&&!mo){const te=y.push({value:q,replace:O,scroll:j,state:b()});g(()=>{v(H),x(P)}).then(()=>{y.length===te&&C({value:H,state:P})})}})}function w(S){return S=S||Gn(on)||m,(A,T)=>p(S,A,T)}function C(S){const A=y[0];A&&((S.value!==A.value||S.state!==A.state)&&o({...S,replace:A.replace,scroll:A.scroll}),y.length=0)}ke(()=>{const{value:S,state:A}=i();de(()=>{S!==h()&&g(()=>{v(S),x(A)})})});{let S=function(A){if(A.defaultPrevented||A.button!==0||A.metaKey||A.altKey||A.ctrlKey||A.shiftKey)return;const T=A.composedPath().find(te=>te instanceof Node&&te.nodeName.toUpperCase()==="A");if(!T||!T.hasAttribute("link"))return;const O=T.href;if(T.target||!O&&!T.hasAttribute("state"))return;const I=(T.getAttribute("rel")||"").split(/\s+/);if(T.hasAttribute("download")||I&&I.includes("external"))return;const j=new URL(O),P=Ye(j.pathname);if(j.origin!==window.location.origin||l&&P&&!P.toLowerCase().startsWith(l.toLowerCase()))return;const H=s(P+Ye(j.search,!0)+Ye(j.hash)),q=T.getAttribute("state");A.preventDefault(),p(m,H,{resolve:!1,replace:T.hasAttribute("replace"),scroll:!T.hasAttribute("noscroll"),state:q&&JSON.parse(q)})};var E=S;wt(["click"]),document.addEventListener("click",S),nn(()=>document.removeEventListener("click",S))}return{base:m,out:c,location:_,isRouting:f,renderPath:u,parsePath:s,navigatorFactory:w}}function jo(e,t,n,r){const{base:i,location:o,navigatorFactory:a}=e,{pattern:s,element:u,preload:l,data:c}=r().route,f=N(()=>r().path),d=Zr(()=>r().params);l&&l();const g={parent:t,pattern:s,get child(){return n()},path:f,params:d,data:t.data,outlet:u,resolvePath(h){return Bt(i.path(),h,f())}};if(c)try{ft=g,g.data=c({data:t.data,params:d,location:o,navigate:a(g)})}finally{ft=void 0}return g}const Wo=Y("<a link></a>"),Uo=e=>{const{source:t,url:n,base:r,data:i,out:o}=e,a=t||Eo(),s=Fo(a,r,i);return $(ti.Provider,{value:s,get children(){return e.children}})},Vo=e=>{const t=_t(),n=an(),r=Qn(()=>e.children),i=N(()=>ri(r(),Jr(n.pattern,e.base||""),Ho)),o=N(()=>No(i(),t.location.pathname));t.out&&t.out.matches.push(o().map(({route:l,path:c,params:f})=>({originalPath:l.originalPath,pattern:l.pattern,path:c,params:f})));const a=[];let s;const u=N(Fr(o,(l,c,f)=>{let d=c&&l.length===c.length;const g=[];for(let h=0,v=l.length;h<v;h++){const b=c&&c[h],x=l[h];f&&b&&x.route.key===b.route.key?g[h]=f[h]:(d=!1,a[h]&&a[h](),ot(_=>{a[h]=_,g[h]=jo(t,g[h-1]||n,()=>u()[h+1],()=>o()[h])}))}return a.splice(l.length).forEach(h=>h()),f&&d?f:(s=g[0],g)}));return $(ce,{get when(){return u()&&s},children:l=>$(on.Provider,{value:l,get children(){return l.outlet()}})})},Ve=e=>{const t=Qn(()=>e.children);return _n(e,{get children(){return t()}})},Ho=()=>{const e=an();return $(ce,{get when(){return e.child},children:t=>$(on.Provider,{value:t,get children(){return t.outlet()}})})};function Me(e){e=_n({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=Qi(e,["href","state","activeClass","inactiveClass","end"]),n=Io(()=>e.href),r=Ko(n),i=$o(),o=N(()=>{const a=n();if(a===void 0)return!1;const s=a.split(/[?#]/,1)[0].toLowerCase(),u=i.pathname.toLowerCase();return e.end?s===u:u.startsWith(s)});return(()=>{const a=Wo.cloneNode(!0);return ho(a,_n(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{[e.inactiveClass]:!o(),[e.activeClass]:o(),...t.classList}},get["aria-current"](){return o()?"page":void 0}}),!1,!1),a})()}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var K=function(){return K=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},K.apply(this,arguments)};function Sn(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var L=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,V=Object.keys,G=Array.isArray;typeof Promise<"u"&&!L.Promise&&(L.Promise=Promise);function Z(e,t){return typeof t!="object"||V(t).forEach(function(n){e[n]=t[n]}),e}var dt=Object.getPrototypeOf,zo={}.hasOwnProperty;function re(e,t){return zo.call(e,t)}function Qe(e,t){typeof t=="function"&&(t=t(dt(e))),(typeof Reflect>"u"?V:Reflect.ownKeys)(t).forEach(function(n){be(e,n,t[n])})}var ii=Object.defineProperty;function be(e,t,n,r){ii(e,t,Z(n&&re(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Je(e){return{from:function(t){return e.prototype=Object.create(t.prototype),be(e.prototype,"constructor",e),{extend:Qe.bind(null,e.prototype)}}}}var qo=Object.getOwnPropertyDescriptor;function er(e,t){var n=qo(e,t),r;return n||(r=dt(e))&&er(r,t)}var Yo=[].slice;function sn(e,t,n){return Yo.call(e,t,n)}function oi(e,t){return t(e)}function rt(e){if(!e)throw new Error("Assertion Failed")}function ai(e){L.setImmediate?setImmediate(e):setTimeout(e,0)}function si(e,t){return e.reduce(function(n,r,i){var o=t(r,i);return o&&(n[o[0]]=o[1]),n},{})}function Xo(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function ge(e,t){if(re(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var o=ge(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(a!==-1){var s=e[t.substr(0,a)];return s===void 0?void 0:ge(s,t.substr(a+1))}}function ae(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){rt(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)ae(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var a=t.substr(0,o),s=t.substr(o+1);if(s==="")n===void 0?G(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var u=e[a];(!u||!re(e,a))&&(u=e[a]={}),ae(u,s,n)}}else n===void 0?G(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Go(e,t){typeof t=="string"?ae(e,t,void 0):"length"in t&&[].map.call(t,function(n){ae(e,n,void 0)})}function ui(e){var t={};for(var n in e)re(e,n)&&(t[n]=e[n]);return t}var Qo=[].concat;function li(e){return Qo.apply([],e)}var ci="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(li([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return L[e]}),Jo=ci.map(function(e){return L[e]});si(ci,function(e){return[e,!0]});var Ee=null;function xt(e){Ee=typeof WeakMap<"u"&&new WeakMap;var t=En(e);return Ee=null,t}function En(e){if(!e||typeof e!="object")return e;var t=Ee&&Ee.get(e);if(t)return t;if(G(e)){t=[],Ee&&Ee.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(En(e[n]))}else if(Jo.indexOf(e.constructor)>=0)t=e;else{var i=dt(e);t=i===Object.prototype?{}:Object.create(i),Ee&&Ee.set(e,t);for(var o in e)re(e,o)&&(t[o]=En(e[o]))}return t}var Zo={}.toString;function An(e){return Zo.call(e).slice(8,-1)}var Cn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ea=typeof Cn=="symbol"?function(e){var t;return e!=null&&(t=e[Cn])&&t.apply(e)}:function(){return null},qe={};function ye(e){var t,n,r,i;if(arguments.length===1){if(G(e))return e.slice();if(this===qe&&typeof e=="string")return[e];if(i=ea(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var tr=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},he=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function fi(e,t){he=e,di=t}var di=function(){return!0},ta=!new Error("").stack;function We(){if(ta)try{throw We.arguments,new Error}catch(e){return e}return new Error}function kn(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(di).map(function(r){return`
`+r}).join("")):""}var na=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],hi=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],nr=na.concat(hi),ra={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ze(e,t){this._e=We(),this.name=e,this.message=t}Je(Ze).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+kn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function pi(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function qt(e,t,n,r){this._e=We(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=pi(e,t)}Je(qt).from(Ze);function st(e,t){this._e=We(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=pi(e,t)}Je(st).from(Ze);var rr=nr.reduce(function(e,t){return e[t]=t+"Error",e},{}),ia=Ze,R=nr.reduce(function(e,t){var n=t+"Error";function r(i,o){this._e=We(),this.name=n,i?typeof i=="string"?(this.message=""+i+(o?`
 `+o:""),this.inner=o||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=ra[t]||n,this.inner=null)}return Je(r).from(ia),e[t]=r,e},{});R.Syntax=SyntaxError;R.Type=TypeError;R.Range=RangeError;var Sr=hi.reduce(function(e,t){return e[t+"Error"]=R[t],e},{});function oa(e,t){if(!e||e instanceof Ze||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Sr[e.name])return e;var n=new Sr[e.name](t||e.message,e);return"stack"in e&&be(n,"stack",{get:function(){return this.inner.stack}}),n}var un=nr.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=R[t]),e},{});un.ModifyError=qt;un.DexieError=Ze;un.BulkError=st;function B(){}function St(e){return e}function aa(e,t){return e==null||e===St?t:function(n){return t(e(n))}}function Ne(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function sa(e,t){return e===B?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ne(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ne(i,this.onerror):i),o!==void 0?o:n}}function ua(e,t){return e===B?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ne(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ne(r,this.onerror):r)}}function la(e,t){return e===B?t:function(n){var r=e.apply(this,arguments);Z(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ne(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Ne(o,this.onerror):o),r===void 0?a===void 0?void 0:a:Z(r,a)}}function ca(e,t){return e===B?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function ir(e,t){return e===B?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}var ht={},fa=100,da=20,vi=100,or=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,dt(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,dt(t),e]}(),Dn=or[0],Yt=or[1],Pn=or[2],yi=Yt&&Yt.then,Mt=Dn&&Dn.constructor,ar=!!Pn,Rn=!1,ha=Pn?function(){Pn.then(Rt)}:L.setImmediate?setImmediate.bind(null,Rt):L.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Rt(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Rt,0)},pt=function(e,t){it.push([e,t]),Xt&&(ha(),Xt=!1)},Tn=!0,Xt=!0,$e=[],Nt=[],In=null,Kn=St,Xe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Cr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{Cr(e[0],e[1])}catch{}})}},D=Xe,it=[],Be=0,Lt=[];function k(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=B,this._lib=!1;var t=this._PSD=D;if(he&&(this._stackHolder=We(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==ht)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&$n(this,this._value);return}this._state=null,this._value=null,++t.ref,gi(this,e)}var On={get:function(){var e=D,t=Gt;function n(r,i){var o=this,a=!e.global&&(e!==D||t!==Gt),s=a&&!we(),u=new k(function(l,c){sr(o,new mi(Jt(r,e,a,s),Jt(i,e,a,s),l,c,e))});return he&&_i(u,this),u}return n.prototype=ht,n},set:function(e){be(this,"then",e&&e.prototype===ht?On:{get:function(){return e},set:On.set})}};Qe(k.prototype,{then:On,_then:function(e,t){sr(this,new mi(null,null,e,t,D))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Ft(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Ft(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Ft(t)})},stack:{get:function(){if(this._stack)return this._stack;try{Rn=!0;var e=wi(this,[],da),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Rn=!1}}},timeout:function(e,t){var n=this;return e<1/0?new k(function(r,i){var o=setTimeout(function(){return i(new R.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&be(k.prototype,Symbol.toStringTag,"Dexie.Promise");Xe.env=xi();function mi(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}Qe(k,{all:function(){var e=ye.apply(null,arguments).map(Qt);return new k(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,o){return k.resolve(i).then(function(a){e[o]=a,--r||t(e)},n)})})},resolve:function(e){if(e instanceof k)return e;if(e&&typeof e.then=="function")return new k(function(n,r){e.then(n,r)});var t=new k(ht,!0,e);return _i(t,In),t},reject:Ft,race:function(){var e=ye.apply(null,arguments).map(Qt);return new k(function(t,n){e.map(function(r){return k.resolve(r).then(t,n)})})},PSD:{get:function(){return D},set:function(e){return D=e}},totalEchoes:{get:function(){return Gt}},newPSD:De,usePSD:tt,scheduler:{get:function(){return pt},set:function(e){pt=e}},rejectionMapper:{get:function(){return Kn},set:function(e){Kn=e}},follow:function(e,t){return new k(function(n,r){return De(function(i,o){var a=D;a.unhandleds=[],a.onunhandled=o,a.finalize=Ne(function(){var s=this;va(function(){s.unhandleds.length===0?i():o(s.unhandleds[0])})},a.finalize),e()},t,n,r)})}});Mt&&(Mt.allSettled&&be(k,"allSettled",function(){var e=ye.apply(null,arguments).map(Qt);return new k(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,o){return k.resolve(i).then(function(a){return r[o]={status:"fulfilled",value:a}},function(a){return r[o]={status:"rejected",reason:a}}).then(function(){return--n||t(r)})})})}),Mt.any&&typeof AggregateError<"u"&&be(k,"any",function(){var e=ye.apply(null,arguments).map(Qt);return new k(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(o,a){return k.resolve(o).then(function(s){return t(s)},function(s){i[a]=s,--r||n(new AggregateError(i))})})})}));function gi(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Et();n&&typeof n.then=="function"?gi(e,function(i,o){n instanceof k?n._then(i,o):n.then(i,o)}):(e._state=!0,e._value=n,bi(e)),r&&At()}},$n.bind(null,e))}catch(n){$n(e,n)}}function $n(e,t){if(Nt.push(t),e._state===null){var n=e._lib&&Et();t=Kn(t),e._state=!1,e._value=t,he&&t!==null&&typeof t=="object"&&!t._promise&&Xo(function(){var r=er(t,"stack");t._promise=e,be(t,"stack",{get:function(){return Rn?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),ya(e),bi(e),n&&At()}}function bi(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)sr(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Be===0&&(++Be,pt(function(){--Be===0&&ur()},[]))}function sr(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Be,pt(pa,[n,e,t])}function pa(e,t,n){try{In=t;var r,i=t._value;t._state?r=e(i):(Nt.length&&(Nt=[]),r=e(i),Nt.indexOf(i)===-1&&ma(t)),n.resolve(r)}catch(o){n.reject(o)}finally{In=null,--Be===0&&ur(),--n.psd.ref||n.psd.finalize()}}function wi(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,o,a;i!=null?(o=i.name||"Error",a=i.message||i,r=kn(i,0)):(o=i,a=""),t.push(o+(a?": "+a:"")+r)}return he&&(r=kn(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&wi(e._prev,t,n)),t}function _i(e,t){var n=t?t._numPrev+1:0;n<fa&&(e._prev=t,e._numPrev=n)}function Rt(){Et()&&At()}function Et(){var e=Tn;return Tn=!1,Xt=!1,e}function At(){var e,t,n;do for(;it.length>0;)for(e=it,it=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(it.length>0);Tn=!0,Xt=!0}function ur(){var e=$e;$e=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Lt.slice(0),n=t.length;n;)t[--n]()}function va(e){function t(){e(),Lt.splice(Lt.indexOf(t),1)}Lt.push(t),++Be,pt(function(){--Be===0&&ur()},[])}function ya(e){$e.some(function(t){return t._value===e._value})||$e.push(e)}function ma(e){for(var t=$e.length;t;)if($e[--t]._value===e._value){$e.splice(t,1);return}}function Ft(e){return new k(ht,!1,e)}function F(e,t){var n=D;return function(){var r=Et(),i=D;try{return Pe(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{Pe(i,!1),r&&At()}}}var X={awaits:0,echoes:0,id:0},ga=0,jt=[],hn=0,Gt=0,ba=0;function De(e,t,n,r){var i=D,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++ba;var a=Xe.env;o.env=ar?{Promise:k,PromiseProp:{value:k,configurable:!0,writable:!0},all:k.all,race:k.race,allSettled:k.allSettled,any:k.any,resolve:k.resolve,reject:k.reject,nthen:Er(a.nthen,o),gthen:Er(a.gthen,o)}:{},t&&Z(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=tt(o,e,n,r);return o.ref===0&&o.finalize(),s}function et(){return X.id||(X.id=++ga),++X.awaits,X.echoes+=vi,X.id}function we(){return X.awaits?(--X.awaits===0&&(X.id=0),X.echoes=X.awaits*vi,!0):!1}(""+yi).indexOf("[native code]")===-1&&(et=we=B);function Qt(e){return X.echoes&&e&&e.constructor===Mt?(et(),e.then(function(t){return we(),t},function(t){return we(),z(t)})):e}function wa(e){++Gt,(!X.echoes||--X.echoes===0)&&(X.echoes=X.id=0),jt.push(D),Pe(e,!0)}function _a(){var e=jt[jt.length-1];jt.pop(),Pe(e,!1)}function Pe(e,t){var n=D;if((t?X.echoes&&(!hn++||e!==D):hn&&(!--hn||e!==D))&&Si(t?wa.bind(null,e):_a),e!==D&&(D=e,n===Xe&&(Xe.env=xi()),ar)){var r=Xe.env.Promise,i=e.env;Yt.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(L,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function xi(){var e=L.Promise;return ar?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(L,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Yt.then,gthen:e.prototype.then}:{}}function tt(e,t,n,r,i){var o=D;try{return Pe(e,!0),t(n,r,i)}finally{Pe(o,!1)}}function Si(e){yi.call(Dn,e)}function Jt(e,t,n,r){return typeof e!="function"?e:function(){var i=D;n&&et(),Pe(t,!0);try{return e.apply(this,arguments)}finally{Pe(i,!1),r&&Si(we)}}}function Er(e,t){return function(n,r){return e.call(this,Jt(n,t),Jt(r,t))}}var Ar="unhandledrejection";function Cr(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(L.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Ar,!0,!0),Z(r,i)):L.CustomEvent&&(r=new CustomEvent(Ar,{detail:i}),Z(r,i)),r&&L.dispatchEvent&&(dispatchEvent(r),!L.PromiseRejectionEvent&&L.onunhandledrejection))try{L.onunhandledrejection(r)}catch{}he&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var z=k.reject;function Bn(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!D.letThrough&&!e._vip){if(e._state.openComplete)return z(new R.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return z(new R.DatabaseClosed);e.open().catch(B)}return e._state.dbReadyPromise.then(function(){return Bn(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===rr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Bn(e,t,n,r)})):z(o)}return i._promise(t,function(o,a){return De(function(){return D.trans=i,r(o,a,i)})}).then(function(o){return i._completion.then(function(){return o})})}}var kr="3.2.2",Ie=String.fromCharCode(65535),Mn=-1/0,pe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ei="String expected.",ut=[],ln=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),xa=ln,Sa=ln,Ai=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},cn="__dbnames",pn="readonly",vn="readwrite";function Le(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Ci={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Tt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=xt(t),delete t[e]),t}:function(t){return t}}var Ea=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||D.trans,o=this.name;function a(u,l,c){if(!c.schema[o])throw new R.NotFound("Table "+o+" not part of transaction");return n(c.idbtrans,c)}var s=Et();try{return i&&i.db===this.db?i===D.trans?i._promise(t,a,r):De(function(){return i._promise(t,a,r)},{trans:i,transless:D.transless||D}):Bn(this.db,t,[this.name],a)}finally{s&&At()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(o){return r.hook.reading.fire(o)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(G(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=V(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(c){return c.compound&&n.every(function(f){return c.keyPath.indexOf(f)>=0})&&c.keyPath.every(function(f){return n.indexOf(f)>=0})})[0];if(r&&this.db._maxKey!==Ie)return this.where(r.name).equals(r.keyPath.map(function(c){return t[c]}));!r&&he&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,o=this.db._deps.indexedDB;function a(c,f){try{return o.cmp(c,f)===0}catch{return!1}}var s=n.reduce(function(c,f){var d=c[0],g=c[1],h=i[f],v=t[f];return[d||h,d||!h?Le(g,h&&h.multi?function(b){var x=ge(b,f);return G(x)&&x.some(function(_){return a(v,_)})}:function(b){return a(v,ge(b,f))}):g]},[null,null]),u=s[0],l=s[1];return u?this.where(u.name).equals(t[u.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,G(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var o in r)if(re(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){Z(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,s=t;return a&&o&&(s=Tt(a)(t)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"add",keys:n!=null?[n]:null,values:[s]})}).then(function(u){return u.numFailures?k.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{ae(t,a,u)}catch{}return u})},e.prototype.update=function(t,n){if(typeof t=="object"&&!G(t)){var r=ge(t,this.schema.primKey.keyPath);if(r===void 0)return z(new R.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?V(n).forEach(function(i){ae(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,s=t;return a&&o&&(s=Tt(a)(t)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"put",values:[s],keys:n!=null?[n]:null})}).then(function(u){return u.numFailures?k.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{ae(t,a,u)}catch{}return u})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?k.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Ci})}).then(function(n){return n.numFailures?k.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(o){return n.hook.reading.fire(o)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,l=u.auto,c=u.keyPath;if(c&&o)throw new R.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new R.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,d=c&&l?t.map(Tt(c)):t;return i.core.mutate({trans:s,type:"add",keys:o,values:d,wantResults:a}).then(function(g){var h=g.numFailures,v=g.results,b=g.lastResult,x=g.failures,_=a?v:b;if(h===0)return _;throw new st(i.name+".bulkAdd(): "+h+" of "+f+" operations failed",x)})})},e.prototype.bulkPut=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,l=u.auto,c=u.keyPath;if(c&&o)throw new R.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new R.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,d=c&&l?t.map(Tt(c)):t;return i.core.mutate({trans:s,type:"put",keys:o,values:d,wantResults:a}).then(function(g){var h=g.numFailures,v=g.results,b=g.lastResult,x=g.failures,_=a?v:b;if(h===0)return _;throw new st(i.name+".bulkPut(): "+h+" of "+f+" operations failed",x)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var o=i.numFailures,a=i.lastResult,s=i.failures;if(o===0)return a;throw new st(n.name+".bulkDelete(): "+o+" of "+r+" operations failed",s)})},e}();function Ct(e){var t={},n=function(s,u){if(u){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return t[s].subscribe.apply(null,c),e}else if(typeof s=="string")return t[s]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(s,u,l){if(typeof s=="object")return a(s);u||(u=ca),l||(l=B);var c={subscribers:[],fire:l,subscribe:function(f){c.subscribers.indexOf(f)===-1&&(c.subscribers.push(f),c.fire=u(c.fire,f))},unsubscribe:function(f){c.subscribers=c.subscribers.filter(function(d){return d!==f}),c.fire=c.subscribers.reduce(u,l)}};return t[s]=n[s]=c,c}function a(s){V(s).forEach(function(u){var l=s[u];if(G(l))o(u,s[u][0],s[u][1]);else if(l==="asap")var c=o(u,St,function(){for(var d=arguments.length,g=new Array(d);d--;)g[d]=arguments[d];c.subscribers.forEach(function(h){ai(function(){h.apply(null,g)})})});else throw new R.InvalidArgument("Invalid event config")})}}function kt(e,t){return Je(t).from({prototype:e}),t}function Aa(e){return kt(Ea.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Ct(null,{creating:[sa,B],reading:[aa,St],updating:[la,B],deleting:[ua,B]})})}function He(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function yn(e,t){e.filter=Le(e.filter,t)}function mn(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Le(r(),t())}:t,e.justLimit=n&&!r}function Ca(e,t){e.isMatch=Le(e.isMatch,t)}function Wt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new R.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Dr(e,t,n){var r=Wt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function It(e,t,n,r){var i=e.replayFilter?Le(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(s,u,l){if(!i||i(u,l,function(d){return u.stop(d)},function(d){return u.fail(d)})){var c=u.primaryKey,f=""+c;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(c)),re(o,f)||(o[f]=!0,t(s,u,l))}};return Promise.all([e.or._iterate(a,n),Pr(Dr(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}else return Pr(Dr(e,r,n),Le(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Pr(e,t,n,r){var i=r?function(a,s,u){return n(r(a),s,u)}:n,o=F(i);return e.then(function(a){if(a)return a.start(function(){var s=function(){return a.continue()};(!t||t(a,function(u){return s=u},function(u){a.stop(u),s=B},function(u){a.fail(u),s=B}))&&o(a.value,a,function(u){return s=u}),s()})})}function J(e,t){try{var n=Rr(e),r=Rr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Da(Tr(e),Tr(t));case"Array":return ka(e,t)}}catch{}return NaN}function ka(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var a=J(e[o],t[o]);if(a!==0)return a}return n===r?0:n<r?-1:1}function Da(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}function Rr(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=An(e);return n==="ArrayBuffer"?"binary":n}function Tr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Pa=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,z.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,z.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Le(n.algorithm,t)},e.prototype._iterate=function(t,n){return It(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&Z(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return It(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,o=i.table.core;if(He(i,!0))return o.count({trans:r,query:{index:Wt(i,o.schema),range:i.range}}).then(function(s){return Math.min(s,i.limit)});var a=0;return It(i,function(){return++a,!1},r,o).then(function(){return a})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],o=r.length-1;function a(l,c){return c?a(l[r[c]],c-1):l[i]}var s=this._ctx.dir==="next"?1:-1;function u(l,c){var f=a(l,o),d=a(c,o);return f<d?-s:f>d?s:0}return this.toArray(function(l){return l.sort(u)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&He(i,!0)&&i.limit>0){var o=i.valueMapper,a=Wt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:a,range:i.range}}).then(function(u){var l=u.result;return o?l.map(o):l})}else{var s=[];return It(i,function(u){return s.push(u)},r,i.table.core).then(function(){return s})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,He(n)?mn(n,function(){var r=t;return function(i,o){return r===0?!0:r===1?(--r,!1):(o(function(){i.advance(r),r=0}),!1)}}):mn(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),mn(this._ctx,function(){var n=t;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this},e.prototype.until=function(t,n){return yn(this._ctx,function(r,i,o){return t(r.value)?(i(o),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return yn(this._ctx,function(n){return t(n.value)}),Ca(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&He(n,!0)&&n.limit>0)return this._read(function(i){var o=Wt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(i){var o=i.result;return o}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return yn(this._ctx,function(i){var o=i.primaryKey.toString(),a=re(r,o);return r[o]=!0,!a}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var o;if(typeof t=="function")o=t;else{var a=V(t),s=a.length;o=function(x){for(var _=!1,y=0;y<s;++y){var m=a[y],p=t[m];ge(x,m)!==p&&(ae(x,m,p),_=!0)}return _}}var u=r.table.core,l=u.schema.primaryKey,c=l.outbound,f=l.extractKey,d=n.db._options.modifyChunkSize||200,g=[],h=0,v=[],b=function(x,_){var y=_.failures,m=_.numFailures;h+=x-m;for(var p=0,w=V(y);p<w.length;p++){var C=w[p];g.push(y[C])}};return n.clone().primaryKeys().then(function(x){var _=function(y){var m=Math.min(d,x.length-y);return u.getMany({trans:i,keys:x.slice(y,y+m),cache:"immutable"}).then(function(p){for(var w=[],C=[],E=c?[]:null,S=[],A=0;A<m;++A){var T=p[A],O={value:xt(T),primKey:x[y+A]};o.call(O,O.value,O)!==!1&&(O.value==null?S.push(x[y+A]):!c&&J(f(T),f(O.value))!==0?(S.push(x[y+A]),w.push(O.value)):(C.push(O.value),c&&E.push(x[y+A])))}var I=He(r)&&r.limit===1/0&&(typeof t!="function"||t===gn)&&{index:r.index,range:r.range};return Promise.resolve(w.length>0&&u.mutate({trans:i,type:"add",values:w}).then(function(j){for(var P in j.failures)S.splice(parseInt(P),1);b(w.length,j)})).then(function(){return(C.length>0||I&&typeof t=="object")&&u.mutate({trans:i,type:"put",keys:E,values:C,criteria:I,changeSpec:typeof t!="function"&&t}).then(function(j){return b(C.length,j)})}).then(function(){return(S.length>0||I&&t===gn)&&u.mutate({trans:i,type:"delete",keys:S,criteria:I}).then(function(j){return b(S.length,j)})}).then(function(){return x.length>y+m&&_(y+d)})})};return _(0).then(function(){if(g.length>0)throw new qt("Error modifying one or more objects",g,h,v);return x.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return He(t)&&(t.isPrimKey&&!Sa||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,o=n;return t.table.core.count({trans:r,query:{index:i,range:o}}).then(function(a){return t.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(function(s){var u=s.failures;s.lastResult,s.results;var l=s.numFailures;if(l)throw new qt("Could not delete some values",Object.keys(u).map(function(c){return u[c]}),a-l);return a-l})})}):this.modify(gn)},e}(),gn=function(e,t){return t.value=null};function Ra(e){return kt(Pa.prototype,function(n,r){this.db=e;var i=Ci,o=null;if(r)try{i=r()}catch(l){o=l}var a=n._ctx,s=a.table,u=s.hook.reading.fire;this._ctx={table:s,index:a.index,isPrimKey:!a.index||s.schema.primKey.keyPath&&a.index===s.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:a.or,valueMapper:u!==St?u:null}})}function Ta(e,t){return e<t?-1:e===t?0:1}function Ia(e,t){return e>t?-1:e===t?0:1}function ne(e,t,n){var r=e instanceof Di?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function ze(e){return new e.Collection(e,function(){return ki("")}).limit(0)}function Ka(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Oa(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function $a(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,u=0;u<a;++u){var l=t[u];if(l!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[u],l)<0&&(s=u)}return a<r.length&&o==="next"?e+n.substr(e.length):a<e.length&&o==="prev"?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function Kt(e,t,n,r){var i,o,a,s,u,l,c,f=n.length;if(!n.every(function(v){return typeof v=="string"}))return ne(e,Ei);function d(v){i=Ka(v),o=Oa(v),a=v==="next"?Ta:Ia;var b=n.map(function(x){return{lower:o(x),upper:i(x)}}).sort(function(x,_){return a(x.lower,_.lower)});s=b.map(function(x){return x.upper}),u=b.map(function(x){return x.lower}),l=v,c=v==="next"?"":r}d("next");var g=new e.Collection(e,function(){return Se(s[0],u[f-1]+r)});g._ondirectionchange=function(v){d(v)};var h=0;return g._addAlgorithm(function(v,b,x){var _=v.key;if(typeof _!="string")return!1;var y=o(_);if(t(y,u,h))return!0;for(var m=null,p=h;p<f;++p){var w=$a(_,y,s[p],u[p],a,l);w===null&&m===null?h=p+1:(m===null||a(m,w)>0)&&(m=w)}return b(m!==null?function(){v.continue(m+c)}:x),!1}),g}function Se(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function ki(e){return{type:1,lower:e,upper:e}}var Di=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?ze(this):new this.Collection(this,function(){return Se(t,n,!r,!i)})}catch{return ne(this,pe)}},e.prototype.equals=function(t){return t==null?ne(this,pe):new this.Collection(this,function(){return ki(t)})},e.prototype.above=function(t){return t==null?ne(this,pe):new this.Collection(this,function(){return Se(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?ne(this,pe):new this.Collection(this,function(){return Se(t,void 0,!1)})},e.prototype.below=function(t){return t==null?ne(this,pe):new this.Collection(this,function(){return Se(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?ne(this,pe):new this.Collection(this,function(){return Se(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?ne(this,Ei):this.between(t,t+Ie,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Kt(this,function(n,r){return n.indexOf(r[0])===0},[t],Ie)},e.prototype.equalsIgnoreCase=function(t){return Kt(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=ye.apply(qe,arguments);return t.length===0?ze(this):Kt(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=ye.apply(qe,arguments);return t.length===0?ze(this):Kt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,Ie)},e.prototype.anyOf=function(){var t=this,n=ye.apply(qe,arguments),r=this._cmp;try{n.sort(r)}catch{return ne(this,pe)}if(n.length===0)return ze(this);var i=new this.Collection(this,function(){return Se(n[0],n[n.length-1])});i._ondirectionchange=function(a){r=a==="next"?t._ascending:t._descending,n.sort(r)};var o=0;return i._addAlgorithm(function(a,s,u){for(var l=a.key;r(l,n[o])>0;)if(++o,o===n.length)return s(u),!1;return r(l,n[o])===0?!0:(s(function(){a.continue(n[o])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[Mn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=ye.apply(qe,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return ne(this,pe)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Mn,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,o=this._ascending,a=this._descending,s=this._min,u=this._max;if(t.length===0)return ze(this);if(!t.every(function(p){return p[0]!==void 0&&p[1]!==void 0&&o(p[0],p[1])<=0}))return ne(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",R.InvalidArgument);var l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;function f(p,w){for(var C=0,E=p.length;C<E;++C){var S=p[C];if(i(w[0],S[1])<0&&i(w[1],S[0])>0){S[0]=s(S[0],w[0]),S[1]=u(S[1],w[1]);break}}return C===E&&p.push(w),p}var d=o;function g(p,w){return d(p[0],w[0])}var h;try{h=t.reduce(f,[]),h.sort(g)}catch{return ne(this,pe)}var v=0,b=c?function(p){return o(p,h[v][1])>0}:function(p){return o(p,h[v][1])>=0},x=l?function(p){return a(p,h[v][0])>0}:function(p){return a(p,h[v][0])>=0};function _(p){return!b(p)&&!x(p)}var y=b,m=new this.Collection(this,function(){return Se(h[0][0],h[h.length-1][1],!l,!c)});return m._ondirectionchange=function(p){p==="next"?(y=b,d=o):(y=x,d=a),h.sort(g)},m._addAlgorithm(function(p,w,C){for(var E=p.key;y(E);)if(++v,v===h.length)return w(C),!1;return _(E)?!0:(r._cmp(E,h[v][1])===0||r._cmp(E,h[v][0])===0||w(function(){d===o?p.continue(h[v][0]):p.continue(h[v][1])}),!1)}),m},e.prototype.startsWithAnyOf=function(){var t=ye.apply(qe,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?ze(this):this.inAnyRange(t.map(function(n){return[n,n+Ie]})):ne(this,"startsWithAnyOf() only works with strings")},e}();function Ba(e){return kt(Di.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var o=e._deps.indexedDB;if(!o)throw new R.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(a,s){return o.cmp(s,a)},this._max=function(a,s){return o.cmp(a,s)>0?a:s},this._min=function(a,s){return o.cmp(a,s)<0?a:s},this._IDBKeyRange=e._deps.IDBKeyRange})}function fe(e){return F(function(t){return vt(t),e(t.target.error),!1})}function vt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var yt="storagemutated",Ce="x-storagemutated-1",Re=Ct(null,yt),Ma=function(){function e(){}return e.prototype._lock=function(){return rt(!D.global),++this._reculock,this._reculock===1&&!D.global&&(D.lockOwnerFor=this),this},e.prototype._unlock=function(){if(rt(!D.global),--this._reculock===0)for(D.global||(D.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{tt(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&D.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(rt(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new R.DatabaseClosed(i);case"MissingAPIError":throw new R.MissingAPI(i.message,i);default:throw new R.OpenFailed(i)}if(!this.active)throw new R.TransactionInactive;return rt(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=F(function(o){vt(o),n._reject(t.error)}),t.onabort=F(function(o){vt(o),n.active&&n._reject(new R.Abort(t.error)),n.active=!1,n.on("abort").fire(o)}),t.oncomplete=F(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Re.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return z(new R.ReadOnly("Transaction is readonly"));if(!this.active)return z(new R.TransactionInactive);if(this._locked())return new k(function(a,s){i._blockedFuncs.push([function(){i._promise(t,n,r).then(a,s)},D])});if(r)return De(function(){var a=new k(function(s,u){i._lock();var l=n(s,u,i);l&&l.then&&l.then(s,u)});return a.finally(function(){return i._unlock()}),a._lib=!0,a});var o=new k(function(a,s){var u=n(a,s,i);u&&u.then&&u.then(a,s)});return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=k.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var o=n._waitingFor;return new k(function(a,s){r.then(function(u){return n._waitingQueue.push(F(a.bind(null,u)))},function(u){return n._waitingQueue.push(F(s.bind(null,u)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new R.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(re(n,t))return n[t];var r=this.schema[t];if(!r)throw new R.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function Na(e){return kt(Ma.prototype,function(n,r,i,o,a){var s=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=Ct(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new k(function(u,l){s._resolve=u,s._reject=l}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(u){var l=s.active;return s.active=!1,s.on.error.fire(u),s.parent?s.parent._reject(u):l&&s.idbtrans&&s.idbtrans.abort(),z(u)})})}function Nn(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+Pi(t)}}function Pi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Ri(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:si(n,function(r){return[r.name,r]})}}function La(e){return e.length===1?e[0]:e}var mt=function(e){try{return e.only([[]]),mt=function(){return[[]]},[[]]}catch{return mt=function(){return Ie},Ie}};function Ln(e){return e==null?function(){}:typeof e=="string"?Fa(e):function(t){return ge(t,e)}}function Fa(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return ge(n,e)}}function Ir(e){return[].slice.call(e)}var ja=0;function lt(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function Wa(e,t,n){function r(f,d){var g=Ir(f.objectStoreNames);return{schema:{name:f.name,tables:g.map(function(h){return d.objectStore(h)}).map(function(h){var v=h.keyPath,b=h.autoIncrement,x=G(v),_=v==null,y={},m={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_,compound:x,keyPath:v,autoIncrement:b,unique:!0,extractKey:Ln(v)},indexes:Ir(h.indexNames).map(function(p){return h.index(p)}).map(function(p){var w=p.name,C=p.unique,E=p.multiEntry,S=p.keyPath,A=G(S),T={name:w,compound:A,keyPath:S,unique:C,multiEntry:E,extractKey:Ln(S)};return y[lt(S)]=T,T}),getIndexByKeyPath:function(p){return y[lt(p)]}};return y[":id"]=m.primaryKey,v!=null&&(y[lt(v)]=m.primaryKey),m})},hasGetAll:g.length>0&&"getAll"in d.objectStore(g[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var d=f.lower,g=f.upper,h=f.lowerOpen,v=f.upperOpen,b=d===void 0?g===void 0?null:t.upperBound(g,!!v):g===void 0?t.lowerBound(d,!!h):t.bound(d,g,!!h,!!v);return b}function o(f){var d=f.name;function g(b){var x=b.trans,_=b.type,y=b.keys,m=b.values,p=b.range;return new Promise(function(w,C){w=F(w);var E=x.objectStore(d),S=E.keyPath==null,A=_==="put"||_==="add";if(!A&&_!=="delete"&&_!=="deleteRange")throw new Error("Invalid operation type: "+_);var T=(y||m||{length:1}).length;if(y&&m&&y.length!==m.length)throw new Error("Given keys array must have same length as given values array.");if(T===0)return w({numFailures:0,failures:{},results:[],lastResult:void 0});var O,I=[],j=[],P=0,H=function(le){++P,vt(le)};if(_==="deleteRange"){if(p.type===4)return w({numFailures:P,failures:j,results:[],lastResult:void 0});p.type===3?I.push(O=E.clear()):I.push(O=E.delete(i(p)))}else{var q=A?S?[m,y]:[m,null]:[y,null],te=q[0],ue=q[1];if(A)for(var ie=0;ie<T;++ie)I.push(O=ue&&ue[ie]!==void 0?E[_](te[ie],ue[ie]):E[_](te[ie])),O.onerror=H;else for(var ie=0;ie<T;++ie)I.push(O=E[_](te[ie])),O.onerror=H}var xe=function(le){var nt=le.target.result;I.forEach(function(oe,Dt){return oe.error!=null&&(j[Dt]=oe.error)}),w({numFailures:P,failures:j,results:_==="delete"?y:I.map(function(oe){return oe.result}),lastResult:nt})};O.onerror=function(le){H(le),xe(le)},O.onsuccess=xe})}function h(b){var x=b.trans,_=b.values,y=b.query,m=b.reverse,p=b.unique;return new Promise(function(w,C){w=F(w);var E=y.index,S=y.range,A=x.objectStore(d),T=E.isPrimaryKey?A:A.index(E.name),O=m?p?"prevunique":"prev":p?"nextunique":"next",I=_||!("openKeyCursor"in T)?T.openCursor(i(S),O):T.openKeyCursor(i(S),O);I.onerror=fe(C),I.onsuccess=F(function(j){var P=I.result;if(!P){w(null);return}P.___id=++ja,P.done=!1;var H=P.continue.bind(P),q=P.continuePrimaryKey;q&&(q=q.bind(P));var te=P.advance.bind(P),ue=function(){throw new Error("Cursor not started")},ie=function(){throw new Error("Cursor not stopped")};P.trans=x,P.stop=P.continue=P.continuePrimaryKey=P.advance=ue,P.fail=F(C),P.next=function(){var xe=this,le=1;return this.start(function(){return le--?xe.continue():xe.stop()}).then(function(){return xe})},P.start=function(xe){var le=new Promise(function(oe,Dt){oe=F(oe),I.onerror=fe(Dt),P.fail=Dt,P.stop=function(Ni){P.stop=P.continue=P.continuePrimaryKey=P.advance=ie,oe(Ni)}}),nt=function(){if(I.result)try{xe()}catch(oe){P.fail(oe)}else P.done=!0,P.start=function(){throw new Error("Cursor behind last entry")},P.stop()};return I.onsuccess=F(function(oe){I.onsuccess=nt,nt()}),P.continue=H,P.continuePrimaryKey=q,P.advance=te,nt(),le},w(P)},C)})}function v(b){return function(x){return new Promise(function(_,y){_=F(_);var m=x.trans,p=x.values,w=x.limit,C=x.query,E=w===1/0?void 0:w,S=C.index,A=C.range,T=m.objectStore(d),O=S.isPrimaryKey?T:T.index(S.name),I=i(A);if(w===0)return _({result:[]});if(b){var j=p?O.getAll(I,E):O.getAllKeys(I,E);j.onsuccess=function(te){return _({result:te.target.result})},j.onerror=fe(y)}else{var P=0,H=p||!("openKeyCursor"in O)?O.openCursor(I):O.openKeyCursor(I),q=[];H.onsuccess=function(te){var ue=H.result;if(!ue)return _({result:q});if(q.push(p?ue.value:ue.primaryKey),++P===w)return _({result:q});ue.continue()},H.onerror=fe(y)}})}}return{name:d,schema:f,mutate:g,getMany:function(b){var x=b.trans,_=b.keys;return new Promise(function(y,m){y=F(y);for(var p=x.objectStore(d),w=_.length,C=new Array(w),E=0,S=0,A,T=function(P){var H=P.target;(C[H._pos]=H.result)!=null,++S===E&&y(C)},O=fe(m),I=0;I<w;++I){var j=_[I];j!=null&&(A=p.get(_[I]),A._pos=I,A.onsuccess=T,A.onerror=O,++E)}E===0&&y(C)})},get:function(b){var x=b.trans,_=b.key;return new Promise(function(y,m){y=F(y);var p=x.objectStore(d),w=p.get(_);w.onsuccess=function(C){return y(C.target.result)},w.onerror=fe(m)})},query:v(u),openCursor:h,count:function(b){var x=b.query,_=b.trans,y=x.index,m=x.range;return new Promise(function(p,w){var C=_.objectStore(d),E=y.isPrimaryKey?C:C.index(y.name),S=i(m),A=S?E.count(S):E.count();A.onsuccess=F(function(T){return p(T.target.result)}),A.onerror=fe(w)})}}}var a=r(e,n),s=a.schema,u=a.hasGetAll,l=s.tables.map(function(f){return o(f)}),c={};return l.forEach(function(f){return c[f.name]=f}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(f){var d=c[f];if(!d)throw new Error("Table '"+f+"' not found");return c[f]},MIN_KEY:-1/0,MAX_KEY:mt(t),schema:s}}function Ua(e,t){return t.reduce(function(n,r){var i=r.create;return K(K({},n),i(n))},e)}function Va(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var o=Ua(Wa(t,i,r),e.dbcore);return{dbcore:o}}function lr(e,t){var n=e._novip,r=t.db,i=Va(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(o){var a=o.name;n.core.schema.tables.some(function(s){return s.name===a})&&(o.core=n.core.table(a),n[a]instanceof n.Table&&(n[a].core=o.core))})}function Zt(e,t,n,r){var i=e._novip;n.forEach(function(o){var a=r[o];t.forEach(function(s){var u=er(s,o);(!u||"value"in u&&u.value===void 0)&&(s===i.Transaction.prototype||s instanceof i.Transaction?be(s,o,{get:function(){return this.table(o)},set:function(l){ii(this,o,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):s[o]=new i.Table(o,a))})})}function Fn(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function Ha(e,t){return e._cfg.version-t._cfg.version}function za(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),s=D.transless||D;De(function(){D.trans=o,D.transless=s,t===0?(V(i).forEach(function(u){cr(n,u,i[u].primKey,i[u].indexes)}),lr(e,n),k.follow(function(){return e.on.populate.fire(o)}).catch(a)):qa(e,t,o,n).catch(a)})}function qa(e,t,n,r){var i=e._novip,o=[],a=i._versions,s=i._dbSchema=fr(i,i.idbdb,r),u=!1,l=a.filter(function(f){return f._cfg.version>=t});l.forEach(function(f){o.push(function(){var d=s,g=f._cfg.dbschema;Wn(i,d,r),Wn(i,g,r),s=i._dbSchema=g;var h=Ti(d,g);h.add.forEach(function(m){cr(r,m[0],m[1].primKey,m[1].indexes)}),h.change.forEach(function(m){if(m.recreate)throw new R.Upgrade("Not yet support for changing primary key");var p=r.objectStore(m.name);m.add.forEach(function(w){return jn(p,w)}),m.change.forEach(function(w){p.deleteIndex(w.name),jn(p,w)}),m.del.forEach(function(w){return p.deleteIndex(w)})});var v=f._cfg.contentUpgrade;if(v&&f._cfg.version>t){lr(i,r),n._memoizedTables={},u=!0;var b=ui(g);h.del.forEach(function(m){b[m]=d[m]}),Fn(i,[i.Transaction.prototype]),Zt(i,[i.Transaction.prototype],V(b),b),n.schema=b;var x=tr(v);x&&et();var _,y=k.follow(function(){if(_=v(n),_&&x){var m=we.bind(null,null);_.then(m,m)}});return _&&typeof _.then=="function"?k.resolve(_):y.then(function(){return _})}}),o.push(function(d){if(!u||!xa){var g=f._cfg.dbschema;Xa(g,d)}Fn(i,[i.Transaction.prototype]),Zt(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function c(){return o.length?k.resolve(o.shift()(n.idbtrans)).then(c):k.resolve()}return c().then(function(){Ya(s,r)})}function Ti(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(!i)n.add.push([r,o]);else{var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!ln)a.recreate=!0,n.change.push(a);else{var s=i.idxByName,u=o.idxByName,l=void 0;for(l in s)u[l]||a.del.push(l);for(l in u){var c=s[l],f=u[l];c?c.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}}return n}function cr(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(o){return jn(i,o)}),i}function Ya(e,t){V(e).forEach(function(n){t.db.objectStoreNames.contains(n)||cr(t,n,e[n].primKey,e[n].indexes)})}function Xa(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function jn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function fr(e,t,n){var r={},i=sn(t.objectStoreNames,0);return i.forEach(function(o){for(var a=n.objectStore(o),s=a.keyPath,u=Nn(Pi(s),s||"",!1,!1,!!a.autoIncrement,s&&typeof s!="string",!0),l=[],c=0;c<a.indexNames.length;++c){var f=a.index(a.indexNames[c]);s=f.keyPath;var d=Nn(f.name,s,!!f.unique,!!f.multiEntry,!1,s&&typeof s!="string",!1);l.push(d)}r[o]=Ri(o,u,l)}),r}function Ga(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=fr(r,t,n);r._storeNames=sn(t.objectStoreNames,0),Zt(r,[r._allTables],V(i),i)}function Qa(e,t){var n=fr(e,e.idbdb,t),r=Ti(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Wn(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,o=0;o<i.length;++o){var a=i[o],s=n.objectStore(a);r._hasGetAll="getAll"in s;for(var u=0;u<s.indexNames.length;++u){var l=s.indexNames[u],c=s.index(l).keyPath,f=typeof c=="string"?c:"["+sn(c).join("+")+"]";if(t[a]){var d=t[a].idxByName[f];d&&(d.name=l,delete t[a].idxByName[f],t[a].idxByName[l]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&L.WorkerGlobalScope&&L instanceof L.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function Ja(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Nn(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),G(i),n===0)})}var Za=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){V(t).forEach(function(r){if(t[r]!==null){var i=Ja(t[r]),o=i.shift();if(o.multi)throw new R.Schema("Primary key cannot be multi-valued");i.forEach(function(a){if(a.auto)throw new R.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new R.Schema("Index must have a name and cannot be an empty string")}),n[r]=Ri(r,o,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?Z(this._cfg.storesSource,t):t;var r=n._versions,i={},o={};return r.forEach(function(a){Z(i,a._cfg.storesSource),o=a._cfg.dbschema={},a._parseStoresSpec(i,o)}),n._dbSchema=o,Fn(n,[n._allTables,n,n.Transaction.prototype]),Zt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],V(o),o),n._storeNames=V(o),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=ir(this._cfg.contentUpgrade||B,t),this},e}();function es(e){return kt(Za.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function dr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new yr(cn,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function hr(e){return e&&typeof e.databases=="function"}function ts(e){var t=e.indexedDB,n=e.IDBKeyRange;return hr(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==cn})}):dr(t,n).toCollection().primaryKeys()}function ns(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!hr(n)&&t!==cn&&dr(n,r).put({name:t}).catch(B)}function rs(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!hr(n)&&t!==cn&&dr(n,r).delete(t).catch(B)}function Un(e){return De(function(){return D.letThrough=!0,e()})}function is(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function os(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?z(t.dbOpenError):e});he&&(t.openCanceller._stackHolder=We()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new R.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,a=null,s=!1;return k.race([r,(typeof navigator>"u"?k.resolve():is()).then(function(){return new k(function(u,l){if(i(),!n)throw new R.MissingAPI;var c=e.name,f=t.autoSchema?n.open(c):n.open(c,Math.round(e.verno*10));if(!f)throw new R.MissingAPI;f.onerror=fe(l),f.onblocked=F(e._fireOnBlocked),f.onupgradeneeded=F(function(d){if(a=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=vt,a.abort(),f.result.close();var g=n.deleteDatabase(c);g.onsuccess=g.onerror=F(function(){l(new R.NoSuchDatabase("Database "+c+" doesnt exist"))})}else{a.onerror=fe(l);var h=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;s=h<1,e._novip.idbdb=f.result,za(e,h/10,a,l)}},l),f.onsuccess=F(function(){a=null;var d=e._novip.idbdb=f.result,g=sn(d.objectStoreNames);if(g.length>0)try{var h=d.transaction(La(g),"readonly");t.autoSchema?Ga(e,d,h):(Wn(e,e._dbSchema,h),Qa(e,h)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),lr(e,h)}catch{}ut.push(e),d.onversionchange=F(function(v){t.vcFired=!0,e.on("versionchange").fire(v)}),d.onclose=F(function(v){e.on("close").fire(v)}),s&&ns(e._deps,c),u()},l)})})]).then(function(){return i(),t.onReadyBeingFired=[],k.resolve(Un(function(){return e.on.ready.fire(e.vip)})).then(function u(){if(t.onReadyBeingFired.length>0){var l=t.onReadyBeingFired.reduce(ir,B);return t.onReadyBeingFired=[],k.resolve(Un(function(){return l(e.vip)})).then(u)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(u){t.dbOpenError=u;try{a&&a.abort()}catch{}return r===t.openCanceller&&e._close(),z(u)}).finally(function(){t.openComplete=!0,o()})}function Vn(e){var t=function(a){return e.next(a)},n=function(a){return e.throw(a)},r=o(t),i=o(n);function o(a){return function(s){var u=a(s),l=u.value;return u.done?l:!l||typeof l.then!="function"?G(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return o(t)()}function as(e,t,n){var r=arguments.length;if(r<2)throw new R.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=li(i);return[e,o,n]}function Ii(e,t,n,r,i){return k.resolve().then(function(){var o=D.transless||D,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===rr.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Ii(e,t,n,null,i)})):z(f)}var u=tr(i);u&&et();var l,c=k.follow(function(){if(l=i.call(a,a),l)if(u){var f=we.bind(null,null);l.then(f,f)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=Vn(l))},s);return(l&&typeof l.then=="function"?k.resolve(l).then(function(f){return a.active?f:z(new R.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return l})).then(function(f){return r&&a._resolve(),a._completion.then(function(){return f})}).catch(function(f){return a._reject(f),z(f)})})}function Ot(e,t,n){for(var r=G(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function ss(e){return K(K({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},o=[];function a(v,b,x){var _=lt(v),y=i[_]=i[_]||[],m=v==null?0:typeof v=="string"?1:v.length,p=b>0,w=K(K({},x),{isVirtual:p,keyTail:b,keyLength:m,extractKey:Ln(v),unique:!p&&x.unique});if(y.push(w),w.isPrimaryKey||o.push(w),m>1){var C=m===2?v[0]:v.slice(0,m-1);a(C,b+1,x)}return y.sort(function(E,S){return E.keyTail-S.keyTail}),w}var s=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];for(var u=0,l=r.indexes;u<l.length;u++){var c=l[u];a(c.keyPath,0,c)}function f(v){var b=i[lt(v)];return b&&b[0]}function d(v,b){return{type:v.type===1?2:v.type,lower:Ot(v.lower,v.lowerOpen?e.MAX_KEY:e.MIN_KEY,b),lowerOpen:!0,upper:Ot(v.upper,v.upperOpen?e.MIN_KEY:e.MAX_KEY,b),upperOpen:!0}}function g(v){var b=v.query.index;return b.isVirtual?K(K({},v),{query:{index:b,range:d(v.query.range,b.keyTail)}}):v}var h=K(K({},n),{schema:K(K({},r),{primaryKey:s,indexes:o,getIndexByKeyPath:f}),count:function(v){return n.count(g(v))},query:function(v){return n.query(g(v))},openCursor:function(v){var b=v.query.index,x=b.keyTail,_=b.isVirtual,y=b.keyLength;if(!_)return n.openCursor(v);function m(p){function w(E){E!=null?p.continue(Ot(E,v.reverse?e.MAX_KEY:e.MIN_KEY,x)):v.unique?p.continue(p.key.slice(0,y).concat(v.reverse?e.MIN_KEY:e.MAX_KEY,x)):p.continue()}var C=Object.create(p,{continue:{value:w},continuePrimaryKey:{value:function(E,S){p.continuePrimaryKey(Ot(E,e.MAX_KEY,x),S)}},primaryKey:{get:function(){return p.primaryKey}},key:{get:function(){var E=p.key;return y===1?E[0]:E.slice(0,y)}},value:{get:function(){return p.value}}});return C}return n.openCursor(g(v)).then(function(p){return p&&m(p)})}});return h}})}var us={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:ss};function pr(e,t,n,r){return n=n||{},r=r||"",V(e).forEach(function(i){if(!re(t,i))n[r+i]=void 0;else{var o=e[i],a=t[i];if(typeof o=="object"&&typeof a=="object"&&o&&a){var s=An(o),u=An(a);s!==u?n[r+i]=t[i]:s==="Object"?pr(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i])}else o!==a&&(n[r+i]=t[i])}}),V(t).forEach(function(i){re(e,i)||(n[r+i]=t[i])}),n}function ls(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var cs={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return K(K({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=K(K({},n),{mutate:function(o){var a=D.trans,s=a.table(t).hook,u=s.deleting,l=s.creating,c=s.updating;switch(o.type){case"add":if(l.fire===B)break;return a._promise("readwrite",function(){return f(o)},!0);case"put":if(l.fire===B&&c.fire===B)break;return a._promise("readwrite",function(){return f(o)},!0);case"delete":if(u.fire===B)break;return a._promise("readwrite",function(){return f(o)},!0);case"deleteRange":if(u.fire===B)break;return a._promise("readwrite",function(){return d(o)},!0)}return n.mutate(o);function f(h){var v=D.trans,b=h.keys||ls(r,h);if(!b)throw new Error("Keys missing");return h=h.type==="add"||h.type==="put"?K(K({},h),{keys:b}):K({},h),h.type!=="delete"&&(h.values=Sn([],h.values,!0)),h.keys&&(h.keys=Sn([],h.keys,!0)),fs(n,h,b).then(function(x){var _=b.map(function(y,m){var p=x[m],w={onerror:null,onsuccess:null};if(h.type==="delete")u.fire.call(w,y,p,v);else if(h.type==="add"||p===void 0){var C=l.fire.call(w,y,h.values[m],v);y==null&&C!=null&&(y=C,h.keys[m]=y,r.outbound||ae(h.values[m],r.keyPath,y))}else{var E=pr(p,h.values[m]),S=c.fire.call(w,E,y,p,v);if(S){var A=h.values[m];Object.keys(S).forEach(function(T){re(A,T)?A[T]=S[T]:ae(A,T,S[T])})}}return w});return n.mutate(h).then(function(y){for(var m=y.failures,p=y.results,w=y.numFailures,C=y.lastResult,E=0;E<b.length;++E){var S=p?p[E]:b[E],A=_[E];S==null?A.onerror&&A.onerror(m[E]):A.onsuccess&&A.onsuccess(h.type==="put"&&x[E]?h.values[E]:S)}return{failures:m,results:p,numFailures:w,lastResult:C}}).catch(function(y){return _.forEach(function(m){return m.onerror&&m.onerror(y)}),Promise.reject(y)})})}function d(h){return g(h.trans,h.range,1e4)}function g(h,v,b){return n.query({trans:h,values:!1,query:{index:r,range:v},limit:b}).then(function(x){var _=x.result;return f({type:"delete",keys:_,trans:h}).then(function(y){return y.numFailures>0?Promise.reject(y.failures[0]):_.length<b?{failures:[],numFailures:0,lastResult:void 0}:g(h,K(K({},v),{lower:_[_.length-1],lowerOpen:!0}),b)})})}}});return i}})}};function fs(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Ki(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)J(t.keys[i],e[o])===0&&(r.push(n?xt(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch{return null}}var ds={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return K(K({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Ki(r.keys,r.trans._cache,r.cache==="clone");return i?k.resolve(i):n.getMany(r).then(function(o){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?xt(o):o},o})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},bn;function vr(e){return!("from"in e)}var ve=function(e,t){if(this)Z(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new ve;return e&&"d"in e&&Z(n,e),n}};Qe(ve.prototype,(bn={add:function(e){return en(this,e),this},addKey:function(e){return gt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return gt(t,n,n)}),this}},bn[Cn]=function(){return Hn(this)},bn));function gt(e,t,n){var r=J(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(vr(e))return Z(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(J(n,e.from)<0)return i?gt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Kr(e);if(J(t,e.to)>0)return o?gt(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Kr(e);J(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),J(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;i&&!e.l&&en(e,i),o&&a&&en(e,o)}}function en(e,t){function n(r,i){var o=i.from,a=i.to,s=i.l,u=i.r;gt(r,o,a),s&&n(r,s),u&&n(r,u)}vr(t)||n(e,t)}function hs(e,t){var n=Hn(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=Hn(e),a=o.next(i.from),s=a.value;!r.done&&!a.done;){if(J(s.from,i.to)<=0&&J(s.to,i.from)>=0)return!0;J(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(a=o.next(i.from)).value}return!1}function Hn(e){var t=vr(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&J(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||J(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Kr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var o=i==="r"?"l":"r",a=K({},e),s=e[i];e.from=s.from,e.to=s.to,e[i]=s[i],a[i]=s[o],e[o]=a,a.d=Or(a)}e.d=Or(e)}function Or(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var ps={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new ve(e.MIN_KEY,e.MAX_KEY);return K(K({},e),{table:function(r){var i=e.table(r),o=i.schema,a=o.primaryKey,s=a.extractKey,u=a.outbound,l=K(K({},i),{mutate:function(d){var g=d.trans,h=g.mutatedParts||(g.mutatedParts={}),v=function(C){var E="idb://"+t+"/"+r+"/"+C;return h[E]||(h[E]=new ve)},b=v(""),x=v(":dels"),_=d.type,y=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[],m=y[0],p=y[1],w=d.trans._cache;return i.mutate(d).then(function(C){if(G(m)){_!=="delete"&&(m=C.results),b.addKeys(m);var E=Ki(m,w);!E&&_!=="add"&&x.addKeys(m),(E||p)&&vs(v,o,E,p)}else if(m){var S={from:m.lower,to:m.upper};x.add(S),b.add(S)}else b.add(n),x.add(n),o.indexes.forEach(function(A){return v(A.name).add(n)});return C})}}),c=function(d){var g,h,v=d.query,b=v.index,x=v.range;return[b,new ve((g=x.lower)!==null&&g!==void 0?g:e.MIN_KEY,(h=x.upper)!==null&&h!==void 0?h:e.MAX_KEY)]},f={get:function(d){return[a,new ve(d.key)]},getMany:function(d){return[a,new ve().addKeys(d.keys)]},count:c,query:c,openCursor:c};return V(f).forEach(function(d){l[d]=function(g){var h=D.subscr;if(h){var v=function(w){var C="idb://"+t+"/"+r+"/"+w;return h[C]||(h[C]=new ve)},b=v(""),x=v(":dels"),_=f[d](g),y=_[0],m=_[1];if(v(y.name||"").add(m),!y.isPrimaryKey)if(d==="count")x.add(n);else{var p=d==="query"&&u&&g.values&&i.query(K(K({},g),{values:!1}));return i[d].apply(this,arguments).then(function(w){if(d==="query"){if(u&&g.values)return p.then(function(A){var T=A.result;return b.addKeys(T),w});var C=g.values?w.result.map(s):w.result;g.values?b.addKeys(C):x.addKeys(C)}else if(d==="openCursor"){var E=w,S=g.values;return E&&Object.create(E,{key:{get:function(){return x.addKey(E.primaryKey),E.key}},primaryKey:{get:function(){var A=E.primaryKey;return x.addKey(A),A}},value:{get:function(){return S&&b.addKey(E.primaryKey),E.value}}})}return w})}}return i[d].apply(this,arguments)}}),l}})}};function vs(e,t,n,r){function i(o){var a=e(o.name||"");function s(l){return l!=null?o.extractKey(l):null}var u=function(l){return o.multiEntry&&G(l)?l.forEach(function(c){return a.addKey(c)}):a.addKey(l)};(n||r).forEach(function(l,c){var f=n&&s(n[c]),d=r&&s(r[c]);J(f,d)!==0&&(f!=null&&u(f),d!=null&&u(d))})}t.indexes.forEach(i)}var yr=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=K({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:B,dbReadyPromise:null,cancelOpen:B,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};a.dbReadyPromise=new k(function(s){a.dbReadyResolve=s}),a.openCanceller=new k(function(s,u){a.cancelOpen=u}),this._state=a,this.name=t,this.on=Ct(this,"populate","blocked","versionchange","close",{ready:[ir,B]}),this.on.ready.subscribe=oi(this.on.ready.subscribe,function(s){return function(u,l){e.vip(function(){var c=r._state;if(c.openComplete)c.dbOpenError||k.resolve().then(u),l&&s(u);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(u),l&&s(u);else{s(u);var f=r;l||s(function d(){f.on.ready.unsubscribe(u),f.on.ready.unsubscribe(d)})}})}}),this.Collection=Ra(this),this.Table=Aa(this),this.Transaction=Na(this),this.Version=es(this),this.WhereClause=Ba(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+s.oldVersion/10)}),this._maxKey=mt(n.IDBKeyRange),this._createTransaction=function(s,u,l,c){return new r.Transaction(s,u,l,r._options.chromeTransactionDurability,c)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),ut.filter(function(u){return u.name===r.name&&u!==r&&!u._state.vcFired}).map(function(u){return u.on("versionchange").fire(s)})},this.use(us),this.use(cs),this.use(ps),this.use(ds),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new R.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new R.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(Ha),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||D.letThrough||this._vip)?t():new k(function(r,i){if(n._state.openComplete)return i(new R.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new R.DatabaseClosed);return}n.open().catch(B)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,o=t.name;o&&this.unuse({stack:n,name:o});var a=this._middlewares[n]||(this._middlewares[n]=[]);return a.push({stack:n,create:r,level:i??10,name:o}),a.sort(function(s,u){return s.level-u.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(o){return i?o.create!==i:r?o.name!==r:!1})),this},e.prototype.open=function(){return os(this)},e.prototype._close=function(){var t=this._state,n=ut.indexOf(this);if(n>=0&&ut.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new k(function(r){t.dbReadyResolve=r}),t.openCanceller=new k(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new R.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new k(function(i,o){var a=function(){t.close();var s=t._deps.indexedDB.deleteDatabase(t.name);s.onsuccess=F(function(){rs(t._deps,t.name),i()}),s.onerror=fe(o),s.onblocked=t._fireOnBlocked};if(n)throw new R.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return V(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=as.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,o=D.trans;(!o||o.db!==this||t.indexOf("!")!==-1)&&(o=null);var a=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var s,u;try{if(u=n.map(function(c){var f=c instanceof i.Table?c.name:c;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t===pn)s=pn;else if(t=="rw"||t==vn)s=vn;else throw new R.InvalidArgument("Invalid transaction mode: "+t);if(o){if(o.mode===pn&&s===vn)if(a)o=null;else throw new R.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&u.forEach(function(c){if(o&&o.storeNames.indexOf(c)===-1)if(a)o=null;else throw new R.SubTransaction("Table "+c+" not included in parent transaction.")}),a&&o&&!o.active&&(o=null)}}catch(c){return o?o._promise(null,function(f,d){d(c)}):z(c)}var l=Ii.bind(null,this,s,u,o,r);return o?o._promise(s,l,"lock"):D.trans?tt(D.transless,function(){return i._whenReady(l)}):this._whenReady(l)},e.prototype.table=function(t){if(!re(this._allTables,t))throw new R.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),ys=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ms=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[ys]=function(){return this},e}();function Oi(e,t){return V(t).forEach(function(n){var r=e[n]||(e[n]=new ve);en(r,t[n])}),e}function $i(e){return new ms(function(t){var n=tr(e);function r(g){n&&et();var h=function(){return De(e,{subscr:g,trans:null})},v=D.trans?tt(D.transless,h):h();return n&&v.then(we,we),v}var i=!1,o={},a={},s={get closed(){return i},unsubscribe:function(){i=!0,Re.storagemutated.unsubscribe(f)}};t.start&&t.start(s);var u=!1,l=!1;function c(){return V(a).some(function(g){return o[g]&&hs(o[g],a[g])})}var f=function(g){Oi(o,g),c()&&d()},d=function(){if(!(u||i)){o={};var g={},h=r(g);l||(Re(yt,f),l=!0),u=!0,Promise.resolve(h).then(function(v){u=!1,!i&&(c()?d():(o={},a=g,t.next&&t.next(v)))},function(v){u=!1,t.error&&t.error(v),s.unsubscribe()})}};return d(),s})}var zn;try{zn={indexedDB:L.indexedDB||L.mozIndexedDB||L.webkitIndexedDB||L.msIndexedDB,IDBKeyRange:L.IDBKeyRange||L.webkitIDBKeyRange}}catch{zn={indexedDB:null,IDBKeyRange:null}}var Te=yr;Qe(Te,K(K({},un),{delete:function(e){var t=new Te(e,{addons:[]});return t.delete()},exists:function(e){return new Te(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return ts(Te.dependencies).then(e)}catch{return z(new R.MissingAPI)}},defineClass:function(){function e(t){Z(this,t)}return e},ignoreTransaction:function(e){return D.trans?tt(D.transless,e):e()},vip:Un,async:function(e){return function(){try{var t=Vn(e.apply(this,arguments));return!t||typeof t.then!="function"?k.resolve(t):t}catch(n){return z(n)}}},spawn:function(e,t,n){try{var r=Vn(e.apply(n,t||[]));return!r||typeof r.then!="function"?k.resolve(r):r}catch(i){return z(i)}},currentTransaction:{get:function(){return D.trans||null}},waitFor:function(e,t){var n=k.resolve(typeof e=="function"?Te.ignoreTransaction(e):e).timeout(t||6e4);return D.trans?D.trans.waitFor(n):n},Promise:k,debug:{get:function(){return he},set:function(e){fi(e,e==="dexie"?function(){return!0}:Ai)}},derive:Je,extend:Z,props:Qe,override:oi,Events:Ct,on:Re,liveQuery:$i,extendObservabilitySet:Oi,getByKeyPath:ge,setByKeyPath:ae,delByKeyPath:Go,shallowClone:ui,deepClone:xt,getObjectDiff:pr,cmp:J,asap:ai,minKey:Mn,addons:[],connections:ut,errnames:rr,dependencies:zn,semVer:kr,version:kr.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));Te.maxKey=mt(Te.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Re(yt,function(e){if(!me){var t;ln?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Ce,!0,!0,e)):t=new CustomEvent(Ce,{detail:e}),me=!0,dispatchEvent(t),me=!1}}),addEventListener(Ce,function(e){var t=e.detail;me||tn(t)}));function tn(e){var t=me;try{me=!0,Re.storagemutated.fire(e)}finally{me=t}}var me=!1;if(typeof BroadcastChannel<"u"){var $r=new BroadcastChannel(Ce);Re(yt,function(e){me||$r.postMessage(e)}),$r.onmessage=function(e){e.data&&tn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Re(yt,function(e){try{me||(typeof localStorage<"u"&&localStorage.setItem(Ce,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&Sn([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:Ce,changedParts:e})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(e){if(e.key===Ce){var t=JSON.parse(e.newValue);t&&tn(t.changedParts)}});var Br=self.document&&navigator.serviceWorker;Br&&Br.addEventListener("message",gs)}function gs(e){var t=e.data;t&&t.type===Ce&&tn(t.changedParts)}k.rejectionMapper=oa;fi(he,Ai);class bs extends yr{decks;words;constructor(){super("vocabulary"),this.version(1).stores({decks:"++id, name",words:"++id, word, deckId"})}}const se=new bs,ct=e=>{const[t,n]=ee(),i=$i(e).subscribe(o=>{n(()=>o)});return nn(()=>{i.unsubscribe()}),t};const ws=Y('<main><h1>Home</h1><ul aria-label="List of decks" class="deck-list"></ul></main>'),_s=Y("<li></li>"),xs=()=>{const e=ct(async()=>await se.decks.toArray());return(()=>{const t=ws.cloneNode(!0),n=t.firstChild,r=n.nextSibling;return U(r,$(Ji,{get each(){return e()},children:i=>(()=>{const o=_s.cloneNode(!0);return U(o,$(Me,{class:"deck-card",get href(){return`/deck/${i.id?.toString()}`},get children(){return i.name}})),o})()})),U(t,$(Me,{class:"button",href:"/create-deck",children:"Create deck"}),null),t})()},Ss=Y('<main><h1>Create Deck</h1><form><label for="input-create-deck-name">Name</label><input class="input" id="input-create-deck-name"><button class="button">Create</button></form></main>'),Es=()=>{let e;const t=Oo(),n=r=>{r.preventDefault(),se.decks.add({name:e.value}).then(()=>t("/")).catch(console.error)};return(()=>{const r=Ss.cloneNode(!0),i=r.firstChild,o=i.nextSibling,a=o.firstChild,s=a.nextSibling;o.addEventListener("submit",n);const u=e;return typeof u=="function"?$t(u,s):e=s,r})()};function fn(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function _e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Ut(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ut=function(n){return typeof n}:Ut=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ut(e)}function bt(e){_e(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Ut(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function As(e,t){_e(2,arguments);var n=bt(e),r=fn(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function Bi(e,t){_e(2,arguments);var n=bt(e).getTime(),r=fn(t);return new Date(n+r)}var Cs=36e5;function ks(e,t){_e(2,arguments);var n=fn(t);return Bi(e,n*Cs)}function qn(e){_e(1,arguments);var t=bt(e);return t.setHours(0,0,0,0),t}var Ds=6e4;function Ps(e,t){_e(2,arguments);var n=fn(t);return Bi(e,n*Ds)}function Rs(e,t){_e(2,arguments);var n=qn(e),r=qn(t);return n.getTime()===r.getTime()}function Mi(e,t){_e(2,arguments);var n=bt(e),r=bt(t);return n.getTime()<r.getTime()}function Ts(e){return _e(1,arguments),Rs(e,Date.now())}const Is=Y('<main><h1></h1><h2>Word count: <!> | Due: </h2><div class="deck-actions"></div></main>'),Ks=()=>{const{id:e}=Zn(),t=parseInt(e,10),n=ct(async()=>await se.decks.get(parseInt(e,10))),r=ct(async()=>await se.words.where("deckId").equals(t).count()),i=ct(async()=>await se.words.where("deckId").equals(t).and(o=>Mi(o.dueDate,new Date)).count());return(()=>{const o=Is.cloneNode(!0),a=o.firstChild,s=a.nextSibling,u=s.firstChild,l=u.nextSibling;l.nextSibling;const c=s.nextSibling;return U(a,()=>n()?.name),U(s,r,l),U(s,i,null),U(c,$(Me,{class:"button",href:`/deck/${e}/add-word`,children:"Add word"}),null),U(c,$(Me,{class:"button success",href:`/deck/${e}/study`,children:"Study"}),null),o})()},Os=30,$s=.5;const Bs=Y('<main><div class="added-words"></div><h1>Add Word</h1><form><label for="input-word-text">Word / Phrase</label><input class="input" id="input-word-text"><label for="input-word-meaning">Meaning</label><input class="input" id="input-word-meaning"><label for="input-word-context">Context</label><input class="input" id="input-word-context"><button class="button">Add</button></form></main>'),Ms=()=>{const{id:e}=Zn(),[t,n]=ee([]);let r,i,o;const a=s=>{s.preventDefault(),se.words.add({word:r.value,meaning:i.value,context:o.value,dueDate:Ps(new Date,Os),deckId:parseInt(e,10),nextIntervalDays:$s}).then(()=>{n(u=>[r.value,...u]),r.value="",i.value="",o.value=""}).catch(console.error)};return(()=>{const s=Bs.cloneNode(!0),u=s.firstChild,l=u.nextSibling,c=l.nextSibling,f=c.firstChild,d=f.nextSibling,g=d.nextSibling,h=g.nextSibling,v=h.nextSibling,b=v.nextSibling;U(s,$(Me,{class:"button narrow",href:`/deck/${e}`,children:"Back to Deck"}),u),U(u,$(ce,{get when(){return t().length>0},get children(){return["Just added: ",N(()=>t().join(", "))]}})),c.addEventListener("submit",a);const x=r;typeof x=="function"?$t(x,d):r=d;const _=i;typeof _=="function"?$t(_,h):i=h;const y=o;return typeof y=="function"?$t(y,b):o=b,s})()},Ns="modulepreload",Ls=function(e){return"/vocab-trainer/"+e},Mr={},Fs=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=Ls(o),o in Mr)return;Mr[o]=!0;const a=o.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const f=i[c];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const l=document.createElement("link");if(l.rel=a?"stylesheet":Ns,a||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),a)return new Promise((c,f)=>{l.addEventListener("load",c),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())};function js(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:a}=e;let s,u,l,c;const f=async(g=!0)=>{await l,g&&s?.addEventListener("controlling",h=>{h.isUpdate&&window.location.reload()}),await c?.()};async function d(){if("serviceWorker"in navigator){const{Workbox:g,messageSW:h}=await Fs(()=>import("./workbox-window.prod.es5.d2780aeb.js"),[]);c=async()=>{u&&u.waiting&&await h(u.waiting,{type:"SKIP_WAITING"})},s=new g("/vocab-trainer/sw.js",{scope:"/vocab-trainer/",type:"classic"}),s.addEventListener("activated",v=>{v.isUpdate||r?.()});{const v=()=>{n?.()};s.addEventListener("waiting",v),s.addEventListener("externalwaiting",v)}s.register({immediate:t}).then(v=>{u=v,o?o("/vocab-trainer/sw.js",v):i?.(v)}).catch(v=>{a?.(v)})}}return l=d(),f}function Ws(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:a}=e,[s,u]=ee(!1),[l,c]=ee(!1),f=js({immediate:t,onOfflineReady(){c(!0),r?.()},onNeedRefresh(){u(!0),n?.()},onRegistered:i,onRegisteredSW:o,onRegisterError:a});return{needRefresh:[s,u],offlineReady:[l,c],updateServiceWorker:f}}const Us=Y('<main><h1>Settings</h1><div class="settings"><button class="button">Delete data</button><button class="button">Update</button></div></main>'),Vs=()=>{const e=()=>{se.delete().then(async()=>await se.open()).catch(console.error)},t=Ws();return(()=>{const n=Us.cloneNode(!0),r=n.firstChild,i=r.nextSibling,o=i.firstChild,a=o.nextSibling;return o.$$click=e,a.$$click=()=>t?.updateServiceWorker(),n})()};wt(["click"]);const Hs=Y('<div class="card"></div>'),zs=Y('<div class="actions"><button class="button failure">Forgotton</button><button class="button success">Remembered</button></div>'),Nr=Y('<p class="answer"></p>'),qs=Y('<div class="actions"><button class="button failure">Incorrect</button><button class="button success">Correct</button></div>'),Ys=Y("<p>Finished</p>"),Xs=Y("<p>No words to study currently</p>"),Gs=Y("<main><h1>Study </h1></main>"),Qs=Y(`<div class="actions"><button class="button failure">Still can't recall</button><button class="button success">Remembered with context</button></div>`),Js=Y('<div class="actions"><button class="button failure">Continue</button></div>'),Zs=()=>{const{id:e}=Zn(),t=parseInt(e,10),n=ct(async()=>await se.decks.get(t)),[r,i]=ee(),[o,a]=ee(),[s,u]=ee();se.words.where("deckId").equals(t).and(y=>Mi(y.dueDate,new Date)).toArray().then(y=>{const m=y.reduce((p,w)=>(p[w.id]={word:w,reviewed:!1},p),{});i(m),a(l(m))}).catch(console.error);const l=y=>{const m=Object.values(y).filter(w=>!w.reviewed);if(m.length===0)return;const p=Math.floor(Math.random()*m.length);return m[p].word},c=()=>{u({userSaidTheyRememberedCorrectly:!0})},f=()=>{u({userSaidTheyRememberedCorrectly:!1})},d=()=>{u({userSaidTheyRememberedCorrectly:!0,requiredContext:!0})},g=()=>{u({userSaidTheyRememberedCorrectly:!1,forgotWithContext:!0})},h=()=>{const y=s()?.requiredContext===!0;b(y?1.1:2)},v=()=>{b(1)},b=y=>{const m=o(),p=m.nextIntervalDays,w=new Date;let C;C=p<1?ks(w,p*24):As(w,p),Ts(C)||(C=qn(C)),se.words.update(m.id,{dueDate:C,nextIntervalDays:p*y}).catch(console.error);const E=r();E[m.id].reviewed=!0,i(E),a(l(E)),u(void 0)},x=y=>y==null?!0:Object.values(y).length>0,_=()=>{if(s()?.forgotWithContext===!0)return!1;const y=o();return y?.context!=null&&y.context!==""};return(()=>{const y=Gs.cloneNode(!0),m=y.firstChild;return m.firstChild,U(m,()=>n()?.name,null),U(y,$(ce,{get when(){return o()},get children(){return[(()=>{const p=Hs.cloneNode(!0);return U(p,()=>o()?.word),p})(),$(ce,{get when(){return s()==null},get children(){const p=zs.cloneNode(!0),w=p.firstChild,C=w.nextSibling;return w.$$click=f,C.$$click=c,p}}),$(ce,{get when(){return s()!=null},get children(){return[$(ce,{get when(){return!s()?.userSaidTheyRememberedCorrectly},get children(){return[N(()=>N(()=>!!_())()&&(()=>{const p=Qs.cloneNode(!0),w=p.firstChild,C=w.nextSibling;return w.$$click=g,C.$$click=d,p})()),N(()=>N(()=>!_())()&&[(()=>{const p=Nr.cloneNode(!0);return U(p,()=>o()?.meaning),p})(),(()=>{const p=Js.cloneNode(!0),w=p.firstChild;return w.$$click=v,p})()])]}}),$(ce,{get when(){return s()?.userSaidTheyRememberedCorrectly},get children(){return[(()=>{const p=Nr.cloneNode(!0);return U(p,()=>o()?.meaning),p})(),(()=>{const p=qs.cloneNode(!0),w=p.firstChild,C=w.nextSibling;return w.$$click=v,C.$$click=h,p})()]}})]}})]}}),null),U(y,$(ce,{get when(){return N(()=>o()==null)()&&x(r())},get children(){return Ys.cloneNode(!0)}}),null),U(y,$(ce,{get when(){return N(()=>r()!=null)()&&!x(r())},get children(){return Xs.cloneNode(!0)}}),null),y})()};wt(["click"]);const eu=Y('<div><header><nav></nav><button class="color-mode-switcher"></button></header><div class="outlet"></div></div>'),tu=()=>{const e=window.matchMedia("(prefers-color-scheme: light)").matches,[t,n]=ee(e);window.matchMedia("(prefers-color-scheme: light)").addEventListener("change",i=>{document.documentElement.removeAttribute("class"),n(i.matches)});const r=()=>{const i=t()?"dark-mode":"light-mode";document.documentElement.classList.contains(i)?document.documentElement.classList.remove(i):document.documentElement.classList.add(i)};return(()=>{const i=eu.cloneNode(!0),o=i.firstChild,a=o.firstChild,s=a.nextSibling,u=o.nextSibling;return U(a,$(Me,{href:"/",children:"Home"}),null),U(a,$(Me,{href:"/settings",children:"Settings"}),null),s.$$click=r,U(s,()=>t()?"Dark mode":"Light mode"),U(u,$(Vo,{get children(){return[$(Ve,{path:"/",element:xs}),$(Ve,{path:"/settings",element:Vs}),$(Ve,{path:"/deck/:id",element:Ks}),$(Ve,{path:"/deck/:id/add-word",element:Ms}),$(Ve,{path:"/deck/:id/study",element:Zs}),$(Ve,{path:"/create-deck",element:Es})]}})),i})()};wt(["click"]);ao(()=>$(Uo,{get base(){return"/vocab-trainer/"},get children(){return $(tu,{})}}),document.getElementById("root"));
