(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const _e={},Ti=(e,t)=>e===t,jn=Symbol("solid-proxy"),Di=Symbol("solid-track"),Lt={equals:Ti};let Ii=Lr;const Le=1,Ft=2,Kr={owned:null,cleanups:null,context:null,owner:null};var M=null;let Ke=null,$=null,X=null,Te=null,Wn=0;function nt(e,t){const n=$,r=M,i=e.length===0,o=i?Kr:{owned:null,cleanups:null,context:null,owner:t||r},a=i?e:()=>e(()=>le(()=>Hn(o)));M=o,$=null;try{return Fe(a,!0)}finally{$=n,M=r}}function ue(e,t){t=t?Object.assign({},Lt,t):Lt;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),Or(n,i));return[Ir.bind(n),r]}function Ee(e,t,n){const r=Br(e,t,!1,Le);Gt(r)}function H(e,t,n){n=n?Object.assign({},Lt,n):Lt;const r=Br(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Gt(r),Ir.bind(r)}function le(e){const t=$;$=null;try{return e()}finally{$=t}}function Tr(e,t,n){const r=Array.isArray(e);let i,o=n&&n.defer;return a=>{let s;if(r){s=Array(e.length);for(let l=0;l<e.length;l++)s[l]=e[l]()}else s=e();if(o){o=!1;return}const u=le(()=>t(s,i,a));return i=s,u}}function Xt(e){return M===null||(M.cleanups===null?M.cleanups=[e]:M.cleanups.push(e)),e}function Oi(){return M}function Bi(e,t){const n=M;M=e;try{return Fe(t,!0)}finally{M=n}}function Mi(e){const t=$,n=M;return Promise.resolve().then(()=>{$=t,M=n;let r;return Fe(e,!1),$=M=null,r?r.done:void 0})}function Dr(e,t){const n=Symbol("context");return{id:n,Provider:$i(n),defaultValue:e}}function Un(e){let t;return(t=$r(M,e.id))!==void 0?t:e.defaultValue}function Vn(e){const t=H(e),n=H(()=>dn(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Ir(){const e=Ke;if(this.sources&&(this.state||e))if(this.state===Le||e)Gt(this);else{const t=X;X=null,Fe(()=>Nt(this),!1),X=t}if($){const t=this.observers?this.observers.length:0;$.sources?($.sources.push(this),$.sourceSlots.push(t)):($.sources=[this],$.sourceSlots=[t]),this.observers?(this.observers.push($),this.observerSlots.push($.sources.length-1)):(this.observers=[$],this.observerSlots=[$.sources.length-1])}return this.value}function Or(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Fe(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],a=Ke&&Ke.running;a&&Ke.disposed.has(o),(a&&!o.tState||!a&&!o.state)&&(o.pure?X.push(o):Te.push(o),o.observers&&Fr(o)),a||(o.state=Le)}if(X.length>1e6)throw X=[],new Error},!1)),t}function Gt(e){if(!e.fn)return;Hn(e);const t=M,n=$,r=Wn;$=M=e,Li(e,e.value,r),$=n,M=t}function Li(e,t,n){let r;try{r=e.fn(t)}catch(i){e.pure&&(e.state=Le),Nr(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Or(e,r):e.value=r,e.updatedAt=n)}function Br(e,t,n,r=Le,i){const o={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:M,context:null,pure:n};return M===null||M!==Kr&&(M.owned?M.owned.push(o):M.owned=[o]),o}function Mr(e){const t=Ke;if(e.state===0||t)return;if(e.state===Ft||t)return Nt(e);if(e.suspense&&le(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Wn);)(e.state||t)&&n.push(e);for(let r=n.length-1;r>=0;r--)if(e=n[r],e.state===Le||t)Gt(e);else if(e.state===Ft||t){const i=X;X=null,Fe(()=>Nt(e,n[0]),!1),X=i}}function Fe(e,t){if(X)return e();let n=!1;t||(X=[]),Te?n=!0:Te=[],Wn++;try{const r=e();return Fi(n),r}catch(r){X||(Te=null),Nr(r)}}function Fi(e){if(X&&(Lr(X),X=null),e)return;const t=Te;Te=null,t.length&&Fe(()=>Ii(t),!1)}function Lr(e){for(let t=0;t<e.length;t++)Mr(e[t])}function Nt(e,t){const n=Ke;e.state=0;for(let r=0;r<e.sources.length;r+=1){const i=e.sources[r];i.sources&&(i.state===Le||n?i!==t&&Mr(i):(i.state===Ft||n)&&Nt(i,t))}}function Fr(e){const t=Ke;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(!r.state||t)&&(r.state=Ft,r.pure?X.push(r):Te.push(r),r.observers&&Fr(r))}}function Hn(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const o=i.pop(),a=n.observerSlots.pop();r<i.length&&(o.sourceSlots[a]=r,i[r]=o,n.observerSlots[r]=a)}}if(e.owned){for(t=0;t<e.owned.length;t++)Hn(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Ni(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function Nr(e){throw e=Ni(e),e}function $r(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:$r(e.owner,t):void 0}function dn(e){if(typeof e=="function"&&!e.length)return dn(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=dn(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function $i(e,t){return function(r){let i;return Ee(()=>i=le(()=>(M.context={[e]:r.value},Vn(()=>r.children))),void 0),i}}const ji=Symbol("fallback");function lr(e){for(let t=0;t<e.length;t++)e[t]()}function Wi(e,t,n={}){let r=[],i=[],o=[],a=0,s=t.length>1?[]:null;return Xt(()=>lr(o)),()=>{let u=e()||[],l,c;return u[Di],le(()=>{let h=u.length,y,d,p,m,_,w,g,b,v;if(h===0)a!==0&&(lr(o),o=[],r=[],i=[],a=0,s&&(s=[])),n.fallback&&(r=[ji],i[0]=nt(x=>(o[0]=x,n.fallback())),a=1);else if(a===0){for(i=new Array(h),c=0;c<h;c++)r[c]=u[c],i[c]=nt(f);a=h}else{for(p=new Array(h),m=new Array(h),s&&(_=new Array(h)),w=0,g=Math.min(a,h);w<g&&r[w]===u[w];w++);for(g=a-1,b=h-1;g>=w&&b>=w&&r[g]===u[b];g--,b--)p[b]=i[g],m[b]=o[g],s&&(_[b]=s[g]);for(y=new Map,d=new Array(b+1),c=b;c>=w;c--)v=u[c],l=y.get(v),d[c]=l===void 0?-1:l,y.set(v,c);for(l=w;l<=g;l++)v=r[l],c=y.get(v),c!==void 0&&c!==-1?(p[c]=i[l],m[c]=o[l],s&&(_[c]=s[l]),c=d[c],y.set(v,c)):o[l]();for(c=w;c<h;c++)c in p?(i[c]=p[c],o[c]=m[c],s&&(s[c]=_[c],s[c](c))):i[c]=nt(f);i=i.slice(0,a=h),r=u.slice(0)}return i});function f(h){if(o[c]=h,s){const[y,d]=ue(c);return s[c]=d,t(u[c],y)}return t(u[c])}}}function j(e,t){return le(()=>e(t||{}))}function St(){return!0}const jr={get(e,t,n){return t===jn?n:e.get(t)},has(e,t){return e.has(t)},set:St,deleteProperty:St,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:St,deleteProperty:St}},ownKeys(e){return e.keys()}};function on(e){return(e=typeof e=="function"?e():e)?e:{}}function pn(...e){if(e.some(n=>n&&(jn in n||typeof n=="function")))return new Proxy({get(n){for(let r=e.length-1;r>=0;r--){const i=on(e[r])[n];if(i!==void 0)return i}},has(n){for(let r=e.length-1;r>=0;r--)if(n in on(e[r]))return!0;return!1},keys(){const n=[];for(let r=0;r<e.length;r++)n.push(...Object.keys(on(e[r])));return[...new Set(n)]}},jr);const t={};for(let n=e.length-1;n>=0;n--)if(e[n]){const r=Object.getOwnPropertyDescriptors(e[n]);for(const i in r)i in t||Object.defineProperty(t,i,{enumerable:!0,get(){for(let o=e.length-1;o>=0;o--){const a=(e[o]||{})[i];if(a!==void 0)return a}}})}return t}function Ui(e,...t){const n=new Set(t.flat()),r=Object.getOwnPropertyDescriptors(e),i=jn in e;i||t.push(Object.keys(r).filter(a=>!n.has(a)));const o=t.map(a=>{const s={};for(let u=0;u<a.length;u++){const l=a[u];!i&&!(l in e)||Object.defineProperty(s,l,r[l]?r[l]:{get(){return e[l]},set(){return!0},enumerable:!0})}return s});return i&&o.push(new Proxy({get(a){return n.has(a)?void 0:e[a]},has(a){return n.has(a)?!1:a in e},keys(){return Object.keys(e).filter(a=>!n.has(a))}},jr)),o}function Vi(e){const t="fallback"in e&&{fallback:()=>e.fallback};return H(Wi(()=>e.each,e.children,t||void 0))}function Wr(e){let t=!1;const n=e.keyed,r=H(()=>e.when,void 0,{equals:(i,o)=>t?i===o:!i==!o});return H(()=>{const i=r();if(i){const o=e.children,a=typeof o=="function"&&o.length>0;return t=n||a,a?le(()=>o(i)):o}return e.fallback})}const Hi=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],zi=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Hi]),qi=new Set(["innerHTML","textContent","innerText","children"]),Yi=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),cr=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),Xi=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Gi={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function Qi(e,t,n){let r=n.length,i=t.length,o=r,a=0,s=0,u=t[i-1].nextSibling,l=null;for(;a<i||s<o;){if(t[a]===n[s]){a++,s++;continue}for(;t[i-1]===n[o-1];)i--,o--;if(i===a){const c=o<r?s?n[s-1].nextSibling:n[o-s]:u;for(;s<o;)e.insertBefore(n[s++],c)}else if(o===s)for(;a<i;)(!l||!l.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[o-1]&&n[s]===t[i-1]){const c=t[--i].nextSibling;e.insertBefore(n[s++],t[a++].nextSibling),e.insertBefore(n[--o],c),t[i]=n[o]}else{if(!l){l=new Map;let f=s;for(;f<o;)l.set(n[f],f++)}const c=l.get(t[a]);if(c!=null)if(s<c&&c<o){let f=a,h=1,y;for(;++f<i&&f<o&&!((y=l.get(t[f]))==null||y!==c+h);)h++;if(h>c-s){const d=t[a];for(;s<c;)e.insertBefore(n[s++],d)}else e.replaceChild(n[s++],t[a++])}else a++;else t[a++].remove()}}}const fr="_$DX_DELEGATE";function Ji(e,t,n,r={}){let i;return nt(o=>{i=o,t===document?e():re(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function ke(e,t,n){const r=document.createElement("template");r.innerHTML=e;let i=r.content.firstChild;return n&&(i=i.firstChild),i}function yt(e,t=window.document){const n=t[fr]||(t[fr]=new Set);for(let r=0,i=e.length;r<i;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,so))}}function Ur(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Zi(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function eo(e,t){t==null?e.removeAttribute("class"):e.className=t}function to(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=o=>i.call(e,n[1],o))}else e.addEventListener(t,n)}function no(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let o,a;for(o=0,a=i.length;o<a;o++){const s=i[o];!s||s==="undefined"||t[s]||(hr(e,s,!1),delete n[s])}for(o=0,a=r.length;o<a;o++){const s=r[o],u=!!t[s];!s||s==="undefined"||n[s]===u||!u||(hr(e,s,!0),n[s]=u)}return n}function ro(e,t,n){if(!t)return n?Ur(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,o;for(o in n)t[o]==null&&r.removeProperty(o),delete n[o];for(o in t)i=t[o],i!==n[o]&&(r.setProperty(o,i),n[o]=i);return n}function io(e,t={},n,r){const i={};return r||Ee(()=>i.children=ze(e,t.children,i.children)),Ee(()=>t.ref&&t.ref(e)),Ee(()=>oo(e,t,n,!0,i,!0)),i}function Vr(e,t,n){return le(()=>e(t,n))}function re(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return ze(e,t,r,n);Ee(i=>ze(e,t(),i,n),r)}function oo(e,t,n,r,i={},o=!1){t||(t={});for(const a in i)if(!(a in t)){if(a==="children")continue;i[a]=dr(e,a,null,i[a],n,o)}for(const a in t){if(a==="children"){r||ze(e,t.children);continue}const s=t[a];i[a]=dr(e,a,s,i[a],n,o)}}function ao(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function hr(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,o=r.length;i<o;i++)e.classList.toggle(r[i],n)}function dr(e,t,n,r,i,o){let a,s,u;if(t==="style")return ro(e,n,r);if(t==="classList")return no(e,n,r);if(n===r)return r;if(t==="ref")o||n(e);else if(t.slice(0,3)==="on:"){const l=t.slice(3);r&&e.removeEventListener(l,r),n&&e.addEventListener(l,n)}else if(t.slice(0,10)==="oncapture:"){const l=t.slice(10);r&&e.removeEventListener(l,r,!0),n&&e.addEventListener(l,n,!0)}else if(t.slice(0,2)==="on"){const l=t.slice(2).toLowerCase(),c=Xi.has(l);if(!c&&r){const f=Array.isArray(r)?r[0]:r;e.removeEventListener(l,f)}(c||n)&&(to(e,l,n,c),c&&yt([l]))}else if((u=qi.has(t))||!i&&(cr[t]||(s=zi.has(t)))||(a=e.nodeName.includes("-")))t==="class"||t==="className"?eo(e,n):a&&!s&&!u?e[ao(t)]=n:e[cr[t]||t]=n;else{const l=i&&t.indexOf(":")>-1&&Gi[t.split(":")[0]];l?Zi(e,l,t,n):Ur(e,Yi[t]||t,n)}return n}function so(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),_e.registry&&!_e.done&&(_e.done=!0,document.querySelectorAll("[id^=pl-]").forEach(r=>r.remove()));n!==null;){const r=n[t];if(r&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?r.call(n,i,e):r.call(n,e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function ze(e,t,n,r,i){for(_e.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(_e.context)return n;if(o==="number"&&(t=t.toString()),a){let s=n[0];s&&s.nodeType===3?s.data=t:s=document.createTextNode(t),n=$e(e,n,r,s)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean"){if(_e.context)return n;n=$e(e,n,r)}else{if(o==="function")return Ee(()=>{let s=t();for(;typeof s=="function";)s=s();n=ze(e,s,n,r)}),()=>n;if(Array.isArray(t)){const s=[],u=n&&Array.isArray(n);if(vn(s,t,n,i))return Ee(()=>n=ze(e,s,n,r,!0)),()=>n;if(_e.context){if(!s.length)return n;for(let l=0;l<s.length;l++)if(s[l].parentNode)return n=s}if(s.length===0){if(n=$e(e,n,r),a)return n}else u?n.length===0?pr(e,s,r):Qi(e,n,s):(n&&$e(e),pr(e,s));n=s}else if(t instanceof Node){if(_e.context&&t.parentNode)return n=a?[t]:t;if(Array.isArray(n)){if(a)return n=$e(e,n,r,t);$e(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function vn(e,t,n,r){let i=!1;for(let o=0,a=t.length;o<a;o++){let s=t[o],u=n&&n[o];if(s instanceof Node)e.push(s);else if(!(s==null||s===!0||s===!1))if(Array.isArray(s))i=vn(e,s,u)||i;else if(typeof s=="function")if(r){for(;typeof s=="function";)s=s();i=vn(e,Array.isArray(s)?s:[s],Array.isArray(u)?u:[u])||i}else e.push(s),i=!0;else{const l=String(s);u&&u.nodeType===3&&u.data===l?e.push(u):e.push(document.createTextNode(l))}}return i}function pr(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function $e(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let o=!1;for(let a=t.length-1;a>=0;a--){const s=t[a];if(i!==s){const u=s.parentNode===e;!o&&!a?u?e.replaceChild(i,s):e.insertBefore(i,n):u&&s.remove()}else o=!0}}else e.insertBefore(i,n);return[i]}const uo=!1;function lo(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function co([e,t],n,r){return[n?()=>n(e()):e,r?i=>t(r(i)):t]}function fo(e){try{return document.querySelector(e)}catch{return null}}function ho(e,t){const n=fo(`#${e}`);n?n.scrollIntoView():t&&window.scrollTo(0,0)}function po(e,t,n,r){let i=!1;const o=s=>typeof s=="string"?{value:s}:s,a=co(ue(o(e()),{equals:(s,u)=>s.value===u.value}),void 0,s=>(!i&&t(s),s));return n&&Xt(n((s=e())=>{i=!0,a[1](o(s)),i=!1})),{signal:a,utils:r}}function vo(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:ue({value:""})};return e}function yo(){return po(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:e,replace:t,scroll:n,state:r})=>{t?window.history.replaceState(r,"",e):window.history.pushState(r,"",e),ho(window.location.hash.slice(1),n)},e=>lo(window,"popstate",()=>e()),{go:e=>window.history.go(e)})}const mo=/^(?:[a-z0-9]+:)?\/\//i,go=/^\/+|\/+$/g;function rt(e,t=!1){const n=e.replace(go,"");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function Kt(e,t,n){if(mo.test(t))return;const r=rt(e),i=n&&rt(n);let o="";return!i||t.startsWith("/")?o=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?o=r+i:o=i,(o||"/")+rt(t,!o)}function bo(e,t){if(e==null)throw new Error(t);return e}function Hr(e,t){return rt(e).replace(/\/*(\*.*)?$/g,"")+rt(t)}function wo(e){const t={};return e.searchParams.forEach((n,r)=>{t[r]=n}),t}function Ve(e,t){return decodeURIComponent(t?e.replace(/\+/g," "):e)}function _o(e,t){const[n,r]=e.split("/*",2),i=n.split("/").filter(Boolean),o=i.length;return a=>{const s=a.split("/").filter(Boolean),u=s.length-o;if(u<0||u>0&&r===void 0&&!t)return null;const l={path:o?"":"/",params:{}};for(let c=0;c<o;c++){const f=i[c],h=s[c];if(f[0]===":")l.params[f.slice(1)]=h;else if(f.localeCompare(h,void 0,{sensitivity:"base"})!==0)return null;l.path+=`/${h}`}return r&&(l.params[r]=u?s.slice(-u).join("/"):""),l}}function xo(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,o)=>i+(o.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function zr(e){const t=new Map,n=Oi();return new Proxy({},{get(r,i){return t.has(i)||Bi(n,()=>t.set(i,H(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function qr(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return qr(r).reduce((o,a)=>[...o,...i.map(s=>s+a)],[])}const Eo=100,Yr=Dr(),Qt=Dr(),Jt=()=>bo(Un(Yr),"Make sure your app is wrapped in a <Router />");let st;const Zt=()=>st||Un(Qt)||Jt().base,So=e=>{const t=Zt();return H(()=>t.resolvePath(e()))},Ao=e=>{const t=Jt();return H(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},Co=()=>Jt().location,Xr=()=>Zt().params;function ko(e,t="",n){const{component:r,data:i,children:o}=e,a=!o||Array.isArray(o)&&!o.length,s={key:e,element:r?()=>j(r,{}):()=>{const{element:u}=e;return u===void 0&&n?j(n,{}):u},preload:e.component?r.preload:e.preload,data:i};return Gr(e.path).reduce((u,l)=>{for(const c of qr(l)){const f=Hr(t,c),h=a?f:f.split("/*",1)[0];u.push({...s,originalPath:c,pattern:h,matcher:_o(h,!a)})}return u},[])}function Po(e,t=0){return{routes:e,score:xo(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const o=e[i],a=o.matcher(n);if(!a)return null;r.unshift({...a,route:o})}return r}}}function Gr(e){return Array.isArray(e)?e:[e]}function Qr(e,t="",n,r=[],i=[]){const o=Gr(e);for(let a=0,s=o.length;a<s;a++){const u=o[a];if(u&&typeof u=="object"&&u.hasOwnProperty("path")){const l=ko(u,t,n);for(const c of l){if(r.push(c),u.children)Qr(u.children,c.pattern,n,r,i);else{const f=Po([...r],i.length);i.push(f)}r.pop()}}}return r.length?i:i.sort((a,s)=>s.score-a.score)}function Ro(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}function Ko(e,t){const n=new URL("http://sar"),r=H(u=>{const l=e();try{return new URL(l,n)}catch{return console.error(`Invalid path ${l}`),u}},n,{equals:(u,l)=>u.href===l.href}),i=H(()=>Ve(r().pathname)),o=H(()=>Ve(r().search,!0)),a=H(()=>Ve(r().hash)),s=H(()=>"");return{get pathname(){return i()},get search(){return o()},get hash(){return a()},get state(){return t()},get key(){return s()},query:zr(Tr(o,()=>wo(r())))}}function To(e,t="",n,r){const{signal:[i,o],utils:a={}}=vo(e),s=a.parsePath||(E=>E),u=a.renderPath||(E=>E),l=Kt("",t),c=void 0;if(l===void 0)throw new Error(`${l} is not a valid base path`);l&&!i().value&&o({value:l,replace:!0,scroll:!1});const[f,h]=ue(!1),y=async E=>{h(!0);try{await Mi(E)}finally{h(!1)}},[d,p]=ue(i().value),[m,_]=ue(i().state),w=Ko(d,m),g=[],b={pattern:l,params:{},path:()=>l,outlet:()=>null,resolvePath(E){return Kt(l,E)}};if(n)try{st=b,b.data=n({data:void 0,params:{},location:w,navigate:x(b)})}finally{st=void 0}function v(E,A,T){le(()=>{if(typeof A=="number"){A&&(a.go?a.go(A):console.warn("Router integration does not support relative routing"));return}const{replace:O,resolve:D,scroll:N,state:R}={replace:!1,resolve:!0,scroll:!0,...T},U=D?E.resolvePath(A):Kt("",A);if(U===void 0)throw new Error(`Path '${A}' is not a routable path`);if(g.length>=Eo)throw new Error("Too many redirects");const z=d();if((U!==z||R!==m())&&!uo){const J=g.push({value:z,replace:O,scroll:N,state:m()});y(()=>{p(U),_(R)}).then(()=>{g.length===J&&k({value:U,state:R})})}})}function x(E){return E=E||Un(Qt)||b,(A,T)=>v(E,A,T)}function k(E){const A=g[0];A&&((E.value!==A.value||E.state!==A.state)&&o({...E,replace:A.replace,scroll:A.scroll}),g.length=0)}Ee(()=>{const{value:E,state:A}=i();le(()=>{E!==d()&&y(()=>{p(E),_(A)})})});{let E=function(A){if(A.defaultPrevented||A.button!==0||A.metaKey||A.altKey||A.ctrlKey||A.shiftKey)return;const T=A.composedPath().find(J=>J instanceof Node&&J.nodeName.toUpperCase()==="A");if(!T||!T.hasAttribute("link"))return;const O=T.href;if(T.target||!O&&!T.hasAttribute("state"))return;const D=(T.getAttribute("rel")||"").split(/\s+/);if(T.hasAttribute("download")||D&&D.includes("external"))return;const N=new URL(O),R=Ve(N.pathname);if(N.origin!==window.location.origin||l&&R&&!R.toLowerCase().startsWith(l.toLowerCase()))return;const U=s(R+Ve(N.search,!0)+Ve(N.hash)),z=T.getAttribute("state");A.preventDefault(),v(b,U,{resolve:!1,replace:T.hasAttribute("replace"),scroll:!T.hasAttribute("noscroll"),state:z&&JSON.parse(z)})};var S=E;yt(["click"]),document.addEventListener("click",E),Xt(()=>document.removeEventListener("click",E))}return{base:b,out:c,location:w,isRouting:f,renderPath:u,parsePath:s,navigatorFactory:x}}function Do(e,t,n,r){const{base:i,location:o,navigatorFactory:a}=e,{pattern:s,element:u,preload:l,data:c}=r().route,f=H(()=>r().path),h=zr(()=>r().params);l&&l();const y={parent:t,pattern:s,get child(){return n()},path:f,params:h,data:t.data,outlet:u,resolvePath(d){return Kt(i.path(),d,f())}};if(c)try{st=y,y.data=c({data:t.data,params:h,location:o,navigate:a(y)})}finally{st=void 0}return y}const Io=ke("<a link></a>"),Oo=e=>{const{source:t,url:n,base:r,data:i,out:o}=e,a=t||yo(),s=To(a,r,i);return j(Yr.Provider,{value:s,get children(){return e.children}})},Bo=e=>{const t=Jt(),n=Zt(),r=Vn(()=>e.children),i=H(()=>Qr(r(),Hr(n.pattern,e.base||""),Mo)),o=H(()=>Ro(i(),t.location.pathname));t.out&&t.out.matches.push(o().map(({route:l,path:c,params:f})=>({originalPath:l.originalPath,pattern:l.pattern,path:c,params:f})));const a=[];let s;const u=H(Tr(o,(l,c,f)=>{let h=c&&l.length===c.length;const y=[];for(let d=0,p=l.length;d<p;d++){const m=c&&c[d],_=l[d];f&&m&&_.route.key===m.route.key?y[d]=f[d]:(h=!1,a[d]&&a[d](),nt(w=>{a[d]=w,y[d]=Do(t,y[d-1]||n,()=>u()[d+1],()=>o()[d])}))}return a.splice(l.length).forEach(d=>d()),f&&h?f:(s=y[0],y)}));return j(Wr,{get when(){return u()&&s},children:l=>j(Qt.Provider,{value:l,get children(){return l.outlet()}})})},Ze=e=>{const t=Vn(()=>e.children);return pn(e,{get children(){return t()}})},Mo=()=>{const e=Zt();return j(Wr,{get when(){return e.child},children:t=>j(Qt.Provider,{value:t,get children(){return t.outlet()}})})};function ut(e){e=pn({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=Ui(e,["href","state","activeClass","inactiveClass","end"]),n=So(()=>e.href),r=Ao(n),i=Co(),o=H(()=>{const a=n();if(a===void 0)return!1;const s=a.split(/[?#]/,1)[0].toLowerCase(),u=i.pathname.toLowerCase();return e.end?s===u:u.startsWith(s)});return(()=>{const a=Io.cloneNode(!0);return io(a,pn(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{[e.inactiveClass]:!o(),[e.activeClass]:o(),...t.classList}},get["aria-current"](){return o()?"page":void 0}}),!1,!1),a})()}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var I=function(){return I=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},I.apply(this,arguments)};function yn(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var L=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,W=Object.keys,Y=Array.isArray;typeof Promise<"u"&&!L.Promise&&(L.Promise=Promise);function Q(e,t){return typeof t!="object"||W(t).forEach(function(n){e[n]=t[n]}),e}var lt=Object.getPrototypeOf,Lo={}.hasOwnProperty;function ee(e,t){return Lo.call(e,t)}function qe(e,t){typeof t=="function"&&(t=t(lt(e))),(typeof Reflect>"u"?W:Reflect.ownKeys)(t).forEach(function(n){ye(e,n,t[n])})}var Jr=Object.defineProperty;function ye(e,t,n,r){Jr(e,t,Q(n&&ee(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Ye(e){return{from:function(t){return e.prototype=Object.create(t.prototype),ye(e.prototype,"constructor",e),{extend:qe.bind(null,e.prototype)}}}}var Fo=Object.getOwnPropertyDescriptor;function zn(e,t){var n=Fo(e,t),r;return n||(r=lt(e))&&zn(r,t)}var No=[].slice;function en(e,t,n){return No.call(e,t,n)}function Zr(e,t){return t(e)}function et(e){if(!e)throw new Error("Assertion Failed")}function ei(e){L.setImmediate?setImmediate(e):setTimeout(e,0)}function ti(e,t){return e.reduce(function(n,r,i){var o=t(r,i);return o&&(n[o[0]]=o[1]),n},{})}function $o(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function ve(e,t){if(ee(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var o=ve(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(a!==-1){var s=e[t.substr(0,a)];return s===void 0?void 0:ve(s,t.substr(a+1))}}function ie(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){et(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)ie(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var a=t.substr(0,o),s=t.substr(o+1);if(s==="")n===void 0?Y(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var u=e[a];(!u||!ee(e,a))&&(u=e[a]={}),ie(u,s,n)}}else n===void 0?Y(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function jo(e,t){typeof t=="string"?ie(e,t,void 0):"length"in t&&[].map.call(t,function(n){ie(e,n,void 0)})}function ni(e){var t={};for(var n in e)ee(e,n)&&(t[n]=e[n]);return t}var Wo=[].concat;function ri(e){return Wo.apply([],e)}var ii="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ri([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return L[e]}),Uo=ii.map(function(e){return L[e]});ti(ii,function(e){return[e,!0]});var we=null;function mt(e){we=typeof WeakMap<"u"&&new WeakMap;var t=mn(e);return we=null,t}function mn(e){if(!e||typeof e!="object")return e;var t=we&&we.get(e);if(t)return t;if(Y(e)){t=[],we&&we.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(mn(e[n]))}else if(Uo.indexOf(e.constructor)>=0)t=e;else{var i=lt(e);t=i===Object.prototype?{}:Object.create(i),we&&we.set(e,t);for(var o in e)ee(e,o)&&(t[o]=mn(e[o]))}return t}var Vo={}.toString;function gn(e){return Vo.call(e).slice(8,-1)}var bn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ho=typeof bn=="symbol"?function(e){var t;return e!=null&&(t=e[bn])&&t.apply(e)}:function(){return null},Ue={};function de(e){var t,n,r,i;if(arguments.length===1){if(Y(e))return e.slice();if(this===Ue&&typeof e=="string")return[e];if(i=Ho(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var qn=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ce=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function oi(e,t){ce=e,ai=t}var ai=function(){return!0},zo=!new Error("").stack;function Ne(){if(zo)try{throw Ne.arguments,new Error}catch(e){return e}return new Error}function wn(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(ai).map(function(r){return`
`+r}).join("")):""}var qo=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],si=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Yn=qo.concat(si),Yo={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Xe(e,t){this._e=Ne(),this.name=e,this.message=t}Ye(Xe).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+wn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function ui(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function $t(e,t,n,r){this._e=Ne(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=ui(e,t)}Ye($t).from(Xe);function it(e,t){this._e=Ne(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=ui(e,t)}Ye(it).from(Xe);var Xn=Yn.reduce(function(e,t){return e[t]=t+"Error",e},{}),Xo=Xe,K=Yn.reduce(function(e,t){var n=t+"Error";function r(i,o){this._e=Ne(),this.name=n,i?typeof i=="string"?(this.message=""+i+(o?`
 `+o:""),this.inner=o||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=Yo[t]||n,this.inner=null)}return Ye(r).from(Xo),e[t]=r,e},{});K.Syntax=SyntaxError;K.Type=TypeError;K.Range=RangeError;var vr=si.reduce(function(e,t){return e[t+"Error"]=K[t],e},{});function Go(e,t){if(!e||e instanceof Xe||e instanceof TypeError||e instanceof SyntaxError||!e.name||!vr[e.name])return e;var n=new vr[e.name](t||e.message,e);return"stack"in e&&ye(n,"stack",{get:function(){return this.inner.stack}}),n}var tn=Yn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=K[t]),e},{});tn.ModifyError=$t;tn.DexieError=Xe;tn.BulkError=it;function B(){}function gt(e){return e}function Qo(e,t){return e==null||e===gt?t:function(n){return t(e(n))}}function Oe(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Jo(e,t){return e===B?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Oe(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Oe(i,this.onerror):i),o!==void 0?o:n}}function Zo(e,t){return e===B?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Oe(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Oe(r,this.onerror):r)}}function ea(e,t){return e===B?t:function(n){var r=e.apply(this,arguments);Q(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Oe(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Oe(o,this.onerror):o),r===void 0?a===void 0?void 0:a:Q(r,a)}}function ta(e,t){return e===B?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Gn(e,t){return e===B?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}var ct={},na=100,ra=20,li=100,Qn=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,lt(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,lt(t),e]}(),_n=Qn[0],jt=Qn[1],xn=Qn[2],ci=jt&&jt.then,Tt=_n&&_n.constructor,Jn=!!xn,En=!1,ia=xn?function(){xn.then(At)}:L.setImmediate?setImmediate.bind(null,At):L.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){At(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(At,0)},ft=function(e,t){tt.push([e,t]),Wt&&(ia(),Wt=!1)},Sn=!0,Wt=!0,De=[],Dt=[],An=null,Cn=gt,He={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:gr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{gr(e[0],e[1])}catch{}})}},P=He,tt=[],Ie=0,It=[];function C(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=B,this._lib=!1;var t=this._PSD=P;if(ce&&(this._stackHolder=Ne(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==ct)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Pn(this,this._value);return}this._state=null,this._value=null,++t.ref,hi(this,e)}var kn={get:function(){var e=P,t=Ut;function n(r,i){var o=this,a=!e.global&&(e!==P||t!==Ut),s=a&&!me(),u=new C(function(l,c){Zn(o,new fi(Ht(r,e,a,s),Ht(i,e,a,s),l,c,e))});return ce&&vi(u,this),u}return n.prototype=ct,n},set:function(e){ye(this,"then",e&&e.prototype===ct?kn:{get:function(){return e},set:kn.set})}};qe(C.prototype,{then:kn,_then:function(e,t){Zn(this,new fi(null,null,e,t,P))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Ot(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Ot(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Ot(t)})},stack:{get:function(){if(this._stack)return this._stack;try{En=!0;var e=pi(this,[],ra),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{En=!1}}},timeout:function(e,t){var n=this;return e<1/0?new C(function(r,i){var o=setTimeout(function(){return i(new K.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&ye(C.prototype,Symbol.toStringTag,"Dexie.Promise");He.env=yi();function fi(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}qe(C,{all:function(){var e=de.apply(null,arguments).map(Vt);return new C(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,o){return C.resolve(i).then(function(a){e[o]=a,--r||t(e)},n)})})},resolve:function(e){if(e instanceof C)return e;if(e&&typeof e.then=="function")return new C(function(n,r){e.then(n,r)});var t=new C(ct,!0,e);return vi(t,An),t},reject:Ot,race:function(){var e=de.apply(null,arguments).map(Vt);return new C(function(t,n){e.map(function(r){return C.resolve(r).then(t,n)})})},PSD:{get:function(){return P},set:function(e){return P=e}},totalEchoes:{get:function(){return Ut}},newPSD:Se,usePSD:Qe,scheduler:{get:function(){return ft},set:function(e){ft=e}},rejectionMapper:{get:function(){return Cn},set:function(e){Cn=e}},follow:function(e,t){return new C(function(n,r){return Se(function(i,o){var a=P;a.unhandleds=[],a.onunhandled=o,a.finalize=Oe(function(){var s=this;aa(function(){s.unhandleds.length===0?i():o(s.unhandleds[0])})},a.finalize),e()},t,n,r)})}});Tt&&(Tt.allSettled&&ye(C,"allSettled",function(){var e=de.apply(null,arguments).map(Vt);return new C(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,o){return C.resolve(i).then(function(a){return r[o]={status:"fulfilled",value:a}},function(a){return r[o]={status:"rejected",reason:a}}).then(function(){return--n||t(r)})})})}),Tt.any&&typeof AggregateError<"u"&&ye(C,"any",function(){var e=de.apply(null,arguments).map(Vt);return new C(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(o,a){return C.resolve(o).then(function(s){return t(s)},function(s){i[a]=s,--r||n(new AggregateError(i))})})})}));function hi(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&bt();n&&typeof n.then=="function"?hi(e,function(i,o){n instanceof C?n._then(i,o):n.then(i,o)}):(e._state=!0,e._value=n,di(e)),r&&wt()}},Pn.bind(null,e))}catch(n){Pn(e,n)}}function Pn(e,t){if(Dt.push(t),e._state===null){var n=e._lib&&bt();t=Cn(t),e._state=!1,e._value=t,ce&&t!==null&&typeof t=="object"&&!t._promise&&$o(function(){var r=zn(t,"stack");t._promise=e,ye(t,"stack",{get:function(){return En?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),sa(e),di(e),n&&wt()}}function di(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Zn(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Ie===0&&(++Ie,ft(function(){--Ie===0&&er()},[]))}function Zn(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ie,ft(oa,[n,e,t])}function oa(e,t,n){try{An=t;var r,i=t._value;t._state?r=e(i):(Dt.length&&(Dt=[]),r=e(i),Dt.indexOf(i)===-1&&ua(t)),n.resolve(r)}catch(o){n.reject(o)}finally{An=null,--Ie===0&&er(),--n.psd.ref||n.psd.finalize()}}function pi(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,o,a;i!=null?(o=i.name||"Error",a=i.message||i,r=wn(i,0)):(o=i,a=""),t.push(o+(a?": "+a:"")+r)}return ce&&(r=wn(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&pi(e._prev,t,n)),t}function vi(e,t){var n=t?t._numPrev+1:0;n<na&&(e._prev=t,e._numPrev=n)}function At(){bt()&&wt()}function bt(){var e=Sn;return Sn=!1,Wt=!1,e}function wt(){var e,t,n;do for(;tt.length>0;)for(e=tt,tt=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(tt.length>0);Sn=!0,Wt=!0}function er(){var e=De;De=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=It.slice(0),n=t.length;n;)t[--n]()}function aa(e){function t(){e(),It.splice(It.indexOf(t),1)}It.push(t),++Ie,ft(function(){--Ie===0&&er()},[])}function sa(e){De.some(function(t){return t._value===e._value})||De.push(e)}function ua(e){for(var t=De.length;t;)if(De[--t]._value===e._value){De.splice(t,1);return}}function Ot(e){return new C(ct,!1,e)}function F(e,t){var n=P;return function(){var r=bt(),i=P;try{return Ae(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{Ae(i,!1),r&&wt()}}}var q={awaits:0,echoes:0,id:0},la=0,Bt=[],an=0,Ut=0,ca=0;function Se(e,t,n,r){var i=P,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++ca;var a=He.env;o.env=Jn?{Promise:C,PromiseProp:{value:C,configurable:!0,writable:!0},all:C.all,race:C.race,allSettled:C.allSettled,any:C.any,resolve:C.resolve,reject:C.reject,nthen:yr(a.nthen,o),gthen:yr(a.gthen,o)}:{},t&&Q(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=Qe(o,e,n,r);return o.ref===0&&o.finalize(),s}function Ge(){return q.id||(q.id=++la),++q.awaits,q.echoes+=li,q.id}function me(){return q.awaits?(--q.awaits===0&&(q.id=0),q.echoes=q.awaits*li,!0):!1}(""+ci).indexOf("[native code]")===-1&&(Ge=me=B);function Vt(e){return q.echoes&&e&&e.constructor===Tt?(Ge(),e.then(function(t){return me(),t},function(t){return me(),V(t)})):e}function fa(e){++Ut,(!q.echoes||--q.echoes===0)&&(q.echoes=q.id=0),Bt.push(P),Ae(e,!0)}function ha(){var e=Bt[Bt.length-1];Bt.pop(),Ae(e,!1)}function Ae(e,t){var n=P;if((t?q.echoes&&(!an++||e!==P):an&&(!--an||e!==P))&&mi(t?fa.bind(null,e):ha),e!==P&&(P=e,n===He&&(He.env=yi()),Jn)){var r=He.env.Promise,i=e.env;jt.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(L,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function yi(){var e=L.Promise;return Jn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(L,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:jt.then,gthen:e.prototype.then}:{}}function Qe(e,t,n,r,i){var o=P;try{return Ae(e,!0),t(n,r,i)}finally{Ae(o,!1)}}function mi(e){ci.call(_n,e)}function Ht(e,t,n,r){return typeof e!="function"?e:function(){var i=P;n&&Ge(),Ae(t,!0);try{return e.apply(this,arguments)}finally{Ae(i,!1),r&&mi(me)}}}function yr(e,t){return function(n,r){return e.call(this,Ht(n,t),Ht(r,t))}}var mr="unhandledrejection";function gr(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(L.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(mr,!0,!0),Q(r,i)):L.CustomEvent&&(r=new CustomEvent(mr,{detail:i}),Q(r,i)),r&&L.dispatchEvent&&(dispatchEvent(r),!L.PromiseRejectionEvent&&L.onunhandledrejection))try{L.onunhandledrejection(r)}catch{}ce&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var V=C.reject;function Rn(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!P.letThrough&&!e._vip){if(e._state.openComplete)return V(new K.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return V(new K.DatabaseClosed);e.open().catch(B)}return e._state.dbReadyPromise.then(function(){return Rn(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===Xn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Rn(e,t,n,r)})):V(o)}return i._promise(t,function(o,a){return Se(function(){return P.trans=i,r(o,a,i)})}).then(function(o){return i._completion.then(function(){return o})})}}var br="3.2.2",Re=String.fromCharCode(65535),Kn=-1/0,fe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",gi="String expected.",ot=[],nn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),da=nn,pa=nn,bi=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},rn="__dbnames",sn="readonly",un="readwrite";function Be(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var wi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ct(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=mt(t),delete t[e]),t}:function(t){return t}}var va=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||P.trans,o=this.name;function a(u,l,c){if(!c.schema[o])throw new K.NotFound("Table "+o+" not part of transaction");return n(c.idbtrans,c)}var s=bt();try{return i&&i.db===this.db?i===P.trans?i._promise(t,a,r):Se(function(){return i._promise(t,a,r)},{trans:i,transless:P.transless||P}):Rn(this.db,t,[this.name],a)}finally{s&&wt()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(o){return r.hook.reading.fire(o)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(Y(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=W(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(c){return c.compound&&n.every(function(f){return c.keyPath.indexOf(f)>=0})&&c.keyPath.every(function(f){return n.indexOf(f)>=0})})[0];if(r&&this.db._maxKey!==Re)return this.where(r.name).equals(r.keyPath.map(function(c){return t[c]}));!r&&ce&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,o=this.db._deps.indexedDB;function a(c,f){try{return o.cmp(c,f)===0}catch{return!1}}var s=n.reduce(function(c,f){var h=c[0],y=c[1],d=i[f],p=t[f];return[h||d,h||!d?Be(y,d&&d.multi?function(m){var _=ve(m,f);return Y(_)&&_.some(function(w){return a(p,w)})}:function(m){return a(p,ve(m,f))}):y]},[null,null]),u=s[0],l=s[1];return u?this.where(u.name).equals(t[u.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,Y(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var o in r)if(ee(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){Q(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,s=t;return a&&o&&(s=Ct(a)(t)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"add",keys:n!=null?[n]:null,values:[s]})}).then(function(u){return u.numFailures?C.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{ie(t,a,u)}catch{}return u})},e.prototype.update=function(t,n){if(typeof t=="object"&&!Y(t)){var r=ve(t,this.schema.primKey.keyPath);if(r===void 0)return V(new K.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?W(n).forEach(function(i){ie(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,s=t;return a&&o&&(s=Ct(a)(t)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"put",values:[s],keys:n!=null?[n]:null})}).then(function(u){return u.numFailures?C.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{ie(t,a,u)}catch{}return u})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?C.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:wi})}).then(function(n){return n.numFailures?C.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(o){return n.hook.reading.fire(o)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,l=u.auto,c=u.keyPath;if(c&&o)throw new K.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,h=c&&l?t.map(Ct(c)):t;return i.core.mutate({trans:s,type:"add",keys:o,values:h,wantResults:a}).then(function(y){var d=y.numFailures,p=y.results,m=y.lastResult,_=y.failures,w=a?p:m;if(d===0)return w;throw new it(i.name+".bulkAdd(): "+d+" of "+f+" operations failed",_)})})},e.prototype.bulkPut=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,l=u.auto,c=u.keyPath;if(c&&o)throw new K.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new K.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,h=c&&l?t.map(Ct(c)):t;return i.core.mutate({trans:s,type:"put",keys:o,values:h,wantResults:a}).then(function(y){var d=y.numFailures,p=y.results,m=y.lastResult,_=y.failures,w=a?p:m;if(d===0)return w;throw new it(i.name+".bulkPut(): "+d+" of "+f+" operations failed",_)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var o=i.numFailures,a=i.lastResult,s=i.failures;if(o===0)return a;throw new it(n.name+".bulkDelete(): "+o+" of "+r+" operations failed",s)})},e}();function _t(e){var t={},n=function(s,u){if(u){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return t[s].subscribe.apply(null,c),e}else if(typeof s=="string")return t[s]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(s,u,l){if(typeof s=="object")return a(s);u||(u=ta),l||(l=B);var c={subscribers:[],fire:l,subscribe:function(f){c.subscribers.indexOf(f)===-1&&(c.subscribers.push(f),c.fire=u(c.fire,f))},unsubscribe:function(f){c.subscribers=c.subscribers.filter(function(h){return h!==f}),c.fire=c.subscribers.reduce(u,l)}};return t[s]=n[s]=c,c}function a(s){W(s).forEach(function(u){var l=s[u];if(Y(l))o(u,s[u][0],s[u][1]);else if(l==="asap")var c=o(u,gt,function(){for(var h=arguments.length,y=new Array(h);h--;)y[h]=arguments[h];c.subscribers.forEach(function(d){ei(function(){d.apply(null,y)})})});else throw new K.InvalidArgument("Invalid event config")})}}function xt(e,t){return Ye(t).from({prototype:e}),t}function ya(e){return xt(va.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:_t(null,{creating:[Jo,B],reading:[Qo,gt],updating:[ea,B],deleting:[Zo,B]})})}function je(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function ln(e,t){e.filter=Be(e.filter,t)}function cn(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Be(r(),t())}:t,e.justLimit=n&&!r}function ma(e,t){e.isMatch=Be(e.isMatch,t)}function Mt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new K.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function wr(e,t,n){var r=Mt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function kt(e,t,n,r){var i=e.replayFilter?Be(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(s,u,l){if(!i||i(u,l,function(h){return u.stop(h)},function(h){return u.fail(h)})){var c=u.primaryKey,f=""+c;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(c)),ee(o,f)||(o[f]=!0,t(s,u,l))}};return Promise.all([e.or._iterate(a,n),_r(wr(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}else return _r(wr(e,r,n),Be(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function _r(e,t,n,r){var i=r?function(a,s,u){return n(r(a),s,u)}:n,o=F(i);return e.then(function(a){if(a)return a.start(function(){var s=function(){return a.continue()};(!t||t(a,function(u){return s=u},function(u){a.stop(u),s=B},function(u){a.fail(u),s=B}))&&o(a.value,a,function(u){return s=u}),s()})})}function G(e,t){try{var n=xr(e),r=xr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return ba(Er(e),Er(t));case"Array":return ga(e,t)}}catch{}return NaN}function ga(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var a=G(e[o],t[o]);if(a!==0)return a}return n===r?0:n<r?-1:1}function ba(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}function xr(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=gn(e);return n==="ArrayBuffer"?"binary":n}function Er(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var wa=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,V.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,V.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Be(n.algorithm,t)},e.prototype._iterate=function(t,n){return kt(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&Q(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return kt(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,o=i.table.core;if(je(i,!0))return o.count({trans:r,query:{index:Mt(i,o.schema),range:i.range}}).then(function(s){return Math.min(s,i.limit)});var a=0;return kt(i,function(){return++a,!1},r,o).then(function(){return a})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],o=r.length-1;function a(l,c){return c?a(l[r[c]],c-1):l[i]}var s=this._ctx.dir==="next"?1:-1;function u(l,c){var f=a(l,o),h=a(c,o);return f<h?-s:f>h?s:0}return this.toArray(function(l){return l.sort(u)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&je(i,!0)&&i.limit>0){var o=i.valueMapper,a=Mt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:a,range:i.range}}).then(function(u){var l=u.result;return o?l.map(o):l})}else{var s=[];return kt(i,function(u){return s.push(u)},r,i.table.core).then(function(){return s})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,je(n)?cn(n,function(){var r=t;return function(i,o){return r===0?!0:r===1?(--r,!1):(o(function(){i.advance(r),r=0}),!1)}}):cn(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),cn(this._ctx,function(){var n=t;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this},e.prototype.until=function(t,n){return ln(this._ctx,function(r,i,o){return t(r.value)?(i(o),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return ln(this._ctx,function(n){return t(n.value)}),ma(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&je(n,!0)&&n.limit>0)return this._read(function(i){var o=Mt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(i){var o=i.result;return o}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return ln(this._ctx,function(i){var o=i.primaryKey.toString(),a=ee(r,o);return r[o]=!0,!a}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var o;if(typeof t=="function")o=t;else{var a=W(t),s=a.length;o=function(_){for(var w=!1,g=0;g<s;++g){var b=a[g],v=t[b];ve(_,b)!==v&&(ie(_,b,v),w=!0)}return w}}var u=r.table.core,l=u.schema.primaryKey,c=l.outbound,f=l.extractKey,h=n.db._options.modifyChunkSize||200,y=[],d=0,p=[],m=function(_,w){var g=w.failures,b=w.numFailures;d+=_-b;for(var v=0,x=W(g);v<x.length;v++){var k=x[v];y.push(g[k])}};return n.clone().primaryKeys().then(function(_){var w=function(g){var b=Math.min(h,_.length-g);return u.getMany({trans:i,keys:_.slice(g,g+b),cache:"immutable"}).then(function(v){for(var x=[],k=[],S=c?[]:null,E=[],A=0;A<b;++A){var T=v[A],O={value:mt(T),primKey:_[g+A]};o.call(O,O.value,O)!==!1&&(O.value==null?E.push(_[g+A]):!c&&G(f(T),f(O.value))!==0?(E.push(_[g+A]),x.push(O.value)):(k.push(O.value),c&&S.push(_[g+A])))}var D=je(r)&&r.limit===1/0&&(typeof t!="function"||t===fn)&&{index:r.index,range:r.range};return Promise.resolve(x.length>0&&u.mutate({trans:i,type:"add",values:x}).then(function(N){for(var R in N.failures)E.splice(parseInt(R),1);m(x.length,N)})).then(function(){return(k.length>0||D&&typeof t=="object")&&u.mutate({trans:i,type:"put",keys:S,values:k,criteria:D,changeSpec:typeof t!="function"&&t}).then(function(N){return m(k.length,N)})}).then(function(){return(E.length>0||D&&t===fn)&&u.mutate({trans:i,type:"delete",keys:E,criteria:D}).then(function(N){return m(E.length,N)})}).then(function(){return _.length>g+b&&w(g+h)})})};return w(0).then(function(){if(y.length>0)throw new $t("Error modifying one or more objects",y,d,p);return _.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return je(t)&&(t.isPrimKey&&!pa||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,o=n;return t.table.core.count({trans:r,query:{index:i,range:o}}).then(function(a){return t.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(function(s){var u=s.failures;s.lastResult,s.results;var l=s.numFailures;if(l)throw new $t("Could not delete some values",Object.keys(u).map(function(c){return u[c]}),a-l);return a-l})})}):this.modify(fn)},e}(),fn=function(e,t){return t.value=null};function _a(e){return xt(wa.prototype,function(n,r){this.db=e;var i=wi,o=null;if(r)try{i=r()}catch(l){o=l}var a=n._ctx,s=a.table,u=s.hook.reading.fire;this._ctx={table:s,index:a.index,isPrimKey:!a.index||s.schema.primKey.keyPath&&a.index===s.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:a.or,valueMapper:u!==gt?u:null}})}function xa(e,t){return e<t?-1:e===t?0:1}function Ea(e,t){return e>t?-1:e===t?0:1}function Z(e,t,n){var r=e instanceof xi?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function We(e){return new e.Collection(e,function(){return _i("")}).limit(0)}function Sa(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Aa(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function Ca(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,u=0;u<a;++u){var l=t[u];if(l!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[u],l)<0&&(s=u)}return a<r.length&&o==="next"?e+n.substr(e.length):a<e.length&&o==="prev"?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function Pt(e,t,n,r){var i,o,a,s,u,l,c,f=n.length;if(!n.every(function(p){return typeof p=="string"}))return Z(e,gi);function h(p){i=Sa(p),o=Aa(p),a=p==="next"?xa:Ea;var m=n.map(function(_){return{lower:o(_),upper:i(_)}}).sort(function(_,w){return a(_.lower,w.lower)});s=m.map(function(_){return _.upper}),u=m.map(function(_){return _.lower}),l=p,c=p==="next"?"":r}h("next");var y=new e.Collection(e,function(){return be(s[0],u[f-1]+r)});y._ondirectionchange=function(p){h(p)};var d=0;return y._addAlgorithm(function(p,m,_){var w=p.key;if(typeof w!="string")return!1;var g=o(w);if(t(g,u,d))return!0;for(var b=null,v=d;v<f;++v){var x=Ca(w,g,s[v],u[v],a,l);x===null&&b===null?d=v+1:(b===null||a(b,x)>0)&&(b=x)}return m(b!==null?function(){p.continue(b+c)}:_),!1}),y}function be(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function _i(e){return{type:1,lower:e,upper:e}}var xi=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?We(this):new this.Collection(this,function(){return be(t,n,!r,!i)})}catch{return Z(this,fe)}},e.prototype.equals=function(t){return t==null?Z(this,fe):new this.Collection(this,function(){return _i(t)})},e.prototype.above=function(t){return t==null?Z(this,fe):new this.Collection(this,function(){return be(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?Z(this,fe):new this.Collection(this,function(){return be(t,void 0,!1)})},e.prototype.below=function(t){return t==null?Z(this,fe):new this.Collection(this,function(){return be(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?Z(this,fe):new this.Collection(this,function(){return be(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?Z(this,gi):this.between(t,t+Re,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Pt(this,function(n,r){return n.indexOf(r[0])===0},[t],Re)},e.prototype.equalsIgnoreCase=function(t){return Pt(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=de.apply(Ue,arguments);return t.length===0?We(this):Pt(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=de.apply(Ue,arguments);return t.length===0?We(this):Pt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,Re)},e.prototype.anyOf=function(){var t=this,n=de.apply(Ue,arguments),r=this._cmp;try{n.sort(r)}catch{return Z(this,fe)}if(n.length===0)return We(this);var i=new this.Collection(this,function(){return be(n[0],n[n.length-1])});i._ondirectionchange=function(a){r=a==="next"?t._ascending:t._descending,n.sort(r)};var o=0;return i._addAlgorithm(function(a,s,u){for(var l=a.key;r(l,n[o])>0;)if(++o,o===n.length)return s(u),!1;return r(l,n[o])===0?!0:(s(function(){a.continue(n[o])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[Kn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=de.apply(Ue,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Z(this,fe)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Kn,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,o=this._ascending,a=this._descending,s=this._min,u=this._max;if(t.length===0)return We(this);if(!t.every(function(v){return v[0]!==void 0&&v[1]!==void 0&&o(v[0],v[1])<=0}))return Z(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",K.InvalidArgument);var l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;function f(v,x){for(var k=0,S=v.length;k<S;++k){var E=v[k];if(i(x[0],E[1])<0&&i(x[1],E[0])>0){E[0]=s(E[0],x[0]),E[1]=u(E[1],x[1]);break}}return k===S&&v.push(x),v}var h=o;function y(v,x){return h(v[0],x[0])}var d;try{d=t.reduce(f,[]),d.sort(y)}catch{return Z(this,fe)}var p=0,m=c?function(v){return o(v,d[p][1])>0}:function(v){return o(v,d[p][1])>=0},_=l?function(v){return a(v,d[p][0])>0}:function(v){return a(v,d[p][0])>=0};function w(v){return!m(v)&&!_(v)}var g=m,b=new this.Collection(this,function(){return be(d[0][0],d[d.length-1][1],!l,!c)});return b._ondirectionchange=function(v){v==="next"?(g=m,h=o):(g=_,h=a),d.sort(y)},b._addAlgorithm(function(v,x,k){for(var S=v.key;g(S);)if(++p,p===d.length)return x(k),!1;return w(S)?!0:(r._cmp(S,d[p][1])===0||r._cmp(S,d[p][0])===0||x(function(){h===o?v.continue(d[p][0]):v.continue(d[p][1])}),!1)}),b},e.prototype.startsWithAnyOf=function(){var t=de.apply(Ue,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?We(this):this.inAnyRange(t.map(function(n){return[n,n+Re]})):Z(this,"startsWithAnyOf() only works with strings")},e}();function ka(e){return xt(xi.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var o=e._deps.indexedDB;if(!o)throw new K.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(a,s){return o.cmp(s,a)},this._max=function(a,s){return o.cmp(a,s)>0?a:s},this._min=function(a,s){return o.cmp(a,s)<0?a:s},this._IDBKeyRange=e._deps.IDBKeyRange})}function se(e){return F(function(t){return ht(t),e(t.target.error),!1})}function ht(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var dt="storagemutated",xe="x-storagemutated-1",Ce=_t(null,dt),Pa=function(){function e(){}return e.prototype._lock=function(){return et(!P.global),++this._reculock,this._reculock===1&&!P.global&&(P.lockOwnerFor=this),this},e.prototype._unlock=function(){if(et(!P.global),--this._reculock===0)for(P.global||(P.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Qe(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&P.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(et(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new K.DatabaseClosed(i);case"MissingAPIError":throw new K.MissingAPI(i.message,i);default:throw new K.OpenFailed(i)}if(!this.active)throw new K.TransactionInactive;return et(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=F(function(o){ht(o),n._reject(t.error)}),t.onabort=F(function(o){ht(o),n.active&&n._reject(new K.Abort(t.error)),n.active=!1,n.on("abort").fire(o)}),t.oncomplete=F(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Ce.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return V(new K.ReadOnly("Transaction is readonly"));if(!this.active)return V(new K.TransactionInactive);if(this._locked())return new C(function(a,s){i._blockedFuncs.push([function(){i._promise(t,n,r).then(a,s)},P])});if(r)return Se(function(){var a=new C(function(s,u){i._lock();var l=n(s,u,i);l&&l.then&&l.then(s,u)});return a.finally(function(){return i._unlock()}),a._lib=!0,a});var o=new C(function(a,s){var u=n(a,s,i);u&&u.then&&u.then(a,s)});return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=C.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var o=n._waitingFor;return new C(function(a,s){r.then(function(u){return n._waitingQueue.push(F(a.bind(null,u)))},function(u){return n._waitingQueue.push(F(s.bind(null,u)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new K.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(ee(n,t))return n[t];var r=this.schema[t];if(!r)throw new K.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function Ra(e){return xt(Pa.prototype,function(n,r,i,o,a){var s=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=_t(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new C(function(u,l){s._resolve=u,s._reject=l}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(u){var l=s.active;return s.active=!1,s.on.error.fire(u),s.parent?s.parent._reject(u):l&&s.idbtrans&&s.idbtrans.abort(),V(u)})})}function Tn(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+Ei(t)}}function Ei(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Si(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:ti(n,function(r){return[r.name,r]})}}function Ka(e){return e.length===1?e[0]:e}var pt=function(e){try{return e.only([[]]),pt=function(){return[[]]},[[]]}catch{return pt=function(){return Re},Re}};function Dn(e){return e==null?function(){}:typeof e=="string"?Ta(e):function(t){return ve(t,e)}}function Ta(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return ve(n,e)}}function Sr(e){return[].slice.call(e)}var Da=0;function at(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function Ia(e,t,n){function r(f,h){var y=Sr(f.objectStoreNames);return{schema:{name:f.name,tables:y.map(function(d){return h.objectStore(d)}).map(function(d){var p=d.keyPath,m=d.autoIncrement,_=Y(p),w=p==null,g={},b={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w,compound:_,keyPath:p,autoIncrement:m,unique:!0,extractKey:Dn(p)},indexes:Sr(d.indexNames).map(function(v){return d.index(v)}).map(function(v){var x=v.name,k=v.unique,S=v.multiEntry,E=v.keyPath,A=Y(E),T={name:x,compound:A,keyPath:E,unique:k,multiEntry:S,extractKey:Dn(E)};return g[at(E)]=T,T}),getIndexByKeyPath:function(v){return g[at(v)]}};return g[":id"]=b.primaryKey,p!=null&&(g[at(p)]=b.primaryKey),b})},hasGetAll:y.length>0&&"getAll"in h.objectStore(y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var h=f.lower,y=f.upper,d=f.lowerOpen,p=f.upperOpen,m=h===void 0?y===void 0?null:t.upperBound(y,!!p):y===void 0?t.lowerBound(h,!!d):t.bound(h,y,!!d,!!p);return m}function o(f){var h=f.name;function y(m){var _=m.trans,w=m.type,g=m.keys,b=m.values,v=m.range;return new Promise(function(x,k){x=F(x);var S=_.objectStore(h),E=S.keyPath==null,A=w==="put"||w==="add";if(!A&&w!=="delete"&&w!=="deleteRange")throw new Error("Invalid operation type: "+w);var T=(g||b||{length:1}).length;if(g&&b&&g.length!==b.length)throw new Error("Given keys array must have same length as given values array.");if(T===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});var O,D=[],N=[],R=0,U=function(ae){++R,ht(ae)};if(w==="deleteRange"){if(v.type===4)return x({numFailures:R,failures:N,results:[],lastResult:void 0});v.type===3?D.push(O=S.clear()):D.push(O=S.delete(i(v)))}else{var z=A?E?[b,g]:[b,null]:[g,null],J=z[0],oe=z[1];if(A)for(var te=0;te<T;++te)D.push(O=oe&&oe[te]!==void 0?S[w](J[te],oe[te]):S[w](J[te])),O.onerror=U;else for(var te=0;te<T;++te)D.push(O=S[w](J[te])),O.onerror=U}var ge=function(ae){var Je=ae.target.result;D.forEach(function(ne,Et){return ne.error!=null&&(N[Et]=ne.error)}),x({numFailures:R,failures:N,results:w==="delete"?g:D.map(function(ne){return ne.result}),lastResult:Je})};O.onerror=function(ae){U(ae),ge(ae)},O.onsuccess=ge})}function d(m){var _=m.trans,w=m.values,g=m.query,b=m.reverse,v=m.unique;return new Promise(function(x,k){x=F(x);var S=g.index,E=g.range,A=_.objectStore(h),T=S.isPrimaryKey?A:A.index(S.name),O=b?v?"prevunique":"prev":v?"nextunique":"next",D=w||!("openKeyCursor"in T)?T.openCursor(i(E),O):T.openKeyCursor(i(E),O);D.onerror=se(k),D.onsuccess=F(function(N){var R=D.result;if(!R){x(null);return}R.___id=++Da,R.done=!1;var U=R.continue.bind(R),z=R.continuePrimaryKey;z&&(z=z.bind(R));var J=R.advance.bind(R),oe=function(){throw new Error("Cursor not started")},te=function(){throw new Error("Cursor not stopped")};R.trans=_,R.stop=R.continue=R.continuePrimaryKey=R.advance=oe,R.fail=F(k),R.next=function(){var ge=this,ae=1;return this.start(function(){return ae--?ge.continue():ge.stop()}).then(function(){return ge})},R.start=function(ge){var ae=new Promise(function(ne,Et){ne=F(ne),D.onerror=se(Et),R.fail=Et,R.stop=function(Ki){R.stop=R.continue=R.continuePrimaryKey=R.advance=te,ne(Ki)}}),Je=function(){if(D.result)try{ge()}catch(ne){R.fail(ne)}else R.done=!0,R.start=function(){throw new Error("Cursor behind last entry")},R.stop()};return D.onsuccess=F(function(ne){D.onsuccess=Je,Je()}),R.continue=U,R.continuePrimaryKey=z,R.advance=J,Je(),ae},x(R)},k)})}function p(m){return function(_){return new Promise(function(w,g){w=F(w);var b=_.trans,v=_.values,x=_.limit,k=_.query,S=x===1/0?void 0:x,E=k.index,A=k.range,T=b.objectStore(h),O=E.isPrimaryKey?T:T.index(E.name),D=i(A);if(x===0)return w({result:[]});if(m){var N=v?O.getAll(D,S):O.getAllKeys(D,S);N.onsuccess=function(J){return w({result:J.target.result})},N.onerror=se(g)}else{var R=0,U=v||!("openKeyCursor"in O)?O.openCursor(D):O.openKeyCursor(D),z=[];U.onsuccess=function(J){var oe=U.result;if(!oe)return w({result:z});if(z.push(v?oe.value:oe.primaryKey),++R===x)return w({result:z});oe.continue()},U.onerror=se(g)}})}}return{name:h,schema:f,mutate:y,getMany:function(m){var _=m.trans,w=m.keys;return new Promise(function(g,b){g=F(g);for(var v=_.objectStore(h),x=w.length,k=new Array(x),S=0,E=0,A,T=function(R){var U=R.target;(k[U._pos]=U.result)!=null,++E===S&&g(k)},O=se(b),D=0;D<x;++D){var N=w[D];N!=null&&(A=v.get(w[D]),A._pos=D,A.onsuccess=T,A.onerror=O,++S)}S===0&&g(k)})},get:function(m){var _=m.trans,w=m.key;return new Promise(function(g,b){g=F(g);var v=_.objectStore(h),x=v.get(w);x.onsuccess=function(k){return g(k.target.result)},x.onerror=se(b)})},query:p(u),openCursor:d,count:function(m){var _=m.query,w=m.trans,g=_.index,b=_.range;return new Promise(function(v,x){var k=w.objectStore(h),S=g.isPrimaryKey?k:k.index(g.name),E=i(b),A=E?S.count(E):S.count();A.onsuccess=F(function(T){return v(T.target.result)}),A.onerror=se(x)})}}}var a=r(e,n),s=a.schema,u=a.hasGetAll,l=s.tables.map(function(f){return o(f)}),c={};return l.forEach(function(f){return c[f.name]=f}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(f){var h=c[f];if(!h)throw new Error("Table '"+f+"' not found");return c[f]},MIN_KEY:-1/0,MAX_KEY:pt(t),schema:s}}function Oa(e,t){return t.reduce(function(n,r){var i=r.create;return I(I({},n),i(n))},e)}function Ba(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var o=Oa(Ia(t,i,r),e.dbcore);return{dbcore:o}}function tr(e,t){var n=e._novip,r=t.db,i=Ba(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(o){var a=o.name;n.core.schema.tables.some(function(s){return s.name===a})&&(o.core=n.core.table(a),n[a]instanceof n.Table&&(n[a].core=o.core))})}function zt(e,t,n,r){var i=e._novip;n.forEach(function(o){var a=r[o];t.forEach(function(s){var u=zn(s,o);(!u||"value"in u&&u.value===void 0)&&(s===i.Transaction.prototype||s instanceof i.Transaction?ye(s,o,{get:function(){return this.table(o)},set:function(l){Jr(this,o,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):s[o]=new i.Table(o,a))})})}function In(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function Ma(e,t){return e._cfg.version-t._cfg.version}function La(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),s=P.transless||P;Se(function(){P.trans=o,P.transless=s,t===0?(W(i).forEach(function(u){nr(n,u,i[u].primKey,i[u].indexes)}),tr(e,n),C.follow(function(){return e.on.populate.fire(o)}).catch(a)):Fa(e,t,o,n).catch(a)})}function Fa(e,t,n,r){var i=e._novip,o=[],a=i._versions,s=i._dbSchema=rr(i,i.idbdb,r),u=!1,l=a.filter(function(f){return f._cfg.version>=t});l.forEach(function(f){o.push(function(){var h=s,y=f._cfg.dbschema;Bn(i,h,r),Bn(i,y,r),s=i._dbSchema=y;var d=Ai(h,y);d.add.forEach(function(b){nr(r,b[0],b[1].primKey,b[1].indexes)}),d.change.forEach(function(b){if(b.recreate)throw new K.Upgrade("Not yet support for changing primary key");var v=r.objectStore(b.name);b.add.forEach(function(x){return On(v,x)}),b.change.forEach(function(x){v.deleteIndex(x.name),On(v,x)}),b.del.forEach(function(x){return v.deleteIndex(x)})});var p=f._cfg.contentUpgrade;if(p&&f._cfg.version>t){tr(i,r),n._memoizedTables={},u=!0;var m=ni(y);d.del.forEach(function(b){m[b]=h[b]}),In(i,[i.Transaction.prototype]),zt(i,[i.Transaction.prototype],W(m),m),n.schema=m;var _=qn(p);_&&Ge();var w,g=C.follow(function(){if(w=p(n),w&&_){var b=me.bind(null,null);w.then(b,b)}});return w&&typeof w.then=="function"?C.resolve(w):g.then(function(){return w})}}),o.push(function(h){if(!u||!da){var y=f._cfg.dbschema;$a(y,h)}In(i,[i.Transaction.prototype]),zt(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function c(){return o.length?C.resolve(o.shift()(n.idbtrans)).then(c):C.resolve()}return c().then(function(){Na(s,r)})}function Ai(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(!i)n.add.push([r,o]);else{var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!nn)a.recreate=!0,n.change.push(a);else{var s=i.idxByName,u=o.idxByName,l=void 0;for(l in s)u[l]||a.del.push(l);for(l in u){var c=s[l],f=u[l];c?c.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}}return n}function nr(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(o){return On(i,o)}),i}function Na(e,t){W(e).forEach(function(n){t.db.objectStoreNames.contains(n)||nr(t,n,e[n].primKey,e[n].indexes)})}function $a(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function On(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function rr(e,t,n){var r={},i=en(t.objectStoreNames,0);return i.forEach(function(o){for(var a=n.objectStore(o),s=a.keyPath,u=Tn(Ei(s),s||"",!1,!1,!!a.autoIncrement,s&&typeof s!="string",!0),l=[],c=0;c<a.indexNames.length;++c){var f=a.index(a.indexNames[c]);s=f.keyPath;var h=Tn(f.name,s,!!f.unique,!!f.multiEntry,!1,s&&typeof s!="string",!1);l.push(h)}r[o]=Si(o,u,l)}),r}function ja(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=rr(r,t,n);r._storeNames=en(t.objectStoreNames,0),zt(r,[r._allTables],W(i),i)}function Wa(e,t){var n=rr(e,e.idbdb,t),r=Ai(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Bn(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,o=0;o<i.length;++o){var a=i[o],s=n.objectStore(a);r._hasGetAll="getAll"in s;for(var u=0;u<s.indexNames.length;++u){var l=s.indexNames[u],c=s.index(l).keyPath,f=typeof c=="string"?c:"["+en(c).join("+")+"]";if(t[a]){var h=t[a].idxByName[f];h&&(h.name=l,delete t[a].idxByName[f],t[a].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&L.WorkerGlobalScope&&L instanceof L.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function Ua(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Tn(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),Y(i),n===0)})}var Va=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){W(t).forEach(function(r){if(t[r]!==null){var i=Ua(t[r]),o=i.shift();if(o.multi)throw new K.Schema("Primary key cannot be multi-valued");i.forEach(function(a){if(a.auto)throw new K.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new K.Schema("Index must have a name and cannot be an empty string")}),n[r]=Si(r,o,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?Q(this._cfg.storesSource,t):t;var r=n._versions,i={},o={};return r.forEach(function(a){Q(i,a._cfg.storesSource),o=a._cfg.dbschema={},a._parseStoresSpec(i,o)}),n._dbSchema=o,In(n,[n._allTables,n,n.Transaction.prototype]),zt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],W(o),o),n._storeNames=W(o),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Gn(this._cfg.contentUpgrade||B,t),this},e}();function Ha(e){return xt(Va.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ir(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new ur(rn,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function or(e){return e&&typeof e.databases=="function"}function za(e){var t=e.indexedDB,n=e.IDBKeyRange;return or(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==rn})}):ir(t,n).toCollection().primaryKeys()}function qa(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!or(n)&&t!==rn&&ir(n,r).put({name:t}).catch(B)}function Ya(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!or(n)&&t!==rn&&ir(n,r).delete(t).catch(B)}function Mn(e){return Se(function(){return P.letThrough=!0,e()})}function Xa(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function Ga(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?V(t.dbOpenError):e});ce&&(t.openCanceller._stackHolder=Ne()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new K.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,a=null,s=!1;return C.race([r,(typeof navigator>"u"?C.resolve():Xa()).then(function(){return new C(function(u,l){if(i(),!n)throw new K.MissingAPI;var c=e.name,f=t.autoSchema?n.open(c):n.open(c,Math.round(e.verno*10));if(!f)throw new K.MissingAPI;f.onerror=se(l),f.onblocked=F(e._fireOnBlocked),f.onupgradeneeded=F(function(h){if(a=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=ht,a.abort(),f.result.close();var y=n.deleteDatabase(c);y.onsuccess=y.onerror=F(function(){l(new K.NoSuchDatabase("Database "+c+" doesnt exist"))})}else{a.onerror=se(l);var d=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;s=d<1,e._novip.idbdb=f.result,La(e,d/10,a,l)}},l),f.onsuccess=F(function(){a=null;var h=e._novip.idbdb=f.result,y=en(h.objectStoreNames);if(y.length>0)try{var d=h.transaction(Ka(y),"readonly");t.autoSchema?ja(e,h,d):(Bn(e,e._dbSchema,d),Wa(e,d)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),tr(e,d)}catch{}ot.push(e),h.onversionchange=F(function(p){t.vcFired=!0,e.on("versionchange").fire(p)}),h.onclose=F(function(p){e.on("close").fire(p)}),s&&qa(e._deps,c),u()},l)})})]).then(function(){return i(),t.onReadyBeingFired=[],C.resolve(Mn(function(){return e.on.ready.fire(e.vip)})).then(function u(){if(t.onReadyBeingFired.length>0){var l=t.onReadyBeingFired.reduce(Gn,B);return t.onReadyBeingFired=[],C.resolve(Mn(function(){return l(e.vip)})).then(u)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(u){t.dbOpenError=u;try{a&&a.abort()}catch{}return r===t.openCanceller&&e._close(),V(u)}).finally(function(){t.openComplete=!0,o()})}function Ln(e){var t=function(a){return e.next(a)},n=function(a){return e.throw(a)},r=o(t),i=o(n);function o(a){return function(s){var u=a(s),l=u.value;return u.done?l:!l||typeof l.then!="function"?Y(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return o(t)()}function Qa(e,t,n){var r=arguments.length;if(r<2)throw new K.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=ri(i);return[e,o,n]}function Ci(e,t,n,r,i){return C.resolve().then(function(){var o=P.transless||P,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===Xn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Ci(e,t,n,null,i)})):V(f)}var u=qn(i);u&&Ge();var l,c=C.follow(function(){if(l=i.call(a,a),l)if(u){var f=me.bind(null,null);l.then(f,f)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=Ln(l))},s);return(l&&typeof l.then=="function"?C.resolve(l).then(function(f){return a.active?f:V(new K.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return l})).then(function(f){return r&&a._resolve(),a._completion.then(function(){return f})}).catch(function(f){return a._reject(f),V(f)})})}function Rt(e,t,n){for(var r=Y(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function Ja(e){return I(I({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},o=[];function a(p,m,_){var w=at(p),g=i[w]=i[w]||[],b=p==null?0:typeof p=="string"?1:p.length,v=m>0,x=I(I({},_),{isVirtual:v,keyTail:m,keyLength:b,extractKey:Dn(p),unique:!v&&_.unique});if(g.push(x),x.isPrimaryKey||o.push(x),b>1){var k=b===2?p[0]:p.slice(0,b-1);a(k,m+1,_)}return g.sort(function(S,E){return S.keyTail-E.keyTail}),x}var s=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];for(var u=0,l=r.indexes;u<l.length;u++){var c=l[u];a(c.keyPath,0,c)}function f(p){var m=i[at(p)];return m&&m[0]}function h(p,m){return{type:p.type===1?2:p.type,lower:Rt(p.lower,p.lowerOpen?e.MAX_KEY:e.MIN_KEY,m),lowerOpen:!0,upper:Rt(p.upper,p.upperOpen?e.MIN_KEY:e.MAX_KEY,m),upperOpen:!0}}function y(p){var m=p.query.index;return m.isVirtual?I(I({},p),{query:{index:m,range:h(p.query.range,m.keyTail)}}):p}var d=I(I({},n),{schema:I(I({},r),{primaryKey:s,indexes:o,getIndexByKeyPath:f}),count:function(p){return n.count(y(p))},query:function(p){return n.query(y(p))},openCursor:function(p){var m=p.query.index,_=m.keyTail,w=m.isVirtual,g=m.keyLength;if(!w)return n.openCursor(p);function b(v){function x(S){S!=null?v.continue(Rt(S,p.reverse?e.MAX_KEY:e.MIN_KEY,_)):p.unique?v.continue(v.key.slice(0,g).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,_)):v.continue()}var k=Object.create(v,{continue:{value:x},continuePrimaryKey:{value:function(S,E){v.continuePrimaryKey(Rt(S,e.MAX_KEY,_),E)}},primaryKey:{get:function(){return v.primaryKey}},key:{get:function(){var S=v.key;return g===1?S[0]:S.slice(0,g)}},value:{get:function(){return v.value}}});return k}return n.openCursor(y(p)).then(function(v){return v&&b(v)})}});return d}})}var Za={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ja};function ar(e,t,n,r){return n=n||{},r=r||"",W(e).forEach(function(i){if(!ee(t,i))n[r+i]=void 0;else{var o=e[i],a=t[i];if(typeof o=="object"&&typeof a=="object"&&o&&a){var s=gn(o),u=gn(a);s!==u?n[r+i]=t[i]:s==="Object"?ar(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i])}else o!==a&&(n[r+i]=t[i])}}),W(t).forEach(function(i){ee(e,i)||(n[r+i]=t[i])}),n}function es(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ts={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return I(I({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=I(I({},n),{mutate:function(o){var a=P.trans,s=a.table(t).hook,u=s.deleting,l=s.creating,c=s.updating;switch(o.type){case"add":if(l.fire===B)break;return a._promise("readwrite",function(){return f(o)},!0);case"put":if(l.fire===B&&c.fire===B)break;return a._promise("readwrite",function(){return f(o)},!0);case"delete":if(u.fire===B)break;return a._promise("readwrite",function(){return f(o)},!0);case"deleteRange":if(u.fire===B)break;return a._promise("readwrite",function(){return h(o)},!0)}return n.mutate(o);function f(d){var p=P.trans,m=d.keys||es(r,d);if(!m)throw new Error("Keys missing");return d=d.type==="add"||d.type==="put"?I(I({},d),{keys:m}):I({},d),d.type!=="delete"&&(d.values=yn([],d.values,!0)),d.keys&&(d.keys=yn([],d.keys,!0)),ns(n,d,m).then(function(_){var w=m.map(function(g,b){var v=_[b],x={onerror:null,onsuccess:null};if(d.type==="delete")u.fire.call(x,g,v,p);else if(d.type==="add"||v===void 0){var k=l.fire.call(x,g,d.values[b],p);g==null&&k!=null&&(g=k,d.keys[b]=g,r.outbound||ie(d.values[b],r.keyPath,g))}else{var S=ar(v,d.values[b]),E=c.fire.call(x,S,g,v,p);if(E){var A=d.values[b];Object.keys(E).forEach(function(T){ee(A,T)?A[T]=E[T]:ie(A,T,E[T])})}}return x});return n.mutate(d).then(function(g){for(var b=g.failures,v=g.results,x=g.numFailures,k=g.lastResult,S=0;S<m.length;++S){var E=v?v[S]:m[S],A=w[S];E==null?A.onerror&&A.onerror(b[S]):A.onsuccess&&A.onsuccess(d.type==="put"&&_[S]?d.values[S]:E)}return{failures:b,results:v,numFailures:x,lastResult:k}}).catch(function(g){return w.forEach(function(b){return b.onerror&&b.onerror(g)}),Promise.reject(g)})})}function h(d){return y(d.trans,d.range,1e4)}function y(d,p,m){return n.query({trans:d,values:!1,query:{index:r,range:p},limit:m}).then(function(_){var w=_.result;return f({type:"delete",keys:w,trans:d}).then(function(g){return g.numFailures>0?Promise.reject(g.failures[0]):w.length<m?{failures:[],numFailures:0,lastResult:void 0}:y(d,I(I({},p),{lower:w[w.length-1],lowerOpen:!0}),m)})})}}});return i}})}};function ns(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function ki(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)G(t.keys[i],e[o])===0&&(r.push(n?mt(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch{return null}}var rs={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return I(I({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=ki(r.keys,r.trans._cache,r.cache==="clone");return i?C.resolve(i):n.getMany(r).then(function(o){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?mt(o):o},o})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},hn;function sr(e){return!("from"in e)}var he=function(e,t){if(this)Q(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new he;return e&&"d"in e&&Q(n,e),n}};qe(he.prototype,(hn={add:function(e){return qt(this,e),this},addKey:function(e){return vt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return vt(t,n,n)}),this}},hn[bn]=function(){return Fn(this)},hn));function vt(e,t,n){var r=G(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(sr(e))return Q(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(G(n,e.from)<0)return i?vt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Ar(e);if(G(t,e.to)>0)return o?vt(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Ar(e);G(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),G(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;i&&!e.l&&qt(e,i),o&&a&&qt(e,o)}}function qt(e,t){function n(r,i){var o=i.from,a=i.to,s=i.l,u=i.r;vt(r,o,a),s&&n(r,s),u&&n(r,u)}sr(t)||n(e,t)}function is(e,t){var n=Fn(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=Fn(e),a=o.next(i.from),s=a.value;!r.done&&!a.done;){if(G(s.from,i.to)<=0&&G(s.to,i.from)>=0)return!0;G(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(a=o.next(i.from)).value}return!1}function Fn(e){var t=sr(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&G(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||G(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ar(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var o=i==="r"?"l":"r",a=I({},e),s=e[i];e.from=s.from,e.to=s.to,e[i]=s[i],a[i]=s[o],e[o]=a,a.d=Cr(a)}e.d=Cr(e)}function Cr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var os={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new he(e.MIN_KEY,e.MAX_KEY);return I(I({},e),{table:function(r){var i=e.table(r),o=i.schema,a=o.primaryKey,s=a.extractKey,u=a.outbound,l=I(I({},i),{mutate:function(h){var y=h.trans,d=y.mutatedParts||(y.mutatedParts={}),p=function(k){var S="idb://"+t+"/"+r+"/"+k;return d[S]||(d[S]=new he)},m=p(""),_=p(":dels"),w=h.type,g=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[],b=g[0],v=g[1],x=h.trans._cache;return i.mutate(h).then(function(k){if(Y(b)){w!=="delete"&&(b=k.results),m.addKeys(b);var S=ki(b,x);!S&&w!=="add"&&_.addKeys(b),(S||v)&&as(p,o,S,v)}else if(b){var E={from:b.lower,to:b.upper};_.add(E),m.add(E)}else m.add(n),_.add(n),o.indexes.forEach(function(A){return p(A.name).add(n)});return k})}}),c=function(h){var y,d,p=h.query,m=p.index,_=p.range;return[m,new he((y=_.lower)!==null&&y!==void 0?y:e.MIN_KEY,(d=_.upper)!==null&&d!==void 0?d:e.MAX_KEY)]},f={get:function(h){return[a,new he(h.key)]},getMany:function(h){return[a,new he().addKeys(h.keys)]},count:c,query:c,openCursor:c};return W(f).forEach(function(h){l[h]=function(y){var d=P.subscr;if(d){var p=function(x){var k="idb://"+t+"/"+r+"/"+x;return d[k]||(d[k]=new he)},m=p(""),_=p(":dels"),w=f[h](y),g=w[0],b=w[1];if(p(g.name||"").add(b),!g.isPrimaryKey)if(h==="count")_.add(n);else{var v=h==="query"&&u&&y.values&&i.query(I(I({},y),{values:!1}));return i[h].apply(this,arguments).then(function(x){if(h==="query"){if(u&&y.values)return v.then(function(A){var T=A.result;return m.addKeys(T),x});var k=y.values?x.result.map(s):x.result;y.values?m.addKeys(k):_.addKeys(k)}else if(h==="openCursor"){var S=x,E=y.values;return S&&Object.create(S,{key:{get:function(){return _.addKey(S.primaryKey),S.key}},primaryKey:{get:function(){var A=S.primaryKey;return _.addKey(A),A}},value:{get:function(){return E&&m.addKey(S.primaryKey),S.value}}})}return x})}}return i[h].apply(this,arguments)}}),l}})}};function as(e,t,n,r){function i(o){var a=e(o.name||"");function s(l){return l!=null?o.extractKey(l):null}var u=function(l){return o.multiEntry&&Y(l)?l.forEach(function(c){return a.addKey(c)}):a.addKey(l)};(n||r).forEach(function(l,c){var f=n&&s(n[c]),h=r&&s(r[c]);G(f,h)!==0&&(f!=null&&u(f),h!=null&&u(h))})}t.indexes.forEach(i)}var ur=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=I({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:B,dbReadyPromise:null,cancelOpen:B,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};a.dbReadyPromise=new C(function(s){a.dbReadyResolve=s}),a.openCanceller=new C(function(s,u){a.cancelOpen=u}),this._state=a,this.name=t,this.on=_t(this,"populate","blocked","versionchange","close",{ready:[Gn,B]}),this.on.ready.subscribe=Zr(this.on.ready.subscribe,function(s){return function(u,l){e.vip(function(){var c=r._state;if(c.openComplete)c.dbOpenError||C.resolve().then(u),l&&s(u);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(u),l&&s(u);else{s(u);var f=r;l||s(function h(){f.on.ready.unsubscribe(u),f.on.ready.unsubscribe(h)})}})}}),this.Collection=_a(this),this.Table=ya(this),this.Transaction=Ra(this),this.Version=Ha(this),this.WhereClause=ka(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+s.oldVersion/10)}),this._maxKey=pt(n.IDBKeyRange),this._createTransaction=function(s,u,l,c){return new r.Transaction(s,u,l,r._options.chromeTransactionDurability,c)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),ot.filter(function(u){return u.name===r.name&&u!==r&&!u._state.vcFired}).map(function(u){return u.on("versionchange").fire(s)})},this.use(Za),this.use(ts),this.use(os),this.use(rs),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new K.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new K.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(Ma),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||P.letThrough||this._vip)?t():new C(function(r,i){if(n._state.openComplete)return i(new K.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new K.DatabaseClosed);return}n.open().catch(B)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,o=t.name;o&&this.unuse({stack:n,name:o});var a=this._middlewares[n]||(this._middlewares[n]=[]);return a.push({stack:n,create:r,level:i??10,name:o}),a.sort(function(s,u){return s.level-u.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(o){return i?o.create!==i:r?o.name!==r:!1})),this},e.prototype.open=function(){return Ga(this)},e.prototype._close=function(){var t=this._state,n=ot.indexOf(this);if(n>=0&&ot.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new C(function(r){t.dbReadyResolve=r}),t.openCanceller=new C(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new K.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new C(function(i,o){var a=function(){t.close();var s=t._deps.indexedDB.deleteDatabase(t.name);s.onsuccess=F(function(){Ya(t._deps,t.name),i()}),s.onerror=se(o),s.onblocked=t._fireOnBlocked};if(n)throw new K.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return W(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Qa.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,o=P.trans;(!o||o.db!==this||t.indexOf("!")!==-1)&&(o=null);var a=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var s,u;try{if(u=n.map(function(c){var f=c instanceof i.Table?c.name:c;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t===sn)s=sn;else if(t=="rw"||t==un)s=un;else throw new K.InvalidArgument("Invalid transaction mode: "+t);if(o){if(o.mode===sn&&s===un)if(a)o=null;else throw new K.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&u.forEach(function(c){if(o&&o.storeNames.indexOf(c)===-1)if(a)o=null;else throw new K.SubTransaction("Table "+c+" not included in parent transaction.")}),a&&o&&!o.active&&(o=null)}}catch(c){return o?o._promise(null,function(f,h){h(c)}):V(c)}var l=Ci.bind(null,this,s,u,o,r);return o?o._promise(s,l,"lock"):P.trans?Qe(P.transless,function(){return i._whenReady(l)}):this._whenReady(l)},e.prototype.table=function(t){if(!ee(this._allTables,t))throw new K.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),ss=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",us=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[ss]=function(){return this},e}();function Pi(e,t){return W(t).forEach(function(n){var r=e[n]||(e[n]=new he);qt(r,t[n])}),e}function Ri(e){return new us(function(t){var n=qn(e);function r(y){n&&Ge();var d=function(){return Se(e,{subscr:y,trans:null})},p=P.trans?Qe(P.transless,d):d();return n&&p.then(me,me),p}var i=!1,o={},a={},s={get closed(){return i},unsubscribe:function(){i=!0,Ce.storagemutated.unsubscribe(f)}};t.start&&t.start(s);var u=!1,l=!1;function c(){return W(a).some(function(y){return o[y]&&is(o[y],a[y])})}var f=function(y){Pi(o,y),c()&&h()},h=function(){if(!(u||i)){o={};var y={},d=r(y);l||(Ce(dt,f),l=!0),u=!0,Promise.resolve(d).then(function(p){u=!1,!i&&(c()?h():(o={},a=y,t.next&&t.next(p)))},function(p){u=!1,t.error&&t.error(p),s.unsubscribe()})}};return h(),s})}var Nn;try{Nn={indexedDB:L.indexedDB||L.mozIndexedDB||L.webkitIndexedDB||L.msIndexedDB,IDBKeyRange:L.IDBKeyRange||L.webkitIDBKeyRange}}catch{Nn={indexedDB:null,IDBKeyRange:null}}var Pe=ur;qe(Pe,I(I({},tn),{delete:function(e){var t=new Pe(e,{addons:[]});return t.delete()},exists:function(e){return new Pe(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return za(Pe.dependencies).then(e)}catch{return V(new K.MissingAPI)}},defineClass:function(){function e(t){Q(this,t)}return e},ignoreTransaction:function(e){return P.trans?Qe(P.transless,e):e()},vip:Mn,async:function(e){return function(){try{var t=Ln(e.apply(this,arguments));return!t||typeof t.then!="function"?C.resolve(t):t}catch(n){return V(n)}}},spawn:function(e,t,n){try{var r=Ln(e.apply(n,t||[]));return!r||typeof r.then!="function"?C.resolve(r):r}catch(i){return V(i)}},currentTransaction:{get:function(){return P.trans||null}},waitFor:function(e,t){var n=C.resolve(typeof e=="function"?Pe.ignoreTransaction(e):e).timeout(t||6e4);return P.trans?P.trans.waitFor(n):n},Promise:C,debug:{get:function(){return ce},set:function(e){oi(e,e==="dexie"?function(){return!0}:bi)}},derive:Ye,extend:Q,props:qe,override:Zr,Events:_t,on:Ce,liveQuery:Ri,extendObservabilitySet:Pi,getByKeyPath:ve,setByKeyPath:ie,delByKeyPath:jo,shallowClone:ni,deepClone:mt,getObjectDiff:ar,cmp:G,asap:ei,minKey:Kn,addons:[],connections:ot,errnames:Xn,dependencies:Nn,semVer:br,version:br.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));Pe.maxKey=pt(Pe.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ce(dt,function(e){if(!pe){var t;nn?(t=document.createEvent("CustomEvent"),t.initCustomEvent(xe,!0,!0,e)):t=new CustomEvent(xe,{detail:e}),pe=!0,dispatchEvent(t),pe=!1}}),addEventListener(xe,function(e){var t=e.detail;pe||Yt(t)}));function Yt(e){var t=pe;try{pe=!0,Ce.storagemutated.fire(e)}finally{pe=t}}var pe=!1;if(typeof BroadcastChannel<"u"){var kr=new BroadcastChannel(xe);Ce(dt,function(e){pe||kr.postMessage(e)}),kr.onmessage=function(e){e.data&&Yt(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Ce(dt,function(e){try{pe||(typeof localStorage<"u"&&localStorage.setItem(xe,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&yn([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:xe,changedParts:e})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(e){if(e.key===xe){var t=JSON.parse(e.newValue);t&&Yt(t.changedParts)}});var Pr=self.document&&navigator.serviceWorker;Pr&&Pr.addEventListener("message",ls)}function ls(e){var t=e.data;t&&t.type===xe&&Yt(t.changedParts)}C.rejectionMapper=Go;oi(ce,bi);class cs extends ur{decks;words;constructor(){super("vocabulary"),this.version(1).stores({decks:"++id, name",words:"++id, word, deckId"})}}const Me=new cs,$n=e=>{const[t,n]=ue(),i=Ri(e).subscribe(o=>{n(()=>o)});return Xt(()=>{i.unsubscribe()}),t};const fs=ke('<main><h1>Home</h1><ul aria-label="List of decks" class="deck-list"></ul><button class="button create-button">Create default deck</button></main>'),hs=ke("<li></li>"),ds=()=>{const e=$n(async()=>await Me.decks.toArray()),t=()=>{Me.decks.add({name:"Default"}).catch(console.error)};return(()=>{const n=fs.cloneNode(!0),r=n.firstChild,i=r.nextSibling,o=i.nextSibling;return re(i,j(Vi,{get each(){return e()},children:a=>(()=>{const s=hs.cloneNode(!0);return re(s,j(ut,{class:"deck-card",get href(){return`/deck/${a.id?.toString()}`},get children(){return a.name}})),s})()})),o.$$click=()=>t(),n})()};yt(["click"]);const ps=ke('<main><h1>Create Deck</h1><form><label for="input-create-deck-name">Name</label><input id="input-create-deck-name"><button type="submit">Create</button></form></main>'),vs=()=>{let e;const t=n=>{n.preventDefault(),console.log("e",n),console.log(e)};return(()=>{const n=ps.cloneNode(!0),r=n.firstChild,i=r.nextSibling,o=i.firstChild,a=o.nextSibling;i.addEventListener("submit",t);const s=e;return typeof s=="function"?Vr(s,a):e=a,n})()};const ys=ke('<main><h1></h1><h2>Word count: </h2><div class="deck-actions"></div></main>'),ms=()=>{const{id:e}=Xr(),t=parseInt(e,10),n=$n(async()=>await Me.decks.get(parseInt(e,10))),r=$n(async()=>await Me.words.where("deckId").equals(t).count());return(()=>{const i=ys.cloneNode(!0),o=i.firstChild,a=o.nextSibling;a.firstChild;const s=a.nextSibling;return re(o,()=>n()?.name),re(a,r,null),re(s,j(ut,{class:"button",href:`/deck/${e}/add-word`,children:"Add word"}),null),re(s,j(ut,{class:"button",href:`/deck/${e}/study`,children:"Study"}),null),i})()},gs=ke('<main><h1>Add Word</h1><form><label for="input-word-text">Word / Phrase</label><input class="input" id="input-word-text"><button class="button">Add</button></form></main>'),bs=()=>{let e;const{id:t}=Xr(),n=r=>{r.preventDefault(),Me.words.add({word:e.value,deckId:parseInt(t,10)}).then(()=>{e.value=""}).catch(console.error)};return(()=>{const r=gs.cloneNode(!0),i=r.firstChild,o=i.nextSibling,a=o.firstChild,s=a.nextSibling;o.addEventListener("submit",n);const u=e;return typeof u=="function"?Vr(u,s):e=s,r})()},ws="modulepreload",_s=function(e){return"/vocab-trainer/"+e},Rr={},xs=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=_s(o),o in Rr)return;Rr[o]=!0;const a=o.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const f=i[c];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const l=document.createElement("link");if(l.rel=a?"stylesheet":ws,a||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),a)return new Promise((c,f)=>{l.addEventListener("load",c),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())};function Es(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:a}=e;let s,u,l,c;const f=async(y=!0)=>{await l,y&&s?.addEventListener("controlling",d=>{d.isUpdate&&window.location.reload()}),await c?.()};async function h(){if("serviceWorker"in navigator){const{Workbox:y,messageSW:d}=await xs(()=>import("./workbox-window.prod.es5.d2780aeb.js"),[]);c=async()=>{u&&u.waiting&&await d(u.waiting,{type:"SKIP_WAITING"})},s=new y("/vocab-trainer/sw.js",{scope:"/vocab-trainer/",type:"classic"}),s.addEventListener("activated",p=>{p.isUpdate||r?.()});{const p=()=>{n?.()};s.addEventListener("waiting",p),s.addEventListener("externalwaiting",p)}s.register({immediate:t}).then(p=>{u=p,o?o("/vocab-trainer/sw.js",p):i?.(p)}).catch(p=>{a?.(p)})}}return l=h(),f}function Ss(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:a}=e,[s,u]=ue(!1),[l,c]=ue(!1),f=Es({immediate:t,onOfflineReady(){c(!0),r?.()},onNeedRefresh(){u(!0),n?.()},onRegistered:i,onRegisteredSW:o,onRegisterError:a});return{needRefresh:[s,u],offlineReady:[l,c],updateServiceWorker:f}}const As=ke('<main><h1>Settings</h1><div class="settings"><button class="button">Delete data</button><button class="button">Update</button></div></main>'),Cs=()=>{const e=()=>{Me.delete().then(async()=>await Me.open()).catch(console.error)},t=Ss();return(()=>{const n=As.cloneNode(!0),r=n.firstChild,i=r.nextSibling,o=i.firstChild,a=o.nextSibling;return o.$$click=e,a.$$click=()=>t?.updateServiceWorker(),n})()};yt(["click"]);const ks=ke('<div><header><nav></nav><button class="color-mode-switcher"></button></header><div class="outlet"></div></div>'),Ps=()=>{const e=window.matchMedia("(prefers-color-scheme: light)").matches,[t,n]=ue(e);window.matchMedia("(prefers-color-scheme: light)").addEventListener("change",i=>{n(i.matches)});const r=()=>{const i=t()?"dark-mode":"light-mode";document.documentElement.classList.contains(i)?document.documentElement.classList.remove(i):document.documentElement.classList.add(i)};return(()=>{const i=ks.cloneNode(!0),o=i.firstChild,a=o.firstChild,s=a.nextSibling,u=o.nextSibling;return re(a,j(ut,{href:"/",children:"Home"}),null),re(a,j(ut,{href:"/settings",children:"Settings"}),null),s.$$click=r,re(s,()=>t()?"Dark mode":"Light mode"),re(u,j(Bo,{get children(){return[j(Ze,{path:"/",element:ds}),j(Ze,{path:"/settings",element:Cs}),j(Ze,{path:"/deck/:id",element:ms}),j(Ze,{path:"/deck/:id/add-word",element:bs}),j(Ze,{path:"/create-deck",element:vs})]}})),i})()};yt(["click"]);Ji(()=>j(Oo,{get base(){return"/vocab-trainer/"},get children(){return j(Ps,{})}}),document.getElementById("root"));
