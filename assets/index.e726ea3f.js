(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const we={},Ti=(e,t)=>e===t,jn=Symbol("solid-proxy"),Di=Symbol("solid-track"),Mt={equals:Ti};let Ri=Mr;const Be=1,Ft=2,Kr={owned:null,cleanups:null,context:null,owner:null};var M=null;let Ke=null,$=null,X=null,Te=null,Vn=0;function et(e,t){const n=$,r=M,i=e.length===0,o=i?Kr:{owned:null,cleanups:null,context:null,owner:t||r},a=i?e:()=>e(()=>se(()=>Hn(o)));M=o,$=null;try{return Me(a,!0)}finally{$=n,M=r}}function xe(e,t){t=t?Object.assign({},Mt,t):Mt;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),Ir(n,i));return[Rr.bind(n),r]}function Ee(e,t,n){const r=Or(e,t,!1,Be);Qt(r)}function H(e,t,n){n=n?Object.assign({},Mt,n):Mt;const r=Or(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Qt(r),Rr.bind(r)}function se(e){const t=$;$=null;try{return e()}finally{$=t}}function Tr(e,t,n){const r=Array.isArray(e);let i,o=n&&n.defer;return a=>{let u;if(r){u=Array(e.length);for(let l=0;l<e.length;l++)u[l]=e[l]()}else u=e();if(o){o=!1;return}const s=se(()=>t(u,i,a));return i=u,s}}function Xt(e){return M===null||(M.cleanups===null?M.cleanups=[e]:M.cleanups.push(e)),e}function Ii(){return M}function Oi(e,t){const n=M;M=e;try{return Me(t,!0)}finally{M=n}}function Bi(e){const t=$,n=M;return Promise.resolve().then(()=>{$=t,M=n;let r;return Me(e,!1),$=M=null,r?r.done:void 0})}function Dr(e,t){const n=Symbol("context");return{id:n,Provider:Ni(n),defaultValue:e}}function Un(e){let t;return(t=Nr(M,e.id))!==void 0?t:e.defaultValue}function Wn(e){const t=H(e),n=H(()=>dn(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Rr(){const e=Ke;if(this.sources&&(this.state||e))if(this.state===Be||e)Qt(this);else{const t=X;X=null,Me(()=>Lt(this),!1),X=t}if($){const t=this.observers?this.observers.length:0;$.sources?($.sources.push(this),$.sourceSlots.push(t)):($.sources=[this],$.sourceSlots=[t]),this.observers?(this.observers.push($),this.observerSlots.push($.sources.length-1)):(this.observers=[$],this.observerSlots=[$.sources.length-1])}return this.value}function Ir(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Me(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],a=Ke&&Ke.running;a&&Ke.disposed.has(o),(a&&!o.tState||!a&&!o.state)&&(o.pure?X.push(o):Te.push(o),o.observers&&Fr(o)),a||(o.state=Be)}if(X.length>1e6)throw X=[],new Error},!1)),t}function Qt(e){if(!e.fn)return;Hn(e);const t=M,n=$,r=Vn;$=M=e,Mi(e,e.value,r),$=n,M=t}function Mi(e,t,n){let r;try{r=e.fn(t)}catch(i){e.pure&&(e.state=Be),Lr(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ir(e,r):e.value=r,e.updatedAt=n)}function Or(e,t,n,r=Be,i){const o={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:M,context:null,pure:n};return M===null||M!==Kr&&(M.owned?M.owned.push(o):M.owned=[o]),o}function Br(e){const t=Ke;if(e.state===0||t)return;if(e.state===Ft||t)return Lt(e);if(e.suspense&&se(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Vn);)(e.state||t)&&n.push(e);for(let r=n.length-1;r>=0;r--)if(e=n[r],e.state===Be||t)Qt(e);else if(e.state===Ft||t){const i=X;X=null,Me(()=>Lt(e,n[0]),!1),X=i}}function Me(e,t){if(X)return e();let n=!1;t||(X=[]),Te?n=!0:Te=[],Vn++;try{const r=e();return Fi(n),r}catch(r){X||(Te=null),Lr(r)}}function Fi(e){if(X&&(Mr(X),X=null),e)return;const t=Te;Te=null,t.length&&Me(()=>Ri(t),!1)}function Mr(e){for(let t=0;t<e.length;t++)Br(e[t])}function Lt(e,t){const n=Ke;e.state=0;for(let r=0;r<e.sources.length;r+=1){const i=e.sources[r];i.sources&&(i.state===Be||n?i!==t&&Br(i):(i.state===Ft||n)&&Lt(i,t))}}function Fr(e){const t=Ke;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(!r.state||t)&&(r.state=Ft,r.pure?X.push(r):Te.push(r),r.observers&&Fr(r))}}function Hn(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const o=i.pop(),a=n.observerSlots.pop();r<i.length&&(o.sourceSlots[a]=r,i[r]=o,n.observerSlots[r]=a)}}if(e.owned){for(t=0;t<e.owned.length;t++)Hn(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Li(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function Lr(e){throw e=Li(e),e}function Nr(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:Nr(e.owner,t):void 0}function dn(e){if(typeof e=="function"&&!e.length)return dn(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=dn(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Ni(e,t){return function(r){let i;return Ee(()=>i=se(()=>(M.context={[e]:r.value},Wn(()=>r.children))),void 0),i}}const $i=Symbol("fallback");function lr(e){for(let t=0;t<e.length;t++)e[t]()}function ji(e,t,n={}){let r=[],i=[],o=[],a=0,u=t.length>1?[]:null;return Xt(()=>lr(o)),()=>{let s=e()||[],l,c;return s[Di],se(()=>{let h=s.length,y,d,p,m,_,w,g,b,v;if(h===0)a!==0&&(lr(o),o=[],r=[],i=[],a=0,u&&(u=[])),n.fallback&&(r=[$i],i[0]=et(x=>(o[0]=x,n.fallback())),a=1);else if(a===0){for(i=new Array(h),c=0;c<h;c++)r[c]=s[c],i[c]=et(f);a=h}else{for(p=new Array(h),m=new Array(h),u&&(_=new Array(h)),w=0,g=Math.min(a,h);w<g&&r[w]===s[w];w++);for(g=a-1,b=h-1;g>=w&&b>=w&&r[g]===s[b];g--,b--)p[b]=i[g],m[b]=o[g],u&&(_[b]=u[g]);for(y=new Map,d=new Array(b+1),c=b;c>=w;c--)v=s[c],l=y.get(v),d[c]=l===void 0?-1:l,y.set(v,c);for(l=w;l<=g;l++)v=r[l],c=y.get(v),c!==void 0&&c!==-1?(p[c]=i[l],m[c]=o[l],u&&(_[c]=u[l]),c=d[c],y.set(v,c)):o[l]();for(c=w;c<h;c++)c in p?(i[c]=p[c],o[c]=m[c],u&&(u[c]=_[c],u[c](c))):i[c]=et(f);i=i.slice(0,a=h),r=s.slice(0)}return i});function f(h){if(o[c]=h,u){const[y,d]=xe(c);return u[c]=d,t(s[c],y)}return t(s[c])}}}function U(e,t){return se(()=>e(t||{}))}function xt(){return!0}const $r={get(e,t,n){return t===jn?n:e.get(t)},has(e,t){return e.has(t)},set:xt,deleteProperty:xt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:xt,deleteProperty:xt}},ownKeys(e){return e.keys()}};function on(e){return(e=typeof e=="function"?e():e)?e:{}}function pn(...e){if(e.some(n=>n&&(jn in n||typeof n=="function")))return new Proxy({get(n){for(let r=e.length-1;r>=0;r--){const i=on(e[r])[n];if(i!==void 0)return i}},has(n){for(let r=e.length-1;r>=0;r--)if(n in on(e[r]))return!0;return!1},keys(){const n=[];for(let r=0;r<e.length;r++)n.push(...Object.keys(on(e[r])));return[...new Set(n)]}},$r);const t={};for(let n=e.length-1;n>=0;n--)if(e[n]){const r=Object.getOwnPropertyDescriptors(e[n]);for(const i in r)i in t||Object.defineProperty(t,i,{enumerable:!0,get(){for(let o=e.length-1;o>=0;o--){const a=(e[o]||{})[i];if(a!==void 0)return a}}})}return t}function Vi(e,...t){const n=new Set(t.flat()),r=Object.getOwnPropertyDescriptors(e),i=jn in e;i||t.push(Object.keys(r).filter(a=>!n.has(a)));const o=t.map(a=>{const u={};for(let s=0;s<a.length;s++){const l=a[s];!i&&!(l in e)||Object.defineProperty(u,l,r[l]?r[l]:{get(){return e[l]},set(){return!0},enumerable:!0})}return u});return i&&o.push(new Proxy({get(a){return n.has(a)?void 0:e[a]},has(a){return n.has(a)?!1:a in e},keys(){return Object.keys(e).filter(a=>!n.has(a))}},$r)),o}function Ui(e){const t="fallback"in e&&{fallback:()=>e.fallback};return H(ji(()=>e.each,e.children,t||void 0))}function jr(e){let t=!1;const n=e.keyed,r=H(()=>e.when,void 0,{equals:(i,o)=>t?i===o:!i==!o});return H(()=>{const i=r();if(i){const o=e.children,a=typeof o=="function"&&o.length>0;return t=n||a,a?se(()=>o(i)):o}return e.fallback})}const Wi=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Hi=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Wi]),zi=new Set(["innerHTML","textContent","innerText","children"]),Yi=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),cr=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),qi=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Xi={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function Qi(e,t,n){let r=n.length,i=t.length,o=r,a=0,u=0,s=t[i-1].nextSibling,l=null;for(;a<i||u<o;){if(t[a]===n[u]){a++,u++;continue}for(;t[i-1]===n[o-1];)i--,o--;if(i===a){const c=o<r?u?n[u-1].nextSibling:n[o-u]:s;for(;u<o;)e.insertBefore(n[u++],c)}else if(o===u)for(;a<i;)(!l||!l.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[o-1]&&n[u]===t[i-1]){const c=t[--i].nextSibling;e.insertBefore(n[u++],t[a++].nextSibling),e.insertBefore(n[--o],c),t[i]=n[o]}else{if(!l){l=new Map;let f=u;for(;f<o;)l.set(n[f],f++)}const c=l.get(t[a]);if(c!=null)if(u<c&&c<o){let f=a,h=1,y;for(;++f<i&&f<o&&!((y=l.get(t[f]))==null||y!==c+h);)h++;if(h>c-u){const d=t[a];for(;u<c;)e.insertBefore(n[u++],d)}else e.replaceChild(n[u++],t[a++])}else a++;else t[a++].remove()}}}const fr="_$DX_DELEGATE";function Gi(e,t,n,r={}){let i;return et(o=>{i=o,t===document?e():ue(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function Fe(e,t,n){const r=document.createElement("template");r.innerHTML=e;let i=r.content.firstChild;return n&&(i=i.firstChild),i}function Gt(e,t=window.document){const n=t[fr]||(t[fr]=new Set);for(let r=0,i=e.length;r<i;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,ao))}}function Vr(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Ji(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function Zi(e,t){t==null?e.removeAttribute("class"):e.className=t}function eo(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=o=>i.call(e,n[1],o))}else e.addEventListener(t,n)}function to(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let o,a;for(o=0,a=i.length;o<a;o++){const u=i[o];!u||u==="undefined"||t[u]||(hr(e,u,!1),delete n[u])}for(o=0,a=r.length;o<a;o++){const u=r[o],s=!!t[u];!u||u==="undefined"||n[u]===s||!s||(hr(e,u,!0),n[u]=s)}return n}function no(e,t,n){if(!t)return n?Vr(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,o;for(o in n)t[o]==null&&r.removeProperty(o),delete n[o];for(o in t)i=t[o],i!==n[o]&&(r.setProperty(o,i),n[o]=i);return n}function ro(e,t={},n,r){const i={};return r||Ee(()=>i.children=He(e,t.children,i.children)),Ee(()=>t.ref&&t.ref(e)),Ee(()=>io(e,t,n,!0,i,!0)),i}function Ur(e,t,n){return se(()=>e(t,n))}function ue(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return He(e,t,r,n);Ee(i=>He(e,t(),i,n),r)}function io(e,t,n,r,i={},o=!1){t||(t={});for(const a in i)if(!(a in t)){if(a==="children")continue;i[a]=dr(e,a,null,i[a],n,o)}for(const a in t){if(a==="children"){r||He(e,t.children);continue}const u=t[a];i[a]=dr(e,a,u,i[a],n,o)}}function oo(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function hr(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,o=r.length;i<o;i++)e.classList.toggle(r[i],n)}function dr(e,t,n,r,i,o){let a,u,s;if(t==="style")return no(e,n,r);if(t==="classList")return to(e,n,r);if(n===r)return r;if(t==="ref")o||n(e);else if(t.slice(0,3)==="on:"){const l=t.slice(3);r&&e.removeEventListener(l,r),n&&e.addEventListener(l,n)}else if(t.slice(0,10)==="oncapture:"){const l=t.slice(10);r&&e.removeEventListener(l,r,!0),n&&e.addEventListener(l,n,!0)}else if(t.slice(0,2)==="on"){const l=t.slice(2).toLowerCase(),c=qi.has(l);if(!c&&r){const f=Array.isArray(r)?r[0]:r;e.removeEventListener(l,f)}(c||n)&&(eo(e,l,n,c),c&&Gt([l]))}else if((s=zi.has(t))||!i&&(cr[t]||(u=Hi.has(t)))||(a=e.nodeName.includes("-")))t==="class"||t==="className"?Zi(e,n):a&&!u&&!s?e[oo(t)]=n:e[cr[t]||t]=n;else{const l=i&&t.indexOf(":")>-1&&Xi[t.split(":")[0]];l?Ji(e,l,t,n):Vr(e,Yi[t]||t,n)}return n}function ao(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),we.registry&&!we.done&&(we.done=!0,document.querySelectorAll("[id^=pl-]").forEach(r=>r.remove()));n!==null;){const r=n[t];if(r&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?r.call(n,i,e):r.call(n,e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function He(e,t,n,r,i){for(we.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(we.context)return n;if(o==="number"&&(t=t.toString()),a){let u=n[0];u&&u.nodeType===3?u.data=t:u=document.createTextNode(t),n=Ne(e,n,r,u)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean"){if(we.context)return n;n=Ne(e,n,r)}else{if(o==="function")return Ee(()=>{let u=t();for(;typeof u=="function";)u=u();n=He(e,u,n,r)}),()=>n;if(Array.isArray(t)){const u=[],s=n&&Array.isArray(n);if(vn(u,t,n,i))return Ee(()=>n=He(e,u,n,r,!0)),()=>n;if(we.context){if(!u.length)return n;for(let l=0;l<u.length;l++)if(u[l].parentNode)return n=u}if(u.length===0){if(n=Ne(e,n,r),a)return n}else s?n.length===0?pr(e,u,r):Qi(e,n,u):(n&&Ne(e),pr(e,u));n=u}else if(t instanceof Node){if(we.context&&t.parentNode)return n=a?[t]:t;if(Array.isArray(n)){if(a)return n=Ne(e,n,r,t);Ne(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function vn(e,t,n,r){let i=!1;for(let o=0,a=t.length;o<a;o++){let u=t[o],s=n&&n[o];if(u instanceof Node)e.push(u);else if(!(u==null||u===!0||u===!1))if(Array.isArray(u))i=vn(e,u,s)||i;else if(typeof u=="function")if(r){for(;typeof u=="function";)u=u();i=vn(e,Array.isArray(u)?u:[u],Array.isArray(s)?s:[s])||i}else e.push(u),i=!0;else{const l=String(u);s&&s.nodeType===3&&s.data===l?e.push(s):e.push(document.createTextNode(l))}}return i}function pr(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function Ne(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let o=!1;for(let a=t.length-1;a>=0;a--){const u=t[a];if(i!==u){const s=u.parentNode===e;!o&&!a?s?e.replaceChild(i,u):e.insertBefore(i,n):s&&u.remove()}else o=!0}}else e.insertBefore(i,n);return[i]}const uo=!1;function so(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function lo([e,t],n,r){return[n?()=>n(e()):e,r?i=>t(r(i)):t]}function co(e){try{return document.querySelector(e)}catch{return null}}function fo(e,t){const n=co(`#${e}`);n?n.scrollIntoView():t&&window.scrollTo(0,0)}function ho(e,t,n,r){let i=!1;const o=u=>typeof u=="string"?{value:u}:u,a=lo(xe(o(e()),{equals:(u,s)=>u.value===s.value}),void 0,u=>(!i&&t(u),u));return n&&Xt(n((u=e())=>{i=!0,a[1](o(u)),i=!1})),{signal:a,utils:r}}function po(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:xe({value:""})};return e}function vo(){return ho(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:e,replace:t,scroll:n,state:r})=>{t?window.history.replaceState(r,"",e):window.history.pushState(r,"",e),fo(window.location.hash.slice(1),n)},e=>so(window,"popstate",()=>e()),{go:e=>window.history.go(e)})}const yo=/^(?:[a-z0-9]+:)?\/\//i,mo=/^\/+|\/+$/g;function tt(e,t=!1){const n=e.replace(mo,"");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function Kt(e,t,n){if(yo.test(t))return;const r=tt(e),i=n&&tt(n);let o="";return!i||t.startsWith("/")?o=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?o=r+i:o=i,(o||"/")+tt(t,!o)}function go(e,t){if(e==null)throw new Error(t);return e}function Wr(e,t){return tt(e).replace(/\/*(\*.*)?$/g,"")+tt(t)}function bo(e){const t={};return e.searchParams.forEach((n,r)=>{t[r]=n}),t}function Ue(e,t){return decodeURIComponent(t?e.replace(/\+/g," "):e)}function wo(e,t){const[n,r]=e.split("/*",2),i=n.split("/").filter(Boolean),o=i.length;return a=>{const u=a.split("/").filter(Boolean),s=u.length-o;if(s<0||s>0&&r===void 0&&!t)return null;const l={path:o?"":"/",params:{}};for(let c=0;c<o;c++){const f=i[c],h=u[c];if(f[0]===":")l.params[f.slice(1)]=h;else if(f.localeCompare(h,void 0,{sensitivity:"base"})!==0)return null;l.path+=`/${h}`}return r&&(l.params[r]=s?u.slice(-s).join("/"):""),l}}function _o(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,o)=>i+(o.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Hr(e){const t=new Map,n=Ii();return new Proxy({},{get(r,i){return t.has(i)||Oi(n,()=>t.set(i,H(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function zr(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return zr(r).reduce((o,a)=>[...o,...i.map(u=>u+a)],[])}const xo=100,Yr=Dr(),Jt=Dr(),pt=()=>go(Un(Yr),"Make sure your app is wrapped in a <Router />");let ot;const Zt=()=>ot||Un(Jt)||pt().base,Eo=e=>{const t=Zt();return H(()=>t.resolvePath(e()))},Ao=e=>{const t=pt();return H(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},So=()=>pt().navigatorFactory(),Co=()=>pt().location,qr=()=>Zt().params;function ko(e,t="",n){const{component:r,data:i,children:o}=e,a=!o||Array.isArray(o)&&!o.length,u={key:e,element:r?()=>U(r,{}):()=>{const{element:s}=e;return s===void 0&&n?U(n,{}):s},preload:e.component?r.preload:e.preload,data:i};return Xr(e.path).reduce((s,l)=>{for(const c of zr(l)){const f=Wr(t,c),h=a?f:f.split("/*",1)[0];s.push({...u,originalPath:c,pattern:h,matcher:wo(h,!a)})}return s},[])}function Po(e,t=0){return{routes:e,score:_o(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const o=e[i],a=o.matcher(n);if(!a)return null;r.unshift({...a,route:o})}return r}}}function Xr(e){return Array.isArray(e)?e:[e]}function Qr(e,t="",n,r=[],i=[]){const o=Xr(e);for(let a=0,u=o.length;a<u;a++){const s=o[a];if(s&&typeof s=="object"&&s.hasOwnProperty("path")){const l=ko(s,t,n);for(const c of l){if(r.push(c),s.children)Qr(s.children,c.pattern,n,r,i);else{const f=Po([...r],i.length);i.push(f)}r.pop()}}}return r.length?i:i.sort((a,u)=>u.score-a.score)}function Ko(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}function To(e,t){const n=new URL("http://sar"),r=H(s=>{const l=e();try{return new URL(l,n)}catch{return console.error(`Invalid path ${l}`),s}},n,{equals:(s,l)=>s.href===l.href}),i=H(()=>Ue(r().pathname)),o=H(()=>Ue(r().search,!0)),a=H(()=>Ue(r().hash)),u=H(()=>"");return{get pathname(){return i()},get search(){return o()},get hash(){return a()},get state(){return t()},get key(){return u()},query:Hr(Tr(o,()=>bo(r())))}}function Do(e,t="",n,r){const{signal:[i,o],utils:a={}}=po(e),u=a.parsePath||(E=>E),s=a.renderPath||(E=>E),l=Kt("",t),c=void 0;if(l===void 0)throw new Error(`${l} is not a valid base path`);l&&!i().value&&o({value:l,replace:!0,scroll:!1});const[f,h]=xe(!1),y=async E=>{h(!0);try{await Bi(E)}finally{h(!1)}},[d,p]=xe(i().value),[m,_]=xe(i().state),w=To(d,m),g=[],b={pattern:l,params:{},path:()=>l,outlet:()=>null,resolvePath(E){return Kt(l,E)}};if(n)try{ot=b,b.data=n({data:void 0,params:{},location:w,navigate:x(b)})}finally{ot=void 0}function v(E,S,D){se(()=>{if(typeof S=="number"){S&&(a.go?a.go(S):console.warn("Router integration does not support relative routing"));return}const{replace:O,resolve:R,scroll:N,state:K}={replace:!1,resolve:!0,scroll:!0,...D},V=R?E.resolvePath(S):Kt("",S);if(V===void 0)throw new Error(`Path '${S}' is not a routable path`);if(g.length>=xo)throw new Error("Too many redirects");const z=d();if((V!==z||K!==m())&&!uo){const J=g.push({value:z,replace:O,scroll:N,state:m()});y(()=>{p(V),_(K)}).then(()=>{g.length===J&&k({value:V,state:K})})}})}function x(E){return E=E||Un(Jt)||b,(S,D)=>v(E,S,D)}function k(E){const S=g[0];S&&((E.value!==S.value||E.state!==S.state)&&o({...E,replace:S.replace,scroll:S.scroll}),g.length=0)}Ee(()=>{const{value:E,state:S}=i();se(()=>{E!==d()&&y(()=>{p(E),_(S)})})});{let E=function(S){if(S.defaultPrevented||S.button!==0||S.metaKey||S.altKey||S.ctrlKey||S.shiftKey)return;const D=S.composedPath().find(J=>J instanceof Node&&J.nodeName.toUpperCase()==="A");if(!D||!D.hasAttribute("link"))return;const O=D.href;if(D.target||!O&&!D.hasAttribute("state"))return;const R=(D.getAttribute("rel")||"").split(/\s+/);if(D.hasAttribute("download")||R&&R.includes("external"))return;const N=new URL(O),K=Ue(N.pathname);if(N.origin!==window.location.origin||l&&K&&!K.toLowerCase().startsWith(l.toLowerCase()))return;const V=u(K+Ue(N.search,!0)+Ue(N.hash)),z=D.getAttribute("state");S.preventDefault(),v(b,V,{resolve:!1,replace:D.hasAttribute("replace"),scroll:!D.hasAttribute("noscroll"),state:z&&JSON.parse(z)})};var A=E;Gt(["click"]),document.addEventListener("click",E),Xt(()=>document.removeEventListener("click",E))}return{base:b,out:c,location:w,isRouting:f,renderPath:s,parsePath:u,navigatorFactory:x}}function Ro(e,t,n,r){const{base:i,location:o,navigatorFactory:a}=e,{pattern:u,element:s,preload:l,data:c}=r().route,f=H(()=>r().path),h=Hr(()=>r().params);l&&l();const y={parent:t,pattern:u,get child(){return n()},path:f,params:h,data:t.data,outlet:s,resolvePath(d){return Kt(i.path(),d,f())}};if(c)try{ot=y,y.data=c({data:t.data,params:h,location:o,navigate:a(y)})}finally{ot=void 0}return y}const Io=Fe("<a link></a>"),Oo=e=>{const{source:t,url:n,base:r,data:i,out:o}=e,a=t||vo(),u=Do(a,r,i);return U(Yr.Provider,{value:u,get children(){return e.children}})},Bo=e=>{const t=pt(),n=Zt(),r=Wn(()=>e.children),i=H(()=>Qr(r(),Wr(n.pattern,e.base||""),Mo)),o=H(()=>Ko(i(),t.location.pathname));t.out&&t.out.matches.push(o().map(({route:l,path:c,params:f})=>({originalPath:l.originalPath,pattern:l.pattern,path:c,params:f})));const a=[];let u;const s=H(Tr(o,(l,c,f)=>{let h=c&&l.length===c.length;const y=[];for(let d=0,p=l.length;d<p;d++){const m=c&&c[d],_=l[d];f&&m&&_.route.key===m.route.key?y[d]=f[d]:(h=!1,a[d]&&a[d](),et(w=>{a[d]=w,y[d]=Ro(t,y[d-1]||n,()=>s()[d+1],()=>o()[d])}))}return a.splice(l.length).forEach(d=>d()),f&&h?f:(u=y[0],y)}));return U(jr,{get when(){return s()&&u},children:l=>U(Jt.Provider,{value:l,get children(){return l.outlet()}})})},Et=e=>{const t=Wn(()=>e.children);return pn(e,{get children(){return t()}})},Mo=()=>{const e=Zt();return U(jr,{get when(){return e.child},children:t=>U(Jt.Provider,{value:t,get children(){return t.outlet()}})})};function Nt(e){e=pn({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=Vi(e,["href","state","activeClass","inactiveClass","end"]),n=Eo(()=>e.href),r=Ao(n),i=Co(),o=H(()=>{const a=n();if(a===void 0)return!1;const u=a.split(/[?#]/,1)[0].toLowerCase(),s=i.pathname.toLowerCase();return e.end?u===s:s.startsWith(u)});return(()=>{const a=Io.cloneNode(!0);return ro(a,pn(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{[e.inactiveClass]:!o(),[e.activeClass]:o(),...t.classList}},get["aria-current"](){return o()?"page":void 0}}),!1,!1),a})()}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var I=function(){return I=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},I.apply(this,arguments)};function yn(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var F=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,j=Object.keys,q=Array.isArray;typeof Promise<"u"&&!F.Promise&&(F.Promise=Promise);function G(e,t){return typeof t!="object"||j(t).forEach(function(n){e[n]=t[n]}),e}var at=Object.getPrototypeOf,Fo={}.hasOwnProperty;function ee(e,t){return Fo.call(e,t)}function ze(e,t){typeof t=="function"&&(t=t(at(e))),(typeof Reflect>"u"?j:Reflect.ownKeys)(t).forEach(function(n){ve(e,n,t[n])})}var Gr=Object.defineProperty;function ve(e,t,n,r){Gr(e,t,G(n&&ee(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Ye(e){return{from:function(t){return e.prototype=Object.create(t.prototype),ve(e.prototype,"constructor",e),{extend:ze.bind(null,e.prototype)}}}}var Lo=Object.getOwnPropertyDescriptor;function zn(e,t){var n=Lo(e,t),r;return n||(r=at(e))&&zn(r,t)}var No=[].slice;function en(e,t,n){return No.call(e,t,n)}function Jr(e,t){return t(e)}function Je(e){if(!e)throw new Error("Assertion Failed")}function Zr(e){F.setImmediate?setImmediate(e):setTimeout(e,0)}function ei(e,t){return e.reduce(function(n,r,i){var o=t(r,i);return o&&(n[o[0]]=o[1]),n},{})}function $o(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function pe(e,t){if(ee(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var o=pe(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(a!==-1){var u=e[t.substr(0,a)];return u===void 0?void 0:pe(u,t.substr(a+1))}}function re(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Je(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)re(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var a=t.substr(0,o),u=t.substr(o+1);if(u==="")n===void 0?q(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var s=e[a];(!s||!ee(e,a))&&(s=e[a]={}),re(s,u,n)}}else n===void 0?q(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function jo(e,t){typeof t=="string"?re(e,t,void 0):"length"in t&&[].map.call(t,function(n){re(e,n,void 0)})}function ti(e){var t={};for(var n in e)ee(e,n)&&(t[n]=e[n]);return t}var Vo=[].concat;function ni(e){return Vo.apply([],e)}var ri="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ni([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return F[e]}),Uo=ri.map(function(e){return F[e]});ei(ri,function(e){return[e,!0]});var be=null;function vt(e){be=typeof WeakMap<"u"&&new WeakMap;var t=mn(e);return be=null,t}function mn(e){if(!e||typeof e!="object")return e;var t=be&&be.get(e);if(t)return t;if(q(e)){t=[],be&&be.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(mn(e[n]))}else if(Uo.indexOf(e.constructor)>=0)t=e;else{var i=at(e);t=i===Object.prototype?{}:Object.create(i),be&&be.set(e,t);for(var o in e)ee(e,o)&&(t[o]=mn(e[o]))}return t}var Wo={}.toString;function gn(e){return Wo.call(e).slice(8,-1)}var bn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ho=typeof bn=="symbol"?function(e){var t;return e!=null&&(t=e[bn])&&t.apply(e)}:function(){return null},Ve={};function he(e){var t,n,r,i;if(arguments.length===1){if(q(e))return e.slice();if(this===Ve&&typeof e=="string")return[e];if(i=Ho(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Yn=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},le=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ii(e,t){le=e,oi=t}var oi=function(){return!0},zo=!new Error("").stack;function Le(){if(zo)try{throw Le.arguments,new Error}catch(e){return e}return new Error}function wn(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(oi).map(function(r){return`
`+r}).join("")):""}var Yo=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],ai=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],qn=Yo.concat(ai),qo={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function qe(e,t){this._e=Le(),this.name=e,this.message=t}Ye(qe).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+wn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function ui(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function $t(e,t,n,r){this._e=Le(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=ui(e,t)}Ye($t).from(qe);function nt(e,t){this._e=Le(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=ui(e,t)}Ye(nt).from(qe);var Xn=qn.reduce(function(e,t){return e[t]=t+"Error",e},{}),Xo=qe,T=qn.reduce(function(e,t){var n=t+"Error";function r(i,o){this._e=Le(),this.name=n,i?typeof i=="string"?(this.message=""+i+(o?`
 `+o:""),this.inner=o||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=qo[t]||n,this.inner=null)}return Ye(r).from(Xo),e[t]=r,e},{});T.Syntax=SyntaxError;T.Type=TypeError;T.Range=RangeError;var vr=ai.reduce(function(e,t){return e[t+"Error"]=T[t],e},{});function Qo(e,t){if(!e||e instanceof qe||e instanceof TypeError||e instanceof SyntaxError||!e.name||!vr[e.name])return e;var n=new vr[e.name](t||e.message,e);return"stack"in e&&ve(n,"stack",{get:function(){return this.inner.stack}}),n}var tn=qn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=T[t]),e},{});tn.ModifyError=$t;tn.DexieError=qe;tn.BulkError=nt;function B(){}function yt(e){return e}function Go(e,t){return e==null||e===yt?t:function(n){return t(e(n))}}function Ie(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Jo(e,t){return e===B?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ie(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ie(i,this.onerror):i),o!==void 0?o:n}}function Zo(e,t){return e===B?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ie(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ie(r,this.onerror):r)}}function ea(e,t){return e===B?t:function(n){var r=e.apply(this,arguments);G(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ie(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Ie(o,this.onerror):o),r===void 0?a===void 0?void 0:a:G(r,a)}}function ta(e,t){return e===B?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Qn(e,t){return e===B?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}var ut={},na=100,ra=20,si=100,Gn=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,at(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,at(t),e]}(),_n=Gn[0],jt=Gn[1],xn=Gn[2],li=jt&&jt.then,Tt=_n&&_n.constructor,Jn=!!xn,En=!1,ia=xn?function(){xn.then(At)}:F.setImmediate?setImmediate.bind(null,At):F.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){At(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(At,0)},st=function(e,t){Ze.push([e,t]),Vt&&(ia(),Vt=!1)},An=!0,Vt=!0,De=[],Dt=[],Sn=null,Cn=yt,We={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:gr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{gr(e[0],e[1])}catch{}})}},P=We,Ze=[],Re=0,Rt=[];function C(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=B,this._lib=!1;var t=this._PSD=P;if(le&&(this._stackHolder=Le(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==ut)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Pn(this,this._value);return}this._state=null,this._value=null,++t.ref,fi(this,e)}var kn={get:function(){var e=P,t=Ut;function n(r,i){var o=this,a=!e.global&&(e!==P||t!==Ut),u=a&&!ye(),s=new C(function(l,c){Zn(o,new ci(Ht(r,e,a,u),Ht(i,e,a,u),l,c,e))});return le&&pi(s,this),s}return n.prototype=ut,n},set:function(e){ve(this,"then",e&&e.prototype===ut?kn:{get:function(){return e},set:kn.set})}};ze(C.prototype,{then:kn,_then:function(e,t){Zn(this,new ci(null,null,e,t,P))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):It(r)}):this.then(null,function(r){return r&&r.name===t?n(r):It(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),It(t)})},stack:{get:function(){if(this._stack)return this._stack;try{En=!0;var e=di(this,[],ra),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{En=!1}}},timeout:function(e,t){var n=this;return e<1/0?new C(function(r,i){var o=setTimeout(function(){return i(new T.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&ve(C.prototype,Symbol.toStringTag,"Dexie.Promise");We.env=vi();function ci(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}ze(C,{all:function(){var e=he.apply(null,arguments).map(Wt);return new C(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,o){return C.resolve(i).then(function(a){e[o]=a,--r||t(e)},n)})})},resolve:function(e){if(e instanceof C)return e;if(e&&typeof e.then=="function")return new C(function(n,r){e.then(n,r)});var t=new C(ut,!0,e);return pi(t,Sn),t},reject:It,race:function(){var e=he.apply(null,arguments).map(Wt);return new C(function(t,n){e.map(function(r){return C.resolve(r).then(t,n)})})},PSD:{get:function(){return P},set:function(e){return P=e}},totalEchoes:{get:function(){return Ut}},newPSD:Ae,usePSD:Qe,scheduler:{get:function(){return st},set:function(e){st=e}},rejectionMapper:{get:function(){return Cn},set:function(e){Cn=e}},follow:function(e,t){return new C(function(n,r){return Ae(function(i,o){var a=P;a.unhandleds=[],a.onunhandled=o,a.finalize=Ie(function(){var u=this;aa(function(){u.unhandleds.length===0?i():o(u.unhandleds[0])})},a.finalize),e()},t,n,r)})}});Tt&&(Tt.allSettled&&ve(C,"allSettled",function(){var e=he.apply(null,arguments).map(Wt);return new C(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,o){return C.resolve(i).then(function(a){return r[o]={status:"fulfilled",value:a}},function(a){return r[o]={status:"rejected",reason:a}}).then(function(){return--n||t(r)})})})}),Tt.any&&typeof AggregateError<"u"&&ve(C,"any",function(){var e=he.apply(null,arguments).map(Wt);return new C(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(o,a){return C.resolve(o).then(function(u){return t(u)},function(u){i[a]=u,--r||n(new AggregateError(i))})})})}));function fi(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&mt();n&&typeof n.then=="function"?fi(e,function(i,o){n instanceof C?n._then(i,o):n.then(i,o)}):(e._state=!0,e._value=n,hi(e)),r&&gt()}},Pn.bind(null,e))}catch(n){Pn(e,n)}}function Pn(e,t){if(Dt.push(t),e._state===null){var n=e._lib&&mt();t=Cn(t),e._state=!1,e._value=t,le&&t!==null&&typeof t=="object"&&!t._promise&&$o(function(){var r=zn(t,"stack");t._promise=e,ve(t,"stack",{get:function(){return En?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),ua(e),hi(e),n&&gt()}}function hi(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Zn(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Re===0&&(++Re,st(function(){--Re===0&&er()},[]))}function Zn(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Re,st(oa,[n,e,t])}function oa(e,t,n){try{Sn=t;var r,i=t._value;t._state?r=e(i):(Dt.length&&(Dt=[]),r=e(i),Dt.indexOf(i)===-1&&sa(t)),n.resolve(r)}catch(o){n.reject(o)}finally{Sn=null,--Re===0&&er(),--n.psd.ref||n.psd.finalize()}}function di(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,o,a;i!=null?(o=i.name||"Error",a=i.message||i,r=wn(i,0)):(o=i,a=""),t.push(o+(a?": "+a:"")+r)}return le&&(r=wn(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&di(e._prev,t,n)),t}function pi(e,t){var n=t?t._numPrev+1:0;n<na&&(e._prev=t,e._numPrev=n)}function At(){mt()&&gt()}function mt(){var e=An;return An=!1,Vt=!1,e}function gt(){var e,t,n;do for(;Ze.length>0;)for(e=Ze,Ze=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Ze.length>0);An=!0,Vt=!0}function er(){var e=De;De=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Rt.slice(0),n=t.length;n;)t[--n]()}function aa(e){function t(){e(),Rt.splice(Rt.indexOf(t),1)}Rt.push(t),++Re,st(function(){--Re===0&&er()},[])}function ua(e){De.some(function(t){return t._value===e._value})||De.push(e)}function sa(e){for(var t=De.length;t;)if(De[--t]._value===e._value){De.splice(t,1);return}}function It(e){return new C(ut,!1,e)}function L(e,t){var n=P;return function(){var r=mt(),i=P;try{return Se(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{Se(i,!1),r&&gt()}}}var Y={awaits:0,echoes:0,id:0},la=0,Ot=[],an=0,Ut=0,ca=0;function Ae(e,t,n,r){var i=P,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++ca;var a=We.env;o.env=Jn?{Promise:C,PromiseProp:{value:C,configurable:!0,writable:!0},all:C.all,race:C.race,allSettled:C.allSettled,any:C.any,resolve:C.resolve,reject:C.reject,nthen:yr(a.nthen,o),gthen:yr(a.gthen,o)}:{},t&&G(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=Qe(o,e,n,r);return o.ref===0&&o.finalize(),u}function Xe(){return Y.id||(Y.id=++la),++Y.awaits,Y.echoes+=si,Y.id}function ye(){return Y.awaits?(--Y.awaits===0&&(Y.id=0),Y.echoes=Y.awaits*si,!0):!1}(""+li).indexOf("[native code]")===-1&&(Xe=ye=B);function Wt(e){return Y.echoes&&e&&e.constructor===Tt?(Xe(),e.then(function(t){return ye(),t},function(t){return ye(),W(t)})):e}function fa(e){++Ut,(!Y.echoes||--Y.echoes===0)&&(Y.echoes=Y.id=0),Ot.push(P),Se(e,!0)}function ha(){var e=Ot[Ot.length-1];Ot.pop(),Se(e,!1)}function Se(e,t){var n=P;if((t?Y.echoes&&(!an++||e!==P):an&&(!--an||e!==P))&&yi(t?fa.bind(null,e):ha),e!==P&&(P=e,n===We&&(We.env=vi()),Jn)){var r=We.env.Promise,i=e.env;jt.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(F,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function vi(){var e=F.Promise;return Jn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(F,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:jt.then,gthen:e.prototype.then}:{}}function Qe(e,t,n,r,i){var o=P;try{return Se(e,!0),t(n,r,i)}finally{Se(o,!1)}}function yi(e){li.call(_n,e)}function Ht(e,t,n,r){return typeof e!="function"?e:function(){var i=P;n&&Xe(),Se(t,!0);try{return e.apply(this,arguments)}finally{Se(i,!1),r&&yi(ye)}}}function yr(e,t){return function(n,r){return e.call(this,Ht(n,t),Ht(r,t))}}var mr="unhandledrejection";function gr(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(F.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(mr,!0,!0),G(r,i)):F.CustomEvent&&(r=new CustomEvent(mr,{detail:i}),G(r,i)),r&&F.dispatchEvent&&(dispatchEvent(r),!F.PromiseRejectionEvent&&F.onunhandledrejection))try{F.onunhandledrejection(r)}catch{}le&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var W=C.reject;function Kn(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!P.letThrough&&!e._vip){if(e._state.openComplete)return W(new T.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return W(new T.DatabaseClosed);e.open().catch(B)}return e._state.dbReadyPromise.then(function(){return Kn(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===Xn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Kn(e,t,n,r)})):W(o)}return i._promise(t,function(o,a){return Ae(function(){return P.trans=i,r(o,a,i)})}).then(function(o){return i._completion.then(function(){return o})})}}var br="3.2.2",Pe=String.fromCharCode(65535),Tn=-1/0,ce="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",mi="String expected.",rt=[],nn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),da=nn,pa=nn,gi=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},rn="__dbnames",un="readonly",sn="readwrite";function Oe(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var bi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function St(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=vt(t),delete t[e]),t}:function(t){return t}}var va=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||P.trans,o=this.name;function a(s,l,c){if(!c.schema[o])throw new T.NotFound("Table "+o+" not part of transaction");return n(c.idbtrans,c)}var u=mt();try{return i&&i.db===this.db?i===P.trans?i._promise(t,a,r):Ae(function(){return i._promise(t,a,r)},{trans:i,transless:P.transless||P}):Kn(this.db,t,[this.name],a)}finally{u&&gt()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(o){return r.hook.reading.fire(o)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(q(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=j(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(c){return c.compound&&n.every(function(f){return c.keyPath.indexOf(f)>=0})&&c.keyPath.every(function(f){return n.indexOf(f)>=0})})[0];if(r&&this.db._maxKey!==Pe)return this.where(r.name).equals(r.keyPath.map(function(c){return t[c]}));!r&&le&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,o=this.db._deps.indexedDB;function a(c,f){try{return o.cmp(c,f)===0}catch{return!1}}var u=n.reduce(function(c,f){var h=c[0],y=c[1],d=i[f],p=t[f];return[h||d,h||!d?Oe(y,d&&d.multi?function(m){var _=pe(m,f);return q(_)&&_.some(function(w){return a(p,w)})}:function(m){return a(p,pe(m,f))}):y]},[null,null]),s=u[0],l=u[1];return s?this.where(s.name).equals(t[s.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,q(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var o in r)if(ee(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){G(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,u=t;return a&&o&&(u=St(a)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[u]})}).then(function(s){return s.numFailures?C.reject(s.failures[0]):s.lastResult}).then(function(s){if(a)try{re(t,a,s)}catch{}return s})},e.prototype.update=function(t,n){if(typeof t=="object"&&!q(t)){var r=pe(t,this.schema.primKey.keyPath);if(r===void 0)return W(new T.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?j(n).forEach(function(i){re(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,u=t;return a&&o&&(u=St(a)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[u],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?C.reject(s.failures[0]):s.lastResult}).then(function(s){if(a)try{re(t,a,s)}catch{}return s})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?C.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:bi})}).then(function(n){return n.numFailures?C.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(o){return n.hook.reading.fire(o)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,l=s.auto,c=s.keyPath;if(c&&o)throw new T.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,h=c&&l?t.map(St(c)):t;return i.core.mutate({trans:u,type:"add",keys:o,values:h,wantResults:a}).then(function(y){var d=y.numFailures,p=y.results,m=y.lastResult,_=y.failures,w=a?p:m;if(d===0)return w;throw new nt(i.name+".bulkAdd(): "+d+" of "+f+" operations failed",_)})})},e.prototype.bulkPut=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,l=s.auto,c=s.keyPath;if(c&&o)throw new T.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,h=c&&l?t.map(St(c)):t;return i.core.mutate({trans:u,type:"put",keys:o,values:h,wantResults:a}).then(function(y){var d=y.numFailures,p=y.results,m=y.lastResult,_=y.failures,w=a?p:m;if(d===0)return w;throw new nt(i.name+".bulkPut(): "+d+" of "+f+" operations failed",_)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var o=i.numFailures,a=i.lastResult,u=i.failures;if(o===0)return a;throw new nt(n.name+".bulkDelete(): "+o+" of "+r+" operations failed",u)})},e}();function bt(e){var t={},n=function(u,s){if(s){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return t[u].subscribe.apply(null,c),e}else if(typeof u=="string")return t[u]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(u,s,l){if(typeof u=="object")return a(u);s||(s=ta),l||(l=B);var c={subscribers:[],fire:l,subscribe:function(f){c.subscribers.indexOf(f)===-1&&(c.subscribers.push(f),c.fire=s(c.fire,f))},unsubscribe:function(f){c.subscribers=c.subscribers.filter(function(h){return h!==f}),c.fire=c.subscribers.reduce(s,l)}};return t[u]=n[u]=c,c}function a(u){j(u).forEach(function(s){var l=u[s];if(q(l))o(s,u[s][0],u[s][1]);else if(l==="asap")var c=o(s,yt,function(){for(var h=arguments.length,y=new Array(h);h--;)y[h]=arguments[h];c.subscribers.forEach(function(d){Zr(function(){d.apply(null,y)})})});else throw new T.InvalidArgument("Invalid event config")})}}function wt(e,t){return Ye(t).from({prototype:e}),t}function ya(e){return wt(va.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:bt(null,{creating:[Jo,B],reading:[Go,yt],updating:[ea,B],deleting:[Zo,B]})})}function $e(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function ln(e,t){e.filter=Oe(e.filter,t)}function cn(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Oe(r(),t())}:t,e.justLimit=n&&!r}function ma(e,t){e.isMatch=Oe(e.isMatch,t)}function Bt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new T.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function wr(e,t,n){var r=Bt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Ct(e,t,n,r){var i=e.replayFilter?Oe(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(u,s,l){if(!i||i(s,l,function(h){return s.stop(h)},function(h){return s.fail(h)})){var c=s.primaryKey,f=""+c;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(c)),ee(o,f)||(o[f]=!0,t(u,s,l))}};return Promise.all([e.or._iterate(a,n),_r(wr(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}else return _r(wr(e,r,n),Oe(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function _r(e,t,n,r){var i=r?function(a,u,s){return n(r(a),u,s)}:n,o=L(i);return e.then(function(a){if(a)return a.start(function(){var u=function(){return a.continue()};(!t||t(a,function(s){return u=s},function(s){a.stop(s),u=B},function(s){a.fail(s),u=B}))&&o(a.value,a,function(s){return u=s}),u()})})}function Q(e,t){try{var n=xr(e),r=xr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return ba(Er(e),Er(t));case"Array":return ga(e,t)}}catch{}return NaN}function ga(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var a=Q(e[o],t[o]);if(a!==0)return a}return n===r?0:n<r?-1:1}function ba(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}function xr(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=gn(e);return n==="ArrayBuffer"?"binary":n}function Er(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var wa=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,W.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,W.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Oe(n.algorithm,t)},e.prototype._iterate=function(t,n){return Ct(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&G(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return Ct(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,o=i.table.core;if($e(i,!0))return o.count({trans:r,query:{index:Bt(i,o.schema),range:i.range}}).then(function(u){return Math.min(u,i.limit)});var a=0;return Ct(i,function(){return++a,!1},r,o).then(function(){return a})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],o=r.length-1;function a(l,c){return c?a(l[r[c]],c-1):l[i]}var u=this._ctx.dir==="next"?1:-1;function s(l,c){var f=a(l,o),h=a(c,o);return f<h?-u:f>h?u:0}return this.toArray(function(l){return l.sort(s)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&$e(i,!0)&&i.limit>0){var o=i.valueMapper,a=Bt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:a,range:i.range}}).then(function(s){var l=s.result;return o?l.map(o):l})}else{var u=[];return Ct(i,function(s){return u.push(s)},r,i.table.core).then(function(){return u})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,$e(n)?cn(n,function(){var r=t;return function(i,o){return r===0?!0:r===1?(--r,!1):(o(function(){i.advance(r),r=0}),!1)}}):cn(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),cn(this._ctx,function(){var n=t;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this},e.prototype.until=function(t,n){return ln(this._ctx,function(r,i,o){return t(r.value)?(i(o),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return ln(this._ctx,function(n){return t(n.value)}),ma(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&$e(n,!0)&&n.limit>0)return this._read(function(i){var o=Bt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(i){var o=i.result;return o}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return ln(this._ctx,function(i){var o=i.primaryKey.toString(),a=ee(r,o);return r[o]=!0,!a}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var o;if(typeof t=="function")o=t;else{var a=j(t),u=a.length;o=function(_){for(var w=!1,g=0;g<u;++g){var b=a[g],v=t[b];pe(_,b)!==v&&(re(_,b,v),w=!0)}return w}}var s=r.table.core,l=s.schema.primaryKey,c=l.outbound,f=l.extractKey,h=n.db._options.modifyChunkSize||200,y=[],d=0,p=[],m=function(_,w){var g=w.failures,b=w.numFailures;d+=_-b;for(var v=0,x=j(g);v<x.length;v++){var k=x[v];y.push(g[k])}};return n.clone().primaryKeys().then(function(_){var w=function(g){var b=Math.min(h,_.length-g);return s.getMany({trans:i,keys:_.slice(g,g+b),cache:"immutable"}).then(function(v){for(var x=[],k=[],A=c?[]:null,E=[],S=0;S<b;++S){var D=v[S],O={value:vt(D),primKey:_[g+S]};o.call(O,O.value,O)!==!1&&(O.value==null?E.push(_[g+S]):!c&&Q(f(D),f(O.value))!==0?(E.push(_[g+S]),x.push(O.value)):(k.push(O.value),c&&A.push(_[g+S])))}var R=$e(r)&&r.limit===1/0&&(typeof t!="function"||t===fn)&&{index:r.index,range:r.range};return Promise.resolve(x.length>0&&s.mutate({trans:i,type:"add",values:x}).then(function(N){for(var K in N.failures)E.splice(parseInt(K),1);m(x.length,N)})).then(function(){return(k.length>0||R&&typeof t=="object")&&s.mutate({trans:i,type:"put",keys:A,values:k,criteria:R,changeSpec:typeof t!="function"&&t}).then(function(N){return m(k.length,N)})}).then(function(){return(E.length>0||R&&t===fn)&&s.mutate({trans:i,type:"delete",keys:E,criteria:R}).then(function(N){return m(E.length,N)})}).then(function(){return _.length>g+b&&w(g+h)})})};return w(0).then(function(){if(y.length>0)throw new $t("Error modifying one or more objects",y,d,p);return _.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return $e(t)&&(t.isPrimKey&&!pa||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,o=n;return t.table.core.count({trans:r,query:{index:i,range:o}}).then(function(a){return t.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(function(u){var s=u.failures;u.lastResult,u.results;var l=u.numFailures;if(l)throw new $t("Could not delete some values",Object.keys(s).map(function(c){return s[c]}),a-l);return a-l})})}):this.modify(fn)},e}(),fn=function(e,t){return t.value=null};function _a(e){return wt(wa.prototype,function(n,r){this.db=e;var i=bi,o=null;if(r)try{i=r()}catch(l){o=l}var a=n._ctx,u=a.table,s=u.hook.reading.fire;this._ctx={table:u,index:a.index,isPrimKey:!a.index||u.schema.primKey.keyPath&&a.index===u.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:a.or,valueMapper:s!==yt?s:null}})}function xa(e,t){return e<t?-1:e===t?0:1}function Ea(e,t){return e>t?-1:e===t?0:1}function Z(e,t,n){var r=e instanceof _i?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function je(e){return new e.Collection(e,function(){return wi("")}).limit(0)}function Aa(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Sa(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function Ca(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),u=-1,s=0;s<a;++s){var l=t[s];if(l!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;i(e[s],l)<0&&(u=s)}return a<r.length&&o==="next"?e+n.substr(e.length):a<e.length&&o==="prev"?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function kt(e,t,n,r){var i,o,a,u,s,l,c,f=n.length;if(!n.every(function(p){return typeof p=="string"}))return Z(e,mi);function h(p){i=Aa(p),o=Sa(p),a=p==="next"?xa:Ea;var m=n.map(function(_){return{lower:o(_),upper:i(_)}}).sort(function(_,w){return a(_.lower,w.lower)});u=m.map(function(_){return _.upper}),s=m.map(function(_){return _.lower}),l=p,c=p==="next"?"":r}h("next");var y=new e.Collection(e,function(){return ge(u[0],s[f-1]+r)});y._ondirectionchange=function(p){h(p)};var d=0;return y._addAlgorithm(function(p,m,_){var w=p.key;if(typeof w!="string")return!1;var g=o(w);if(t(g,s,d))return!0;for(var b=null,v=d;v<f;++v){var x=Ca(w,g,u[v],s[v],a,l);x===null&&b===null?d=v+1:(b===null||a(b,x)>0)&&(b=x)}return m(b!==null?function(){p.continue(b+c)}:_),!1}),y}function ge(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function wi(e){return{type:1,lower:e,upper:e}}var _i=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?je(this):new this.Collection(this,function(){return ge(t,n,!r,!i)})}catch{return Z(this,ce)}},e.prototype.equals=function(t){return t==null?Z(this,ce):new this.Collection(this,function(){return wi(t)})},e.prototype.above=function(t){return t==null?Z(this,ce):new this.Collection(this,function(){return ge(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?Z(this,ce):new this.Collection(this,function(){return ge(t,void 0,!1)})},e.prototype.below=function(t){return t==null?Z(this,ce):new this.Collection(this,function(){return ge(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?Z(this,ce):new this.Collection(this,function(){return ge(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?Z(this,mi):this.between(t,t+Pe,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):kt(this,function(n,r){return n.indexOf(r[0])===0},[t],Pe)},e.prototype.equalsIgnoreCase=function(t){return kt(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=he.apply(Ve,arguments);return t.length===0?je(this):kt(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=he.apply(Ve,arguments);return t.length===0?je(this):kt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,Pe)},e.prototype.anyOf=function(){var t=this,n=he.apply(Ve,arguments),r=this._cmp;try{n.sort(r)}catch{return Z(this,ce)}if(n.length===0)return je(this);var i=new this.Collection(this,function(){return ge(n[0],n[n.length-1])});i._ondirectionchange=function(a){r=a==="next"?t._ascending:t._descending,n.sort(r)};var o=0;return i._addAlgorithm(function(a,u,s){for(var l=a.key;r(l,n[o])>0;)if(++o,o===n.length)return u(s),!1;return r(l,n[o])===0?!0:(u(function(){a.continue(n[o])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[Tn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=he.apply(Ve,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Z(this,ce)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Tn,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,o=this._ascending,a=this._descending,u=this._min,s=this._max;if(t.length===0)return je(this);if(!t.every(function(v){return v[0]!==void 0&&v[1]!==void 0&&o(v[0],v[1])<=0}))return Z(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",T.InvalidArgument);var l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;function f(v,x){for(var k=0,A=v.length;k<A;++k){var E=v[k];if(i(x[0],E[1])<0&&i(x[1],E[0])>0){E[0]=u(E[0],x[0]),E[1]=s(E[1],x[1]);break}}return k===A&&v.push(x),v}var h=o;function y(v,x){return h(v[0],x[0])}var d;try{d=t.reduce(f,[]),d.sort(y)}catch{return Z(this,ce)}var p=0,m=c?function(v){return o(v,d[p][1])>0}:function(v){return o(v,d[p][1])>=0},_=l?function(v){return a(v,d[p][0])>0}:function(v){return a(v,d[p][0])>=0};function w(v){return!m(v)&&!_(v)}var g=m,b=new this.Collection(this,function(){return ge(d[0][0],d[d.length-1][1],!l,!c)});return b._ondirectionchange=function(v){v==="next"?(g=m,h=o):(g=_,h=a),d.sort(y)},b._addAlgorithm(function(v,x,k){for(var A=v.key;g(A);)if(++p,p===d.length)return x(k),!1;return w(A)?!0:(r._cmp(A,d[p][1])===0||r._cmp(A,d[p][0])===0||x(function(){h===o?v.continue(d[p][0]):v.continue(d[p][1])}),!1)}),b},e.prototype.startsWithAnyOf=function(){var t=he.apply(Ve,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?je(this):this.inAnyRange(t.map(function(n){return[n,n+Pe]})):Z(this,"startsWithAnyOf() only works with strings")},e}();function ka(e){return wt(_i.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var o=e._deps.indexedDB;if(!o)throw new T.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(a,u){return o.cmp(u,a)},this._max=function(a,u){return o.cmp(a,u)>0?a:u},this._min=function(a,u){return o.cmp(a,u)<0?a:u},this._IDBKeyRange=e._deps.IDBKeyRange})}function ae(e){return L(function(t){return lt(t),e(t.target.error),!1})}function lt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var ct="storagemutated",_e="x-storagemutated-1",Ce=bt(null,ct),Pa=function(){function e(){}return e.prototype._lock=function(){return Je(!P.global),++this._reculock,this._reculock===1&&!P.global&&(P.lockOwnerFor=this),this},e.prototype._unlock=function(){if(Je(!P.global),--this._reculock===0)for(P.global||(P.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Qe(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&P.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(Je(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new T.DatabaseClosed(i);case"MissingAPIError":throw new T.MissingAPI(i.message,i);default:throw new T.OpenFailed(i)}if(!this.active)throw new T.TransactionInactive;return Je(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=L(function(o){lt(o),n._reject(t.error)}),t.onabort=L(function(o){lt(o),n.active&&n._reject(new T.Abort(t.error)),n.active=!1,n.on("abort").fire(o)}),t.oncomplete=L(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Ce.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return W(new T.ReadOnly("Transaction is readonly"));if(!this.active)return W(new T.TransactionInactive);if(this._locked())return new C(function(a,u){i._blockedFuncs.push([function(){i._promise(t,n,r).then(a,u)},P])});if(r)return Ae(function(){var a=new C(function(u,s){i._lock();var l=n(u,s,i);l&&l.then&&l.then(u,s)});return a.finally(function(){return i._unlock()}),a._lib=!0,a});var o=new C(function(a,u){var s=n(a,u,i);s&&s.then&&s.then(a,u)});return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=C.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var o=n._waitingFor;return new C(function(a,u){r.then(function(s){return n._waitingQueue.push(L(a.bind(null,s)))},function(s){return n._waitingQueue.push(L(u.bind(null,s)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new T.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(ee(n,t))return n[t];var r=this.schema[t];if(!r)throw new T.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function Ka(e){return wt(Pa.prototype,function(n,r,i,o,a){var u=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=bt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new C(function(s,l){u._resolve=s,u._reject=l}),this._completion.then(function(){u.active=!1,u.on.complete.fire()},function(s){var l=u.active;return u.active=!1,u.on.error.fire(s),u.parent?u.parent._reject(s):l&&u.idbtrans&&u.idbtrans.abort(),W(s)})})}function Dn(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+xi(t)}}function xi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Ei(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:ei(n,function(r){return[r.name,r]})}}function Ta(e){return e.length===1?e[0]:e}var ft=function(e){try{return e.only([[]]),ft=function(){return[[]]},[[]]}catch{return ft=function(){return Pe},Pe}};function Rn(e){return e==null?function(){}:typeof e=="string"?Da(e):function(t){return pe(t,e)}}function Da(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return pe(n,e)}}function Ar(e){return[].slice.call(e)}var Ra=0;function it(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function Ia(e,t,n){function r(f,h){var y=Ar(f.objectStoreNames);return{schema:{name:f.name,tables:y.map(function(d){return h.objectStore(d)}).map(function(d){var p=d.keyPath,m=d.autoIncrement,_=q(p),w=p==null,g={},b={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:w,compound:_,keyPath:p,autoIncrement:m,unique:!0,extractKey:Rn(p)},indexes:Ar(d.indexNames).map(function(v){return d.index(v)}).map(function(v){var x=v.name,k=v.unique,A=v.multiEntry,E=v.keyPath,S=q(E),D={name:x,compound:S,keyPath:E,unique:k,multiEntry:A,extractKey:Rn(E)};return g[it(E)]=D,D}),getIndexByKeyPath:function(v){return g[it(v)]}};return g[":id"]=b.primaryKey,p!=null&&(g[it(p)]=b.primaryKey),b})},hasGetAll:y.length>0&&"getAll"in h.objectStore(y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var h=f.lower,y=f.upper,d=f.lowerOpen,p=f.upperOpen,m=h===void 0?y===void 0?null:t.upperBound(y,!!p):y===void 0?t.lowerBound(h,!!d):t.bound(h,y,!!d,!!p);return m}function o(f){var h=f.name;function y(m){var _=m.trans,w=m.type,g=m.keys,b=m.values,v=m.range;return new Promise(function(x,k){x=L(x);var A=_.objectStore(h),E=A.keyPath==null,S=w==="put"||w==="add";if(!S&&w!=="delete"&&w!=="deleteRange")throw new Error("Invalid operation type: "+w);var D=(g||b||{length:1}).length;if(g&&b&&g.length!==b.length)throw new Error("Given keys array must have same length as given values array.");if(D===0)return x({numFailures:0,failures:{},results:[],lastResult:void 0});var O,R=[],N=[],K=0,V=function(oe){++K,lt(oe)};if(w==="deleteRange"){if(v.type===4)return x({numFailures:K,failures:N,results:[],lastResult:void 0});v.type===3?R.push(O=A.clear()):R.push(O=A.delete(i(v)))}else{var z=S?E?[b,g]:[b,null]:[g,null],J=z[0],ie=z[1];if(S)for(var te=0;te<D;++te)R.push(O=ie&&ie[te]!==void 0?A[w](J[te],ie[te]):A[w](J[te])),O.onerror=V;else for(var te=0;te<D;++te)R.push(O=A[w](J[te])),O.onerror=V}var me=function(oe){var Ge=oe.target.result;R.forEach(function(ne,_t){return ne.error!=null&&(N[_t]=ne.error)}),x({numFailures:K,failures:N,results:w==="delete"?g:R.map(function(ne){return ne.result}),lastResult:Ge})};O.onerror=function(oe){V(oe),me(oe)},O.onsuccess=me})}function d(m){var _=m.trans,w=m.values,g=m.query,b=m.reverse,v=m.unique;return new Promise(function(x,k){x=L(x);var A=g.index,E=g.range,S=_.objectStore(h),D=A.isPrimaryKey?S:S.index(A.name),O=b?v?"prevunique":"prev":v?"nextunique":"next",R=w||!("openKeyCursor"in D)?D.openCursor(i(E),O):D.openKeyCursor(i(E),O);R.onerror=ae(k),R.onsuccess=L(function(N){var K=R.result;if(!K){x(null);return}K.___id=++Ra,K.done=!1;var V=K.continue.bind(K),z=K.continuePrimaryKey;z&&(z=z.bind(K));var J=K.advance.bind(K),ie=function(){throw new Error("Cursor not started")},te=function(){throw new Error("Cursor not stopped")};K.trans=_,K.stop=K.continue=K.continuePrimaryKey=K.advance=ie,K.fail=L(k),K.next=function(){var me=this,oe=1;return this.start(function(){return oe--?me.continue():me.stop()}).then(function(){return me})},K.start=function(me){var oe=new Promise(function(ne,_t){ne=L(ne),R.onerror=ae(_t),K.fail=_t,K.stop=function(Ki){K.stop=K.continue=K.continuePrimaryKey=K.advance=te,ne(Ki)}}),Ge=function(){if(R.result)try{me()}catch(ne){K.fail(ne)}else K.done=!0,K.start=function(){throw new Error("Cursor behind last entry")},K.stop()};return R.onsuccess=L(function(ne){R.onsuccess=Ge,Ge()}),K.continue=V,K.continuePrimaryKey=z,K.advance=J,Ge(),oe},x(K)},k)})}function p(m){return function(_){return new Promise(function(w,g){w=L(w);var b=_.trans,v=_.values,x=_.limit,k=_.query,A=x===1/0?void 0:x,E=k.index,S=k.range,D=b.objectStore(h),O=E.isPrimaryKey?D:D.index(E.name),R=i(S);if(x===0)return w({result:[]});if(m){var N=v?O.getAll(R,A):O.getAllKeys(R,A);N.onsuccess=function(J){return w({result:J.target.result})},N.onerror=ae(g)}else{var K=0,V=v||!("openKeyCursor"in O)?O.openCursor(R):O.openKeyCursor(R),z=[];V.onsuccess=function(J){var ie=V.result;if(!ie)return w({result:z});if(z.push(v?ie.value:ie.primaryKey),++K===x)return w({result:z});ie.continue()},V.onerror=ae(g)}})}}return{name:h,schema:f,mutate:y,getMany:function(m){var _=m.trans,w=m.keys;return new Promise(function(g,b){g=L(g);for(var v=_.objectStore(h),x=w.length,k=new Array(x),A=0,E=0,S,D=function(K){var V=K.target;(k[V._pos]=V.result)!=null,++E===A&&g(k)},O=ae(b),R=0;R<x;++R){var N=w[R];N!=null&&(S=v.get(w[R]),S._pos=R,S.onsuccess=D,S.onerror=O,++A)}A===0&&g(k)})},get:function(m){var _=m.trans,w=m.key;return new Promise(function(g,b){g=L(g);var v=_.objectStore(h),x=v.get(w);x.onsuccess=function(k){return g(k.target.result)},x.onerror=ae(b)})},query:p(s),openCursor:d,count:function(m){var _=m.query,w=m.trans,g=_.index,b=_.range;return new Promise(function(v,x){var k=w.objectStore(h),A=g.isPrimaryKey?k:k.index(g.name),E=i(b),S=E?A.count(E):A.count();S.onsuccess=L(function(D){return v(D.target.result)}),S.onerror=ae(x)})}}}var a=r(e,n),u=a.schema,s=a.hasGetAll,l=u.tables.map(function(f){return o(f)}),c={};return l.forEach(function(f){return c[f.name]=f}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(f){var h=c[f];if(!h)throw new Error("Table '"+f+"' not found");return c[f]},MIN_KEY:-1/0,MAX_KEY:ft(t),schema:u}}function Oa(e,t){return t.reduce(function(n,r){var i=r.create;return I(I({},n),i(n))},e)}function Ba(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var o=Oa(Ia(t,i,r),e.dbcore);return{dbcore:o}}function tr(e,t){var n=e._novip,r=t.db,i=Ba(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(o){var a=o.name;n.core.schema.tables.some(function(u){return u.name===a})&&(o.core=n.core.table(a),n[a]instanceof n.Table&&(n[a].core=o.core))})}function zt(e,t,n,r){var i=e._novip;n.forEach(function(o){var a=r[o];t.forEach(function(u){var s=zn(u,o);(!s||"value"in s&&s.value===void 0)&&(u===i.Transaction.prototype||u instanceof i.Transaction?ve(u,o,{get:function(){return this.table(o)},set:function(l){Gr(this,o,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):u[o]=new i.Table(o,a))})})}function In(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function Ma(e,t){return e._cfg.version-t._cfg.version}function Fa(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),u=P.transless||P;Ae(function(){P.trans=o,P.transless=u,t===0?(j(i).forEach(function(s){nr(n,s,i[s].primKey,i[s].indexes)}),tr(e,n),C.follow(function(){return e.on.populate.fire(o)}).catch(a)):La(e,t,o,n).catch(a)})}function La(e,t,n,r){var i=e._novip,o=[],a=i._versions,u=i._dbSchema=rr(i,i.idbdb,r),s=!1,l=a.filter(function(f){return f._cfg.version>=t});l.forEach(function(f){o.push(function(){var h=u,y=f._cfg.dbschema;Bn(i,h,r),Bn(i,y,r),u=i._dbSchema=y;var d=Ai(h,y);d.add.forEach(function(b){nr(r,b[0],b[1].primKey,b[1].indexes)}),d.change.forEach(function(b){if(b.recreate)throw new T.Upgrade("Not yet support for changing primary key");var v=r.objectStore(b.name);b.add.forEach(function(x){return On(v,x)}),b.change.forEach(function(x){v.deleteIndex(x.name),On(v,x)}),b.del.forEach(function(x){return v.deleteIndex(x)})});var p=f._cfg.contentUpgrade;if(p&&f._cfg.version>t){tr(i,r),n._memoizedTables={},s=!0;var m=ti(y);d.del.forEach(function(b){m[b]=h[b]}),In(i,[i.Transaction.prototype]),zt(i,[i.Transaction.prototype],j(m),m),n.schema=m;var _=Yn(p);_&&Xe();var w,g=C.follow(function(){if(w=p(n),w&&_){var b=ye.bind(null,null);w.then(b,b)}});return w&&typeof w.then=="function"?C.resolve(w):g.then(function(){return w})}}),o.push(function(h){if(!s||!da){var y=f._cfg.dbschema;$a(y,h)}In(i,[i.Transaction.prototype]),zt(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function c(){return o.length?C.resolve(o.shift()(n.idbtrans)).then(c):C.resolve()}return c().then(function(){Na(u,r)})}function Ai(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(!i)n.add.push([r,o]);else{var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!nn)a.recreate=!0,n.change.push(a);else{var u=i.idxByName,s=o.idxByName,l=void 0;for(l in u)s[l]||a.del.push(l);for(l in s){var c=u[l],f=s[l];c?c.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}}return n}function nr(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(o){return On(i,o)}),i}function Na(e,t){j(e).forEach(function(n){t.db.objectStoreNames.contains(n)||nr(t,n,e[n].primKey,e[n].indexes)})}function $a(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function On(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function rr(e,t,n){var r={},i=en(t.objectStoreNames,0);return i.forEach(function(o){for(var a=n.objectStore(o),u=a.keyPath,s=Dn(xi(u),u||"",!1,!1,!!a.autoIncrement,u&&typeof u!="string",!0),l=[],c=0;c<a.indexNames.length;++c){var f=a.index(a.indexNames[c]);u=f.keyPath;var h=Dn(f.name,u,!!f.unique,!!f.multiEntry,!1,u&&typeof u!="string",!1);l.push(h)}r[o]=Ei(o,s,l)}),r}function ja(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=rr(r,t,n);r._storeNames=en(t.objectStoreNames,0),zt(r,[r._allTables],j(i),i)}function Va(e,t){var n=rr(e,e.idbdb,t),r=Ai(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Bn(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,o=0;o<i.length;++o){var a=i[o],u=n.objectStore(a);r._hasGetAll="getAll"in u;for(var s=0;s<u.indexNames.length;++s){var l=u.indexNames[s],c=u.index(l).keyPath,f=typeof c=="string"?c:"["+en(c).join("+")+"]";if(t[a]){var h=t[a].idxByName[f];h&&(h.name=l,delete t[a].idxByName[f],t[a].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&F.WorkerGlobalScope&&F instanceof F.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function Ua(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Dn(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),q(i),n===0)})}var Wa=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){j(t).forEach(function(r){if(t[r]!==null){var i=Ua(t[r]),o=i.shift();if(o.multi)throw new T.Schema("Primary key cannot be multi-valued");i.forEach(function(a){if(a.auto)throw new T.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new T.Schema("Index must have a name and cannot be an empty string")}),n[r]=Ei(r,o,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?G(this._cfg.storesSource,t):t;var r=n._versions,i={},o={};return r.forEach(function(a){G(i,a._cfg.storesSource),o=a._cfg.dbschema={},a._parseStoresSpec(i,o)}),n._dbSchema=o,In(n,[n._allTables,n,n.Transaction.prototype]),zt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],j(o),o),n._storeNames=j(o),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Qn(this._cfg.contentUpgrade||B,t),this},e}();function Ha(e){return wt(Wa.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function ir(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new sr(rn,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function or(e){return e&&typeof e.databases=="function"}function za(e){var t=e.indexedDB,n=e.IDBKeyRange;return or(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==rn})}):ir(t,n).toCollection().primaryKeys()}function Ya(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!or(n)&&t!==rn&&ir(n,r).put({name:t}).catch(B)}function qa(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!or(n)&&t!==rn&&ir(n,r).delete(t).catch(B)}function Mn(e){return Ae(function(){return P.letThrough=!0,e()})}function Xa(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function Qa(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?W(t.dbOpenError):e});le&&(t.openCanceller._stackHolder=Le()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new T.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,a=null,u=!1;return C.race([r,(typeof navigator>"u"?C.resolve():Xa()).then(function(){return new C(function(s,l){if(i(),!n)throw new T.MissingAPI;var c=e.name,f=t.autoSchema?n.open(c):n.open(c,Math.round(e.verno*10));if(!f)throw new T.MissingAPI;f.onerror=ae(l),f.onblocked=L(e._fireOnBlocked),f.onupgradeneeded=L(function(h){if(a=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=lt,a.abort(),f.result.close();var y=n.deleteDatabase(c);y.onsuccess=y.onerror=L(function(){l(new T.NoSuchDatabase("Database "+c+" doesnt exist"))})}else{a.onerror=ae(l);var d=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;u=d<1,e._novip.idbdb=f.result,Fa(e,d/10,a,l)}},l),f.onsuccess=L(function(){a=null;var h=e._novip.idbdb=f.result,y=en(h.objectStoreNames);if(y.length>0)try{var d=h.transaction(Ta(y),"readonly");t.autoSchema?ja(e,h,d):(Bn(e,e._dbSchema,d),Va(e,d)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),tr(e,d)}catch{}rt.push(e),h.onversionchange=L(function(p){t.vcFired=!0,e.on("versionchange").fire(p)}),h.onclose=L(function(p){e.on("close").fire(p)}),u&&Ya(e._deps,c),s()},l)})})]).then(function(){return i(),t.onReadyBeingFired=[],C.resolve(Mn(function(){return e.on.ready.fire(e.vip)})).then(function s(){if(t.onReadyBeingFired.length>0){var l=t.onReadyBeingFired.reduce(Qn,B);return t.onReadyBeingFired=[],C.resolve(Mn(function(){return l(e.vip)})).then(s)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(s){t.dbOpenError=s;try{a&&a.abort()}catch{}return r===t.openCanceller&&e._close(),W(s)}).finally(function(){t.openComplete=!0,o()})}function Fn(e){var t=function(a){return e.next(a)},n=function(a){return e.throw(a)},r=o(t),i=o(n);function o(a){return function(u){var s=a(u),l=s.value;return s.done?l:!l||typeof l.then!="function"?q(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return o(t)()}function Ga(e,t,n){var r=arguments.length;if(r<2)throw new T.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=ni(i);return[e,o,n]}function Si(e,t,n,r,i){return C.resolve().then(function(){var o=P.transless||P,a=e._createTransaction(t,n,e._dbSchema,r),u={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===Xn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Si(e,t,n,null,i)})):W(f)}var s=Yn(i);s&&Xe();var l,c=C.follow(function(){if(l=i.call(a,a),l)if(s){var f=ye.bind(null,null);l.then(f,f)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=Fn(l))},u);return(l&&typeof l.then=="function"?C.resolve(l).then(function(f){return a.active?f:W(new T.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return l})).then(function(f){return r&&a._resolve(),a._completion.then(function(){return f})}).catch(function(f){return a._reject(f),W(f)})})}function Pt(e,t,n){for(var r=q(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function Ja(e){return I(I({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},o=[];function a(p,m,_){var w=it(p),g=i[w]=i[w]||[],b=p==null?0:typeof p=="string"?1:p.length,v=m>0,x=I(I({},_),{isVirtual:v,keyTail:m,keyLength:b,extractKey:Rn(p),unique:!v&&_.unique});if(g.push(x),x.isPrimaryKey||o.push(x),b>1){var k=b===2?p[0]:p.slice(0,b-1);a(k,m+1,_)}return g.sort(function(A,E){return A.keyTail-E.keyTail}),x}var u=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(var s=0,l=r.indexes;s<l.length;s++){var c=l[s];a(c.keyPath,0,c)}function f(p){var m=i[it(p)];return m&&m[0]}function h(p,m){return{type:p.type===1?2:p.type,lower:Pt(p.lower,p.lowerOpen?e.MAX_KEY:e.MIN_KEY,m),lowerOpen:!0,upper:Pt(p.upper,p.upperOpen?e.MIN_KEY:e.MAX_KEY,m),upperOpen:!0}}function y(p){var m=p.query.index;return m.isVirtual?I(I({},p),{query:{index:m,range:h(p.query.range,m.keyTail)}}):p}var d=I(I({},n),{schema:I(I({},r),{primaryKey:u,indexes:o,getIndexByKeyPath:f}),count:function(p){return n.count(y(p))},query:function(p){return n.query(y(p))},openCursor:function(p){var m=p.query.index,_=m.keyTail,w=m.isVirtual,g=m.keyLength;if(!w)return n.openCursor(p);function b(v){function x(A){A!=null?v.continue(Pt(A,p.reverse?e.MAX_KEY:e.MIN_KEY,_)):p.unique?v.continue(v.key.slice(0,g).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,_)):v.continue()}var k=Object.create(v,{continue:{value:x},continuePrimaryKey:{value:function(A,E){v.continuePrimaryKey(Pt(A,e.MAX_KEY,_),E)}},primaryKey:{get:function(){return v.primaryKey}},key:{get:function(){var A=v.key;return g===1?A[0]:A.slice(0,g)}},value:{get:function(){return v.value}}});return k}return n.openCursor(y(p)).then(function(v){return v&&b(v)})}});return d}})}var Za={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ja};function ar(e,t,n,r){return n=n||{},r=r||"",j(e).forEach(function(i){if(!ee(t,i))n[r+i]=void 0;else{var o=e[i],a=t[i];if(typeof o=="object"&&typeof a=="object"&&o&&a){var u=gn(o),s=gn(a);u!==s?n[r+i]=t[i]:u==="Object"?ar(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i])}else o!==a&&(n[r+i]=t[i])}}),j(t).forEach(function(i){ee(e,i)||(n[r+i]=t[i])}),n}function eu(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var tu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return I(I({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=I(I({},n),{mutate:function(o){var a=P.trans,u=a.table(t).hook,s=u.deleting,l=u.creating,c=u.updating;switch(o.type){case"add":if(l.fire===B)break;return a._promise("readwrite",function(){return f(o)},!0);case"put":if(l.fire===B&&c.fire===B)break;return a._promise("readwrite",function(){return f(o)},!0);case"delete":if(s.fire===B)break;return a._promise("readwrite",function(){return f(o)},!0);case"deleteRange":if(s.fire===B)break;return a._promise("readwrite",function(){return h(o)},!0)}return n.mutate(o);function f(d){var p=P.trans,m=d.keys||eu(r,d);if(!m)throw new Error("Keys missing");return d=d.type==="add"||d.type==="put"?I(I({},d),{keys:m}):I({},d),d.type!=="delete"&&(d.values=yn([],d.values,!0)),d.keys&&(d.keys=yn([],d.keys,!0)),nu(n,d,m).then(function(_){var w=m.map(function(g,b){var v=_[b],x={onerror:null,onsuccess:null};if(d.type==="delete")s.fire.call(x,g,v,p);else if(d.type==="add"||v===void 0){var k=l.fire.call(x,g,d.values[b],p);g==null&&k!=null&&(g=k,d.keys[b]=g,r.outbound||re(d.values[b],r.keyPath,g))}else{var A=ar(v,d.values[b]),E=c.fire.call(x,A,g,v,p);if(E){var S=d.values[b];Object.keys(E).forEach(function(D){ee(S,D)?S[D]=E[D]:re(S,D,E[D])})}}return x});return n.mutate(d).then(function(g){for(var b=g.failures,v=g.results,x=g.numFailures,k=g.lastResult,A=0;A<m.length;++A){var E=v?v[A]:m[A],S=w[A];E==null?S.onerror&&S.onerror(b[A]):S.onsuccess&&S.onsuccess(d.type==="put"&&_[A]?d.values[A]:E)}return{failures:b,results:v,numFailures:x,lastResult:k}}).catch(function(g){return w.forEach(function(b){return b.onerror&&b.onerror(g)}),Promise.reject(g)})})}function h(d){return y(d.trans,d.range,1e4)}function y(d,p,m){return n.query({trans:d,values:!1,query:{index:r,range:p},limit:m}).then(function(_){var w=_.result;return f({type:"delete",keys:w,trans:d}).then(function(g){return g.numFailures>0?Promise.reject(g.failures[0]):w.length<m?{failures:[],numFailures:0,lastResult:void 0}:y(d,I(I({},p),{lower:w[w.length-1],lowerOpen:!0}),m)})})}}});return i}})}};function nu(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Ci(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)Q(t.keys[i],e[o])===0&&(r.push(n?vt(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch{return null}}var ru={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return I(I({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Ci(r.keys,r.trans._cache,r.cache==="clone");return i?C.resolve(i):n.getMany(r).then(function(o){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?vt(o):o},o})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},hn;function ur(e){return!("from"in e)}var fe=function(e,t){if(this)G(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new fe;return e&&"d"in e&&G(n,e),n}};ze(fe.prototype,(hn={add:function(e){return Yt(this,e),this},addKey:function(e){return ht(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return ht(t,n,n)}),this}},hn[bn]=function(){return Ln(this)},hn));function ht(e,t,n){var r=Q(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(ur(e))return G(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(Q(n,e.from)<0)return i?ht(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Sr(e);if(Q(t,e.to)>0)return o?ht(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Sr(e);Q(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),Q(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;i&&!e.l&&Yt(e,i),o&&a&&Yt(e,o)}}function Yt(e,t){function n(r,i){var o=i.from,a=i.to,u=i.l,s=i.r;ht(r,o,a),u&&n(r,u),s&&n(r,s)}ur(t)||n(e,t)}function iu(e,t){var n=Ln(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=Ln(e),a=o.next(i.from),u=a.value;!r.done&&!a.done;){if(Q(u.from,i.to)<=0&&Q(u.to,i.from)>=0)return!0;Q(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(a=o.next(i.from)).value}return!1}function Ln(e){var t=ur(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&Q(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||Q(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Sr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var o=i==="r"?"l":"r",a=I({},e),u=e[i];e.from=u.from,e.to=u.to,e[i]=u[i],a[i]=u[o],e[o]=a,a.d=Cr(a)}e.d=Cr(e)}function Cr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var ou={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new fe(e.MIN_KEY,e.MAX_KEY);return I(I({},e),{table:function(r){var i=e.table(r),o=i.schema,a=o.primaryKey,u=a.extractKey,s=a.outbound,l=I(I({},i),{mutate:function(h){var y=h.trans,d=y.mutatedParts||(y.mutatedParts={}),p=function(k){var A="idb://"+t+"/"+r+"/"+k;return d[A]||(d[A]=new fe)},m=p(""),_=p(":dels"),w=h.type,g=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[],b=g[0],v=g[1],x=h.trans._cache;return i.mutate(h).then(function(k){if(q(b)){w!=="delete"&&(b=k.results),m.addKeys(b);var A=Ci(b,x);!A&&w!=="add"&&_.addKeys(b),(A||v)&&au(p,o,A,v)}else if(b){var E={from:b.lower,to:b.upper};_.add(E),m.add(E)}else m.add(n),_.add(n),o.indexes.forEach(function(S){return p(S.name).add(n)});return k})}}),c=function(h){var y,d,p=h.query,m=p.index,_=p.range;return[m,new fe((y=_.lower)!==null&&y!==void 0?y:e.MIN_KEY,(d=_.upper)!==null&&d!==void 0?d:e.MAX_KEY)]},f={get:function(h){return[a,new fe(h.key)]},getMany:function(h){return[a,new fe().addKeys(h.keys)]},count:c,query:c,openCursor:c};return j(f).forEach(function(h){l[h]=function(y){var d=P.subscr;if(d){var p=function(x){var k="idb://"+t+"/"+r+"/"+x;return d[k]||(d[k]=new fe)},m=p(""),_=p(":dels"),w=f[h](y),g=w[0],b=w[1];if(p(g.name||"").add(b),!g.isPrimaryKey)if(h==="count")_.add(n);else{var v=h==="query"&&s&&y.values&&i.query(I(I({},y),{values:!1}));return i[h].apply(this,arguments).then(function(x){if(h==="query"){if(s&&y.values)return v.then(function(S){var D=S.result;return m.addKeys(D),x});var k=y.values?x.result.map(u):x.result;y.values?m.addKeys(k):_.addKeys(k)}else if(h==="openCursor"){var A=x,E=y.values;return A&&Object.create(A,{key:{get:function(){return _.addKey(A.primaryKey),A.key}},primaryKey:{get:function(){var S=A.primaryKey;return _.addKey(S),S}},value:{get:function(){return E&&m.addKey(A.primaryKey),A.value}}})}return x})}}return i[h].apply(this,arguments)}}),l}})}};function au(e,t,n,r){function i(o){var a=e(o.name||"");function u(l){return l!=null?o.extractKey(l):null}var s=function(l){return o.multiEntry&&q(l)?l.forEach(function(c){return a.addKey(c)}):a.addKey(l)};(n||r).forEach(function(l,c){var f=n&&u(n[c]),h=r&&u(r[c]);Q(f,h)!==0&&(f!=null&&s(f),h!=null&&s(h))})}t.indexes.forEach(i)}var sr=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=I({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:B,dbReadyPromise:null,cancelOpen:B,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};a.dbReadyPromise=new C(function(u){a.dbReadyResolve=u}),a.openCanceller=new C(function(u,s){a.cancelOpen=s}),this._state=a,this.name=t,this.on=bt(this,"populate","blocked","versionchange","close",{ready:[Qn,B]}),this.on.ready.subscribe=Jr(this.on.ready.subscribe,function(u){return function(s,l){e.vip(function(){var c=r._state;if(c.openComplete)c.dbOpenError||C.resolve().then(s),l&&u(s);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(s),l&&u(s);else{u(s);var f=r;l||u(function h(){f.on.ready.unsubscribe(s),f.on.ready.unsubscribe(h)})}})}}),this.Collection=_a(this),this.Table=ya(this),this.Transaction=Ka(this),this.Version=Ha(this),this.WhereClause=ka(this),this.on("versionchange",function(u){u.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(u){!u.newVersion||u.newVersion<u.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+u.oldVersion/10)}),this._maxKey=ft(n.IDBKeyRange),this._createTransaction=function(u,s,l,c){return new r.Transaction(u,s,l,r._options.chromeTransactionDurability,c)},this._fireOnBlocked=function(u){r.on("blocked").fire(u),rt.filter(function(s){return s.name===r.name&&s!==r&&!s._state.vcFired}).map(function(s){return s.on("versionchange").fire(u)})},this.use(Za),this.use(tu),this.use(ou),this.use(ru),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(function(u){return u(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new T.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new T.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(Ma),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||P.letThrough||this._vip)?t():new C(function(r,i){if(n._state.openComplete)return i(new T.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new T.DatabaseClosed);return}n.open().catch(B)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,o=t.name;o&&this.unuse({stack:n,name:o});var a=this._middlewares[n]||(this._middlewares[n]=[]);return a.push({stack:n,create:r,level:i??10,name:o}),a.sort(function(u,s){return u.level-s.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(o){return i?o.create!==i:r?o.name!==r:!1})),this},e.prototype.open=function(){return Qa(this)},e.prototype._close=function(){var t=this._state,n=rt.indexOf(this);if(n>=0&&rt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new C(function(r){t.dbReadyResolve=r}),t.openCanceller=new C(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new T.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new C(function(i,o){var a=function(){t.close();var u=t._deps.indexedDB.deleteDatabase(t.name);u.onsuccess=L(function(){qa(t._deps,t.name),i()}),u.onerror=ae(o),u.onblocked=t._fireOnBlocked};if(n)throw new T.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return j(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=Ga.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,o=P.trans;(!o||o.db!==this||t.indexOf("!")!==-1)&&(o=null);var a=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var u,s;try{if(s=n.map(function(c){var f=c instanceof i.Table?c.name:c;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t===un)u=un;else if(t=="rw"||t==sn)u=sn;else throw new T.InvalidArgument("Invalid transaction mode: "+t);if(o){if(o.mode===un&&u===sn)if(a)o=null;else throw new T.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&s.forEach(function(c){if(o&&o.storeNames.indexOf(c)===-1)if(a)o=null;else throw new T.SubTransaction("Table "+c+" not included in parent transaction.")}),a&&o&&!o.active&&(o=null)}}catch(c){return o?o._promise(null,function(f,h){h(c)}):W(c)}var l=Si.bind(null,this,u,s,o,r);return o?o._promise(u,l,"lock"):P.trans?Qe(P.transless,function(){return i._whenReady(l)}):this._whenReady(l)},e.prototype.table=function(t){if(!ee(this._allTables,t))throw new T.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),uu=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",su=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[uu]=function(){return this},e}();function ki(e,t){return j(t).forEach(function(n){var r=e[n]||(e[n]=new fe);Yt(r,t[n])}),e}function Pi(e){return new su(function(t){var n=Yn(e);function r(y){n&&Xe();var d=function(){return Ae(e,{subscr:y,trans:null})},p=P.trans?Qe(P.transless,d):d();return n&&p.then(ye,ye),p}var i=!1,o={},a={},u={get closed(){return i},unsubscribe:function(){i=!0,Ce.storagemutated.unsubscribe(f)}};t.start&&t.start(u);var s=!1,l=!1;function c(){return j(a).some(function(y){return o[y]&&iu(o[y],a[y])})}var f=function(y){ki(o,y),c()&&h()},h=function(){if(!(s||i)){o={};var y={},d=r(y);l||(Ce(ct,f),l=!0),s=!0,Promise.resolve(d).then(function(p){s=!1,!i&&(c()?h():(o={},a=y,t.next&&t.next(p)))},function(p){s=!1,t.error&&t.error(p),u.unsubscribe()})}};return h(),u})}var Nn;try{Nn={indexedDB:F.indexedDB||F.mozIndexedDB||F.webkitIndexedDB||F.msIndexedDB,IDBKeyRange:F.IDBKeyRange||F.webkitIDBKeyRange}}catch{Nn={indexedDB:null,IDBKeyRange:null}}var ke=sr;ze(ke,I(I({},tn),{delete:function(e){var t=new ke(e,{addons:[]});return t.delete()},exists:function(e){return new ke(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return za(ke.dependencies).then(e)}catch{return W(new T.MissingAPI)}},defineClass:function(){function e(t){G(this,t)}return e},ignoreTransaction:function(e){return P.trans?Qe(P.transless,e):e()},vip:Mn,async:function(e){return function(){try{var t=Fn(e.apply(this,arguments));return!t||typeof t.then!="function"?C.resolve(t):t}catch(n){return W(n)}}},spawn:function(e,t,n){try{var r=Fn(e.apply(n,t||[]));return!r||typeof r.then!="function"?C.resolve(r):r}catch(i){return W(i)}},currentTransaction:{get:function(){return P.trans||null}},waitFor:function(e,t){var n=C.resolve(typeof e=="function"?ke.ignoreTransaction(e):e).timeout(t||6e4);return P.trans?P.trans.waitFor(n):n},Promise:C,debug:{get:function(){return le},set:function(e){ii(e,e==="dexie"?function(){return!0}:gi)}},derive:Ye,extend:G,props:ze,override:Jr,Events:bt,on:Ce,liveQuery:Pi,extendObservabilitySet:ki,getByKeyPath:pe,setByKeyPath:re,delByKeyPath:jo,shallowClone:ti,deepClone:vt,getObjectDiff:ar,cmp:Q,asap:Zr,minKey:Tn,addons:[],connections:rt,errnames:Xn,dependencies:Nn,semVer:br,version:br.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));ke.maxKey=ft(ke.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ce(ct,function(e){if(!de){var t;nn?(t=document.createEvent("CustomEvent"),t.initCustomEvent(_e,!0,!0,e)):t=new CustomEvent(_e,{detail:e}),de=!0,dispatchEvent(t),de=!1}}),addEventListener(_e,function(e){var t=e.detail;de||qt(t)}));function qt(e){var t=de;try{de=!0,Ce.storagemutated.fire(e)}finally{de=t}}var de=!1;if(typeof BroadcastChannel<"u"){var kr=new BroadcastChannel(_e);Ce(ct,function(e){de||kr.postMessage(e)}),kr.onmessage=function(e){e.data&&qt(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Ce(ct,function(e){try{de||(typeof localStorage<"u"&&localStorage.setItem(_e,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&yn([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:_e,changedParts:e})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(e){if(e.key===_e){var t=JSON.parse(e.newValue);t&&qt(t.changedParts)}});var Pr=self.document&&navigator.serviceWorker;Pr&&Pr.addEventListener("message",lu)}function lu(e){var t=e.data;t&&t.type===_e&&qt(t.changedParts)}C.rejectionMapper=Qo;ii(le,gi);class cu extends sr{decks;words;constructor(){super("vocabulary"),this.version(1).stores({decks:"++id, name",words:"++id, word, deckId"})}}const dt=new cu,$n=e=>{const[t,n]=xe(),i=Pi(e).subscribe(o=>{n(()=>o)});return Xt(()=>{i.unsubscribe()}),t};const fu=Fe('<main><h1>Home</h1><ul aria-label="List of decks" class="deck-list"></ul><button class="button create-button">Create default deck</button></main>'),hu=Fe("<li></li>"),du=()=>{const e=$n(async()=>await dt.decks.toArray()),t=()=>{dt.decks.add({name:"Default"}).catch(console.error)};return(()=>{const n=fu.cloneNode(!0),r=n.firstChild,i=r.nextSibling,o=i.nextSibling;return ue(i,U(Ui,{get each(){return e()},children:a=>(()=>{const u=hu.cloneNode(!0);return ue(u,U(Nt,{class:"deck-card",get href(){return`/deck/${a.id?.toString()}`},get children(){return a.name}})),u})()})),o.$$click=()=>t(),n})()};Gt(["click"]);const pu=Fe('<main><h1>Create Deck</h1><form><label for="input-create-deck-name">Name</label><input id="input-create-deck-name"><button type="submit">Create</button></form></main>'),vu=()=>{let e;const t=n=>{n.preventDefault(),console.log("e",n),console.log(e)};return(()=>{const n=pu.cloneNode(!0),r=n.firstChild,i=r.nextSibling,o=i.firstChild,a=o.nextSibling;i.addEventListener("submit",t);const u=e;return typeof u=="function"?Ur(u,a):e=a,n})()};const yu=Fe('<main><h1></h1><h2>Word count: </h2><div class="deck-actions"></div></main>'),mu=()=>{const{id:e}=qr(),t=parseInt(e,10),n=$n(async()=>await dt.decks.get(parseInt(e,10))),r=$n(async()=>await dt.words.where("deckId").equals(t).count());return(()=>{const i=yu.cloneNode(!0),o=i.firstChild,a=o.nextSibling;a.firstChild;const u=a.nextSibling;return ue(o,()=>n()?.name),ue(a,r,null),ue(u,U(Nt,{class:"button",href:`/deck/${e}/add-word`,children:"Add word"}),null),ue(u,U(Nt,{class:"button",href:`/deck/${e}/study`,children:"Study"}),null),i})()},gu=Fe('<main><h1>Add Word</h1><form><label for="input-word-text">Word / Phrase</label><input class="input" id="input-word-text"><button class="button">Add</button></form></main>'),bu=()=>{let e;const{id:t}=qr(),n=So(),r=i=>{i.preventDefault(),dt.words.add({word:e.value,deckId:parseInt(t,10)}).then(()=>{n(`/deck/${t}`)}).catch(console.error)};return(()=>{const i=gu.cloneNode(!0),o=i.firstChild,a=o.nextSibling,u=a.firstChild,s=u.nextSibling;a.addEventListener("submit",r);const l=e;return typeof l=="function"?Ur(l,s):e=s,i})()};const wu=Fe('<div><header><button class="color-mode-switcher"></button></header><div class="outlet"></div></div>'),_u=()=>{const e=window.matchMedia("(prefers-color-scheme: light)").matches,[t,n]=xe(e);window.matchMedia("(prefers-color-scheme: light)").addEventListener("change",i=>{n(i.matches)});const r=()=>{const i=t()?"dark-mode":"light-mode";document.documentElement.classList.contains(i)?document.documentElement.classList.remove(i):document.documentElement.classList.add(i)};return(()=>{const i=wu.cloneNode(!0),o=i.firstChild,a=o.firstChild,u=o.nextSibling;return ue(o,U(Nt,{href:"/",children:"Home"}),a),a.$$click=r,ue(a,()=>t()?"Dark mode":"Light mode"),ue(u,U(Bo,{get children(){return[U(Et,{path:"/",element:du}),U(Et,{path:"/deck/:id",element:mu}),U(Et,{path:"/deck/:id/add-word",element:bu}),U(Et,{path:"/create-deck",element:vu})]}})),i})()};Gt(["click"]);Gi(()=>U(Oo,{get base(){return"/vocab-trainer/"},get children(){return U(_u,{})}}),document.getElementById("root"));
