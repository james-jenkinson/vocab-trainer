(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const ke={},Vi=(e,t)=>e===t,Xn=Symbol("solid-proxy"),Hi=Symbol("solid-track"),Vt={equals:Vi};let qi=Yr;const je=1,Ht=2,jr={owned:null,cleanups:null,context:null,owner:null};var N=null;let $e=null,U=null,Q=null,Be=null,Gn=0;function at(e,t){const n=U,r=N,i=e.length===0,o=i?jr:{owned:null,cleanups:null,context:null,owner:t||r},a=i?e:()=>e(()=>ce(()=>Zn(o)));N=o,U=null;try{return We(a,!0)}finally{U=n,N=r}}function ee(e,t){t=t?Object.assign({},Vt,t):Vt;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),Hr(n,i));return[Vr.bind(n),r]}function ue(e,t,n){const r=qr(e,t,!1,je);rn(r)}function L(e,t,n){n=n?Object.assign({},Vt,n):Vt;const r=qr(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,rn(r),Vr.bind(r)}function ce(e){const t=U;U=null;try{return e()}finally{U=t}}function Wr(e,t,n){const r=Array.isArray(e);let i,o=n&&n.defer;return a=>{let s;if(r){s=Array(e.length);for(let l=0;l<e.length;l++)s[l]=e[l]()}else s=e();if(o){o=!1;return}const u=ce(()=>t(s,i,a));return i=s,u}}function nn(e){return N===null||(N.cleanups===null?N.cleanups=[e]:N.cleanups.push(e)),e}function zi(){return N}function Yi(e,t){const n=N;N=e;try{return We(t,!0)}finally{N=n}}function Xi(e){const t=U,n=N;return Promise.resolve().then(()=>{U=t,N=n;let r;return We(e,!1),U=N=null,r?r.done:void 0})}function Ur(e,t){const n=Symbol("context");return{id:n,Provider:Zi(n),defaultValue:e}}function Qn(e){let t;return(t=Qr(N,e.id))!==void 0?t:e.defaultValue}function Jn(e){const t=L(e),n=L(()=>_n(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Vr(){const e=$e;if(this.sources&&(this.state||e))if(this.state===je||e)rn(this);else{const t=Q;Q=null,We(()=>qt(this),!1),Q=t}if(U){const t=this.observers?this.observers.length:0;U.sources?(U.sources.push(this),U.sourceSlots.push(t)):(U.sources=[this],U.sourceSlots=[t]),this.observers?(this.observers.push(U),this.observerSlots.push(U.sources.length-1)):(this.observers=[U],this.observerSlots=[U.sources.length-1])}return this.value}function Hr(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&We(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],a=$e&&$e.running;a&&$e.disposed.has(o),(a&&!o.tState||!a&&!o.state)&&(o.pure?Q.push(o):Be.push(o),o.observers&&Xr(o)),a||(o.state=je)}if(Q.length>1e6)throw Q=[],new Error},!1)),t}function rn(e){if(!e.fn)return;Zn(e);const t=N,n=U,r=Gn;U=N=e,Gi(e,e.value,r),U=n,N=t}function Gi(e,t,n){let r;try{r=e.fn(t)}catch(i){e.pure&&(e.state=je),Gr(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Hr(e,r):e.value=r,e.updatedAt=n)}function qr(e,t,n,r=je,i){const o={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:N,context:null,pure:n};return N===null||N!==jr&&(N.owned?N.owned.push(o):N.owned=[o]),o}function zr(e){const t=$e;if(e.state===0||t)return;if(e.state===Ht||t)return qt(e);if(e.suspense&&ce(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Gn);)(e.state||t)&&n.push(e);for(let r=n.length-1;r>=0;r--)if(e=n[r],e.state===je||t)rn(e);else if(e.state===Ht||t){const i=Q;Q=null,We(()=>qt(e,n[0]),!1),Q=i}}function We(e,t){if(Q)return e();let n=!1;t||(Q=[]),Be?n=!0:Be=[],Gn++;try{const r=e();return Qi(n),r}catch(r){Q||(Be=null),Gr(r)}}function Qi(e){if(Q&&(Yr(Q),Q=null),e)return;const t=Be;Be=null,t.length&&We(()=>qi(t),!1)}function Yr(e){for(let t=0;t<e.length;t++)zr(e[t])}function qt(e,t){const n=$e;e.state=0;for(let r=0;r<e.sources.length;r+=1){const i=e.sources[r];i.sources&&(i.state===je||n?i!==t&&zr(i):(i.state===Ht||n)&&qt(i,t))}}function Xr(e){const t=$e;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(!r.state||t)&&(r.state=Ht,r.pure?Q.push(r):Be.push(r),r.observers&&Xr(r))}}function Zn(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const o=i.pop(),a=n.observerSlots.pop();r<i.length&&(o.sourceSlots[a]=r,i[r]=o,n.observerSlots[r]=a)}}if(e.owned){for(t=0;t<e.owned.length;t++)Zn(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function Ji(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function Gr(e){throw e=Ji(e),e}function Qr(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:Qr(e.owner,t):void 0}function _n(e){if(typeof e=="function"&&!e.length)return _n(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=_n(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Zi(e,t){return function(r){let i;return ue(()=>i=ce(()=>(N.context={[e]:r.value},Jn(()=>r.children))),void 0),i}}const eo=Symbol("fallback");function gr(e){for(let t=0;t<e.length;t++)e[t]()}function to(e,t,n={}){let r=[],i=[],o=[],a=0,s=t.length>1?[]:null;return nn(()=>gr(o)),()=>{let u=e()||[],l,c;return u[Hi],ce(()=>{let d=u.length,y,h,p,m,S,x,b,w,v;if(d===0)a!==0&&(gr(o),o=[],r=[],i=[],a=0,s&&(s=[])),n.fallback&&(r=[eo],i[0]=at(g=>(o[0]=g,n.fallback())),a=1);else if(a===0){for(i=new Array(d),c=0;c<d;c++)r[c]=u[c],i[c]=at(f);a=d}else{for(p=new Array(d),m=new Array(d),s&&(S=new Array(d)),x=0,b=Math.min(a,d);x<b&&r[x]===u[x];x++);for(b=a-1,w=d-1;b>=x&&w>=x&&r[b]===u[w];b--,w--)p[w]=i[b],m[w]=o[b],s&&(S[w]=s[b]);for(y=new Map,h=new Array(w+1),c=w;c>=x;c--)v=u[c],l=y.get(v),h[c]=l===void 0?-1:l,y.set(v,c);for(l=x;l<=b;l++)v=r[l],c=y.get(v),c!==void 0&&c!==-1?(p[c]=i[l],m[c]=o[l],s&&(S[c]=s[l]),c=h[c],y.set(v,c)):o[l]();for(c=x;c<d;c++)c in p?(i[c]=p[c],o[c]=m[c],s&&(s[c]=S[c],s[c](c))):i[c]=at(f);i=i.slice(0,a=d),r=u.slice(0)}return i});function f(d){if(o[c]=d,s){const[y,h]=ee(c);return s[c]=h,t(u[c],y)}return t(u[c])}}}function I(e,t){return ce(()=>e(t||{}))}function Pt(){return!0}const Jr={get(e,t,n){return t===Xn?n:e.get(t)},has(e,t){return e.has(t)},set:Pt,deleteProperty:Pt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Pt,deleteProperty:Pt}},ownKeys(e){return e.keys()}};function hn(e){return(e=typeof e=="function"?e():e)?e:{}}function xn(...e){if(e.some(n=>n&&(Xn in n||typeof n=="function")))return new Proxy({get(n){for(let r=e.length-1;r>=0;r--){const i=hn(e[r])[n];if(i!==void 0)return i}},has(n){for(let r=e.length-1;r>=0;r--)if(n in hn(e[r]))return!0;return!1},keys(){const n=[];for(let r=0;r<e.length;r++)n.push(...Object.keys(hn(e[r])));return[...new Set(n)]}},Jr);const t={};for(let n=e.length-1;n>=0;n--)if(e[n]){const r=Object.getOwnPropertyDescriptors(e[n]);for(const i in r)i in t||Object.defineProperty(t,i,{enumerable:!0,get(){for(let o=e.length-1;o>=0;o--){const a=(e[o]||{})[i];if(a!==void 0)return a}}})}return t}function no(e,...t){const n=new Set(t.flat()),r=Object.getOwnPropertyDescriptors(e),i=Xn in e;i||t.push(Object.keys(r).filter(a=>!n.has(a)));const o=t.map(a=>{const s={};for(let u=0;u<a.length;u++){const l=a[u];!i&&!(l in e)||Object.defineProperty(s,l,r[l]?r[l]:{get(){return e[l]},set(){return!0},enumerable:!0})}return s});return i&&o.push(new Proxy({get(a){return n.has(a)?void 0:e[a]},has(a){return n.has(a)?!1:a in e},keys(){return Object.keys(e).filter(a=>!n.has(a))}},Jr)),o}function ro(e){const t="fallback"in e&&{fallback:()=>e.fallback};return L(to(()=>e.each,e.children,t||void 0))}function ae(e){let t=!1;const n=e.keyed,r=L(()=>e.when,void 0,{equals:(i,o)=>t?i===o:!i==!o});return L(()=>{const i=r();if(i){const o=e.children,a=typeof o=="function"&&o.length>0;return t=n||a,a?ce(()=>o(i)):o}return e.fallback})}const io=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],oo=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...io]),ao=new Set(["innerHTML","textContent","innerText","children"]),so=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),br=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),uo=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),lo={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function co(e,t,n){let r=n.length,i=t.length,o=r,a=0,s=0,u=t[i-1].nextSibling,l=null;for(;a<i||s<o;){if(t[a]===n[s]){a++,s++;continue}for(;t[i-1]===n[o-1];)i--,o--;if(i===a){const c=o<r?s?n[s-1].nextSibling:n[o-s]:u;for(;s<o;)e.insertBefore(n[s++],c)}else if(o===s)for(;a<i;)(!l||!l.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[o-1]&&n[s]===t[i-1]){const c=t[--i].nextSibling;e.insertBefore(n[s++],t[a++].nextSibling),e.insertBefore(n[--o],c),t[i]=n[o]}else{if(!l){l=new Map;let f=s;for(;f<o;)l.set(n[f],f++)}const c=l.get(t[a]);if(c!=null)if(s<c&&c<o){let f=a,d=1,y;for(;++f<i&&f<o&&!((y=l.get(t[f]))==null||y!==c+d);)d++;if(d>c-s){const h=t[a];for(;s<c;)e.insertBefore(n[s++],h)}else e.replaceChild(n[s++],t[a++])}else a++;else t[a++].remove()}}}const wr="_$DX_DELEGATE";function fo(e,t,n,r={}){let i;return at(o=>{i=o,t===document?e():B(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function z(e,t,n){const r=document.createElement("template");r.innerHTML=e;let i=r.content.firstChild;return n&&(i=i.firstChild),i}function wt(e,t=window.document){const n=t[wr]||(t[wr]=new Set);for(let r=0,i=e.length;r<i;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,_o))}}function Zr(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function ho(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function po(e,t){t==null?e.removeAttribute("class"):e.className=t}function vo(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=o=>i.call(e,n[1],o))}else e.addEventListener(t,n)}function yo(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let o,a;for(o=0,a=i.length;o<a;o++){const s=i[o];!s||s==="undefined"||t[s]||(_r(e,s,!1),delete n[s])}for(o=0,a=r.length;o<a;o++){const s=r[o],u=!!t[s];!s||s==="undefined"||n[s]===u||!u||(_r(e,s,!0),n[s]=u)}return n}function mo(e,t,n){if(!t)return n?Zr(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,o;for(o in n)t[o]==null&&r.removeProperty(o),delete n[o];for(o in t)i=t[o],i!==n[o]&&(r.setProperty(o,i),n[o]=i);return n}function go(e,t={},n,r){const i={};return r||ue(()=>i.children=Qe(e,t.children,i.children)),ue(()=>t.ref&&t.ref(e)),ue(()=>bo(e,t,n,!0,i,!0)),i}function $t(e,t,n){return ce(()=>e(t,n))}function B(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return Qe(e,t,r,n);ue(i=>Qe(e,t(),i,n),r)}function bo(e,t,n,r,i={},o=!1){t||(t={});for(const a in i)if(!(a in t)){if(a==="children")continue;i[a]=xr(e,a,null,i[a],n,o)}for(const a in t){if(a==="children"){r||Qe(e,t.children);continue}const s=t[a];i[a]=xr(e,a,s,i[a],n,o)}}function wo(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function _r(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,o=r.length;i<o;i++)e.classList.toggle(r[i],n)}function xr(e,t,n,r,i,o){let a,s,u;if(t==="style")return mo(e,n,r);if(t==="classList")return yo(e,n,r);if(n===r)return r;if(t==="ref")o||n(e);else if(t.slice(0,3)==="on:"){const l=t.slice(3);r&&e.removeEventListener(l,r),n&&e.addEventListener(l,n)}else if(t.slice(0,10)==="oncapture:"){const l=t.slice(10);r&&e.removeEventListener(l,r,!0),n&&e.addEventListener(l,n,!0)}else if(t.slice(0,2)==="on"){const l=t.slice(2).toLowerCase(),c=uo.has(l);if(!c&&r){const f=Array.isArray(r)?r[0]:r;e.removeEventListener(l,f)}(c||n)&&(vo(e,l,n,c),c&&wt([l]))}else if((u=ao.has(t))||!i&&(br[t]||(s=oo.has(t)))||(a=e.nodeName.includes("-")))t==="class"||t==="className"?po(e,n):a&&!s&&!u?e[wo(t)]=n:e[br[t]||t]=n;else{const l=i&&t.indexOf(":")>-1&&lo[t.split(":")[0]];l?ho(e,l,t,n):Zr(e,so[t]||t,n)}return n}function _o(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),ke.registry&&!ke.done&&(ke.done=!0,document.querySelectorAll("[id^=pl-]").forEach(r=>r.remove()));n!==null;){const r=n[t];if(r&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?r.call(n,i,e):r.call(n,e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function Qe(e,t,n,r,i){for(ke.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(ke.context)return n;if(o==="number"&&(t=t.toString()),a){let s=n[0];s&&s.nodeType===3?s.data=t:s=document.createTextNode(t),n=Ve(e,n,r,s)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean"){if(ke.context)return n;n=Ve(e,n,r)}else{if(o==="function")return ue(()=>{let s=t();for(;typeof s=="function";)s=s();n=Qe(e,s,n,r)}),()=>n;if(Array.isArray(t)){const s=[],u=n&&Array.isArray(n);if(Sn(s,t,n,i))return ue(()=>n=Qe(e,s,n,r,!0)),()=>n;if(ke.context){if(!s.length)return n;for(let l=0;l<s.length;l++)if(s[l].parentNode)return n=s}if(s.length===0){if(n=Ve(e,n,r),a)return n}else u?n.length===0?Sr(e,s,r):co(e,n,s):(n&&Ve(e),Sr(e,s));n=s}else if(t instanceof Node){if(ke.context&&t.parentNode)return n=a?[t]:t;if(Array.isArray(n)){if(a)return n=Ve(e,n,r,t);Ve(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Sn(e,t,n,r){let i=!1;for(let o=0,a=t.length;o<a;o++){let s=t[o],u=n&&n[o];if(s instanceof Node)e.push(s);else if(!(s==null||s===!0||s===!1))if(Array.isArray(s))i=Sn(e,s,u)||i;else if(typeof s=="function")if(r){for(;typeof s=="function";)s=s();i=Sn(e,Array.isArray(s)?s:[s],Array.isArray(u)?u:[u])||i}else e.push(s),i=!0;else{const l=String(s);u&&u.nodeType===3&&u.data===l?e.push(u):e.push(document.createTextNode(l))}}return i}function Sr(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function Ve(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let o=!1;for(let a=t.length-1;a>=0;a--){const s=t[a];if(i!==s){const u=s.parentNode===e;!o&&!a?u?e.replaceChild(i,s):e.insertBefore(i,n):u&&s.remove()}else o=!0}}else e.insertBefore(i,n);return[i]}const xo=!1;function So(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function Eo([e,t],n,r){return[n?()=>n(e()):e,r?i=>t(r(i)):t]}function Ao(e){try{return document.querySelector(e)}catch{return null}}function Co(e,t){const n=Ao(`#${e}`);n?n.scrollIntoView():t&&window.scrollTo(0,0)}function ko(e,t,n,r){let i=!1;const o=s=>typeof s=="string"?{value:s}:s,a=Eo(ee(o(e()),{equals:(s,u)=>s.value===u.value}),void 0,s=>(!i&&t(s),s));return n&&nn(n((s=e())=>{i=!0,a[1](o(s)),i=!1})),{signal:a,utils:r}}function Do(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:ee({value:""})};return e}function Po(){return ko(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:e,replace:t,scroll:n,state:r})=>{t?window.history.replaceState(r,"",e):window.history.pushState(r,"",e),Co(window.location.hash.slice(1),n)},e=>So(window,"popstate",()=>e()),{go:e=>window.history.go(e)})}const Ro=/^(?:[a-z0-9]+:)?\/\//i,To=/^\/+|\/+$/g;function st(e,t=!1){const n=e.replace(To,"");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function Bt(e,t,n){if(Ro.test(t))return;const r=st(e),i=n&&st(n);let o="";return!i||t.startsWith("/")?o=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?o=r+i:o=i,(o||"/")+st(t,!o)}function Io(e,t){if(e==null)throw new Error(t);return e}function ei(e,t){return st(e).replace(/\/*(\*.*)?$/g,"")+st(t)}function Ko(e){const t={};return e.searchParams.forEach((n,r)=>{t[r]=n}),t}function Ye(e,t){return decodeURIComponent(t?e.replace(/\+/g," "):e)}function Oo(e,t){const[n,r]=e.split("/*",2),i=n.split("/").filter(Boolean),o=i.length;return a=>{const s=a.split("/").filter(Boolean),u=s.length-o;if(u<0||u>0&&r===void 0&&!t)return null;const l={path:o?"":"/",params:{}};for(let c=0;c<o;c++){const f=i[c],d=s[c];if(f[0]===":")l.params[f.slice(1)]=d;else if(f.localeCompare(d,void 0,{sensitivity:"base"})!==0)return null;l.path+=`/${d}`}return r&&(l.params[r]=u?s.slice(-u).join("/"):""),l}}function $o(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,o)=>i+(o.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function ti(e){const t=new Map,n=zi();return new Proxy({},{get(r,i){return t.has(i)||Yi(n,()=>t.set(i,L(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function Bo(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([i,o])=>{o==null||o===""?n.delete(i):n.set(i,String(o))});const r=n.toString();return r?`?${r}`:""}function ni(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return ni(r).reduce((o,a)=>[...o,...i.map(s=>s+a)],[])}const Mo=100,ri=Ur(),on=Ur(),_t=()=>Io(Qn(ri),"Make sure your app is wrapped in a <Router />");let ft;const an=()=>ft||Qn(on)||_t().base,No=e=>{const t=an();return L(()=>t.resolvePath(e()))},Lo=e=>{const t=_t();return L(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},er=()=>_t().navigatorFactory(),ii=()=>_t().location,sn=()=>an().params,oi=()=>{const e=ii(),t=er(),n=(r,i)=>{const o=ce(()=>Bo(e.search,r));t(e.pathname+o,{scroll:!1,...i})};return[e.query,n]};function Fo(e,t="",n){const{component:r,data:i,children:o}=e,a=!o||Array.isArray(o)&&!o.length,s={key:e,element:r?()=>I(r,{}):()=>{const{element:u}=e;return u===void 0&&n?I(n,{}):u},preload:e.component?r.preload:e.preload,data:i};return ai(e.path).reduce((u,l)=>{for(const c of ni(l)){const f=ei(t,c),d=a?f:f.split("/*",1)[0];u.push({...s,originalPath:c,pattern:d,matcher:Oo(d,!a)})}return u},[])}function jo(e,t=0){return{routes:e,score:$o(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const o=e[i],a=o.matcher(n);if(!a)return null;r.unshift({...a,route:o})}return r}}}function ai(e){return Array.isArray(e)?e:[e]}function si(e,t="",n,r=[],i=[]){const o=ai(e);for(let a=0,s=o.length;a<s;a++){const u=o[a];if(u&&typeof u=="object"&&u.hasOwnProperty("path")){const l=Fo(u,t,n);for(const c of l){if(r.push(c),u.children)si(u.children,c.pattern,n,r,i);else{const f=jo([...r],i.length);i.push(f)}r.pop()}}}return r.length?i:i.sort((a,s)=>s.score-a.score)}function Wo(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}function Uo(e,t){const n=new URL("http://sar"),r=L(u=>{const l=e();try{return new URL(l,n)}catch{return console.error(`Invalid path ${l}`),u}},n,{equals:(u,l)=>u.href===l.href}),i=L(()=>Ye(r().pathname)),o=L(()=>Ye(r().search,!0)),a=L(()=>Ye(r().hash)),s=L(()=>"");return{get pathname(){return i()},get search(){return o()},get hash(){return a()},get state(){return t()},get key(){return s()},query:ti(Wr(o,()=>Ko(r())))}}function Vo(e,t="",n,r){const{signal:[i,o],utils:a={}}=Do(e),s=a.parsePath||(_=>_),u=a.renderPath||(_=>_),l=Bt("",t),c=void 0;if(l===void 0)throw new Error(`${l} is not a valid base path`);l&&!i().value&&o({value:l,replace:!0,scroll:!1});const[f,d]=ee(!1),y=async _=>{d(!0);try{await Xi(_)}finally{d(!1)}},[h,p]=ee(i().value),[m,S]=ee(i().state),x=Uo(h,m),b=[],w={pattern:l,params:{},path:()=>l,outlet:()=>null,resolvePath(_){return Bt(l,_)}};if(n)try{ft=w,w.data=n({data:void 0,params:{},location:x,navigate:g(w)})}finally{ft=void 0}function v(_,E,D){ce(()=>{if(typeof E=="number"){E&&(a.go?a.go(E):console.warn("Router integration does not support relative routing"));return}const{replace:$,resolve:K,scroll:W,state:R}={replace:!1,resolve:!0,scroll:!0,...D},H=K?_.resolvePath(E):Bt("",E);if(H===void 0)throw new Error(`Path '${E}' is not a routable path`);if(b.length>=Mo)throw new Error("Too many redirects");const Y=h();if((H!==Y||R!==m())&&!xo){const te=b.push({value:Y,replace:$,scroll:W,state:m()});y(()=>{p(H),S(R)}).then(()=>{b.length===te&&C({value:H,state:R})})}})}function g(_){return _=_||Qn(on)||w,(E,D)=>v(_,E,D)}function C(_){const E=b[0];E&&((_.value!==E.value||_.state!==E.state)&&o({..._,replace:E.replace,scroll:E.scroll}),b.length=0)}ue(()=>{const{value:_,state:E}=i();ce(()=>{_!==h()&&y(()=>{p(_),S(E)})})});{let _=function(E){if(E.defaultPrevented||E.button!==0||E.metaKey||E.altKey||E.ctrlKey||E.shiftKey)return;const D=E.composedPath().find(te=>te instanceof Node&&te.nodeName.toUpperCase()==="A");if(!D||!D.hasAttribute("link"))return;const $=D.href;if(D.target||!$&&!D.hasAttribute("state"))return;const K=(D.getAttribute("rel")||"").split(/\s+/);if(D.hasAttribute("download")||K&&K.includes("external"))return;const W=new URL($),R=Ye(W.pathname);if(W.origin!==window.location.origin||l&&R&&!R.toLowerCase().startsWith(l.toLowerCase()))return;const H=s(R+Ye(W.search,!0)+Ye(W.hash)),Y=D.getAttribute("state");E.preventDefault(),v(w,H,{resolve:!1,replace:D.hasAttribute("replace"),scroll:!D.hasAttribute("noscroll"),state:Y&&JSON.parse(Y)})};var A=_;wt(["click"]),document.addEventListener("click",_),nn(()=>document.removeEventListener("click",_))}return{base:w,out:c,location:x,isRouting:f,renderPath:u,parsePath:s,navigatorFactory:g}}function Ho(e,t,n,r){const{base:i,location:o,navigatorFactory:a}=e,{pattern:s,element:u,preload:l,data:c}=r().route,f=L(()=>r().path),d=ti(()=>r().params);l&&l();const y={parent:t,pattern:s,get child(){return n()},path:f,params:d,data:t.data,outlet:u,resolvePath(h){return Bt(i.path(),h,f())}};if(c)try{ft=y,y.data=c({data:t.data,params:d,location:o,navigate:a(y)})}finally{ft=void 0}return y}const qo=z("<a link></a>"),zo=e=>{const{source:t,url:n,base:r,data:i,out:o}=e,a=t||Po(),s=Vo(a,r,i);return I(ri.Provider,{value:s,get children(){return e.children}})},Yo=e=>{const t=_t(),n=an(),r=Jn(()=>e.children),i=L(()=>si(r(),ei(n.pattern,e.base||""),Xo)),o=L(()=>Wo(i(),t.location.pathname));t.out&&t.out.matches.push(o().map(({route:l,path:c,params:f})=>({originalPath:l.originalPath,pattern:l.pattern,path:c,params:f})));const a=[];let s;const u=L(Wr(o,(l,c,f)=>{let d=c&&l.length===c.length;const y=[];for(let h=0,p=l.length;h<p;h++){const m=c&&c[h],S=l[h];f&&m&&S.route.key===m.route.key?y[h]=f[h]:(d=!1,a[h]&&a[h](),at(x=>{a[h]=x,y[h]=Ho(t,y[h-1]||n,()=>u()[h+1],()=>o()[h])}))}return a.splice(l.length).forEach(h=>h()),f&&d?f:(s=y[0],y)}));return I(ae,{get when(){return u()&&s},children:l=>I(on.Provider,{value:l,get children(){return l.outlet()}})})},Ie=e=>{const t=Jn(()=>e.children);return xn(e,{get children(){return t()}})},Xo=()=>{const e=an();return I(ae,{get when(){return e.child},children:t=>I(on.Provider,{value:t,get children(){return t.outlet()}})})};function we(e){e=xn({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=no(e,["href","state","activeClass","inactiveClass","end"]),n=No(()=>e.href),r=Lo(n),i=ii(),o=L(()=>{const a=n();if(a===void 0)return!1;const s=a.split(/[?#]/,1)[0].toLowerCase(),u=i.pathname.toLowerCase();return e.end?s===u:u.startsWith(s)});return(()=>{const a=qo.cloneNode(!0);return go(a,xn(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{[e.inactiveClass]:!o(),[e.activeClass]:o(),...t.classList}},get["aria-current"](){return o()?"page":void 0}}),!1,!1),a})()}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var O=function(){return O=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},O.apply(this,arguments)};function En(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var F=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,V=Object.keys,G=Array.isArray;typeof Promise<"u"&&!F.Promise&&(F.Promise=Promise);function Z(e,t){return typeof t!="object"||V(t).forEach(function(n){e[n]=t[n]}),e}var dt=Object.getPrototypeOf,Go={}.hasOwnProperty;function ie(e,t){return Go.call(e,t)}function Je(e,t){typeof t=="function"&&(t=t(dt(e))),(typeof Reflect>"u"?V:Reflect.ownKeys)(t).forEach(function(n){_e(e,n,t[n])})}var ui=Object.defineProperty;function _e(e,t,n,r){ui(e,t,Z(n&&ie(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Ze(e){return{from:function(t){return e.prototype=Object.create(t.prototype),_e(e.prototype,"constructor",e),{extend:Je.bind(null,e.prototype)}}}}var Qo=Object.getOwnPropertyDescriptor;function tr(e,t){var n=Qo(e,t),r;return n||(r=dt(e))&&tr(r,t)}var Jo=[].slice;function un(e,t,n){return Jo.call(e,t,n)}function li(e,t){return t(e)}function it(e){if(!e)throw new Error("Assertion Failed")}function ci(e){F.setImmediate?setImmediate(e):setTimeout(e,0)}function fi(e,t){return e.reduce(function(n,r,i){var o=t(r,i);return o&&(n[o[0]]=o[1]),n},{})}function Zo(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function be(e,t){if(ie(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var o=be(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(a!==-1){var s=e[t.substr(0,a)];return s===void 0?void 0:be(s,t.substr(a+1))}}function le(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){it(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)le(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var a=t.substr(0,o),s=t.substr(o+1);if(s==="")n===void 0?G(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var u=e[a];(!u||!ie(e,a))&&(u=e[a]={}),le(u,s,n)}}else n===void 0?G(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ea(e,t){typeof t=="string"?le(e,t,void 0):"length"in t&&[].map.call(t,function(n){le(e,n,void 0)})}function di(e){var t={};for(var n in e)ie(e,n)&&(t[n]=e[n]);return t}var ta=[].concat;function hi(e){return ta.apply([],e)}var pi="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(hi([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return F[e]}),na=pi.map(function(e){return F[e]});fi(pi,function(e){return[e,!0]});var Ce=null;function xt(e){Ce=typeof WeakMap<"u"&&new WeakMap;var t=An(e);return Ce=null,t}function An(e){if(!e||typeof e!="object")return e;var t=Ce&&Ce.get(e);if(t)return t;if(G(e)){t=[],Ce&&Ce.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(An(e[n]))}else if(na.indexOf(e.constructor)>=0)t=e;else{var i=dt(e);t=i===Object.prototype?{}:Object.create(i),Ce&&Ce.set(e,t);for(var o in e)ie(e,o)&&(t[o]=An(e[o]))}return t}var ra={}.toString;function Cn(e){return ra.call(e).slice(8,-1)}var kn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ia=typeof kn=="symbol"?function(e){var t;return e!=null&&(t=e[kn])&&t.apply(e)}:function(){return null},ze={};function me(e){var t,n,r,i;if(arguments.length===1){if(G(e))return e.slice();if(this===ze&&typeof e=="string")return[e];if(i=ia(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var nr=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},pe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function vi(e,t){pe=e,yi=t}var yi=function(){return!0},oa=!new Error("").stack;function Ue(){if(oa)try{throw Ue.arguments,new Error}catch(e){return e}return new Error}function Dn(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(yi).map(function(r){return`
`+r}).join("")):""}var aa=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],mi=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],rr=aa.concat(mi),sa={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function et(e,t){this._e=Ue(),this.name=e,this.message=t}Ze(et).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Dn(this._e,2))}},toString:function(){return this.name+": "+this.message}});function gi(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function zt(e,t,n,r){this._e=Ue(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=gi(e,t)}Ze(zt).from(et);function ut(e,t){this._e=Ue(),this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=gi(e,t)}Ze(ut).from(et);var ir=rr.reduce(function(e,t){return e[t]=t+"Error",e},{}),ua=et,T=rr.reduce(function(e,t){var n=t+"Error";function r(i,o){this._e=Ue(),this.name=n,i?typeof i=="string"?(this.message=""+i+(o?`
 `+o:""),this.inner=o||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=sa[t]||n,this.inner=null)}return Ze(r).from(ua),e[t]=r,e},{});T.Syntax=SyntaxError;T.Type=TypeError;T.Range=RangeError;var Er=mi.reduce(function(e,t){return e[t+"Error"]=T[t],e},{});function la(e,t){if(!e||e instanceof et||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Er[e.name])return e;var n=new Er[e.name](t||e.message,e);return"stack"in e&&_e(n,"stack",{get:function(){return this.inner.stack}}),n}var ln=rr.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=T[t]),e},{});ln.ModifyError=zt;ln.DexieError=et;ln.BulkError=ut;function M(){}function St(e){return e}function ca(e,t){return e==null||e===St?t:function(n){return t(e(n))}}function Le(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function fa(e,t){return e===M?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Le(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Le(i,this.onerror):i),o!==void 0?o:n}}function da(e,t){return e===M?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Le(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Le(r,this.onerror):r)}}function ha(e,t){return e===M?t:function(n){var r=e.apply(this,arguments);Z(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Le(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Le(o,this.onerror):o),r===void 0?a===void 0?void 0:a:Z(r,a)}}function pa(e,t){return e===M?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function or(e,t){return e===M?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}var ht={},va=100,ya=20,bi=100,ar=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,dt(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,dt(t),e]}(),Pn=ar[0],Yt=ar[1],Rn=ar[2],wi=Yt&&Yt.then,Mt=Pn&&Pn.constructor,sr=!!Rn,Tn=!1,ma=Rn?function(){Rn.then(Rt)}:F.setImmediate?setImmediate.bind(null,Rt):F.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Rt(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Rt,0)},pt=function(e,t){ot.push([e,t]),Xt&&(ma(),Xt=!1)},In=!0,Xt=!0,Me=[],Nt=[],Kn=null,On=St,Xe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:kr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{kr(e[0],e[1])}catch{}})}},P=Xe,ot=[],Ne=0,Lt=[];function k(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=M,this._lib=!1;var t=this._PSD=P;if(pe&&(this._stackHolder=Ue(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==ht)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Bn(this,this._value);return}this._state=null,this._value=null,++t.ref,xi(this,e)}var $n={get:function(){var e=P,t=Gt;function n(r,i){var o=this,a=!e.global&&(e!==P||t!==Gt),s=a&&!xe(),u=new k(function(l,c){ur(o,new _i(Jt(r,e,a,s),Jt(i,e,a,s),l,c,e))});return pe&&Ai(u,this),u}return n.prototype=ht,n},set:function(e){_e(this,"then",e&&e.prototype===ht?$n:{get:function(){return e},set:$n.set})}};Je(k.prototype,{then:$n,_then:function(e,t){ur(this,new _i(null,null,e,t,P))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Ft(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Ft(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Ft(t)})},stack:{get:function(){if(this._stack)return this._stack;try{Tn=!0;var e=Ei(this,[],ya),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Tn=!1}}},timeout:function(e,t){var n=this;return e<1/0?new k(function(r,i){var o=setTimeout(function(){return i(new T.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&_e(k.prototype,Symbol.toStringTag,"Dexie.Promise");Xe.env=Ci();function _i(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}Je(k,{all:function(){var e=me.apply(null,arguments).map(Qt);return new k(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,o){return k.resolve(i).then(function(a){e[o]=a,--r||t(e)},n)})})},resolve:function(e){if(e instanceof k)return e;if(e&&typeof e.then=="function")return new k(function(n,r){e.then(n,r)});var t=new k(ht,!0,e);return Ai(t,Kn),t},reject:Ft,race:function(){var e=me.apply(null,arguments).map(Qt);return new k(function(t,n){e.map(function(r){return k.resolve(r).then(t,n)})})},PSD:{get:function(){return P},set:function(e){return P=e}},totalEchoes:{get:function(){return Gt}},newPSD:Pe,usePSD:nt,scheduler:{get:function(){return pt},set:function(e){pt=e}},rejectionMapper:{get:function(){return On},set:function(e){On=e}},follow:function(e,t){return new k(function(n,r){return Pe(function(i,o){var a=P;a.unhandleds=[],a.onunhandled=o,a.finalize=Le(function(){var s=this;ba(function(){s.unhandleds.length===0?i():o(s.unhandleds[0])})},a.finalize),e()},t,n,r)})}});Mt&&(Mt.allSettled&&_e(k,"allSettled",function(){var e=me.apply(null,arguments).map(Qt);return new k(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,o){return k.resolve(i).then(function(a){return r[o]={status:"fulfilled",value:a}},function(a){return r[o]={status:"rejected",reason:a}}).then(function(){return--n||t(r)})})})}),Mt.any&&typeof AggregateError<"u"&&_e(k,"any",function(){var e=me.apply(null,arguments).map(Qt);return new k(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(o,a){return k.resolve(o).then(function(s){return t(s)},function(s){i[a]=s,--r||n(new AggregateError(i))})})})}));function xi(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Et();n&&typeof n.then=="function"?xi(e,function(i,o){n instanceof k?n._then(i,o):n.then(i,o)}):(e._state=!0,e._value=n,Si(e)),r&&At()}},Bn.bind(null,e))}catch(n){Bn(e,n)}}function Bn(e,t){if(Nt.push(t),e._state===null){var n=e._lib&&Et();t=On(t),e._state=!1,e._value=t,pe&&t!==null&&typeof t=="object"&&!t._promise&&Zo(function(){var r=tr(t,"stack");t._promise=e,_e(t,"stack",{get:function(){return Tn?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),wa(e),Si(e),n&&At()}}function Si(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)ur(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Ne===0&&(++Ne,pt(function(){--Ne===0&&lr()},[]))}function ur(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Ne,pt(ga,[n,e,t])}function ga(e,t,n){try{Kn=t;var r,i=t._value;t._state?r=e(i):(Nt.length&&(Nt=[]),r=e(i),Nt.indexOf(i)===-1&&_a(t)),n.resolve(r)}catch(o){n.reject(o)}finally{Kn=null,--Ne===0&&lr(),--n.psd.ref||n.psd.finalize()}}function Ei(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i=e._value,o,a;i!=null?(o=i.name||"Error",a=i.message||i,r=Dn(i,0)):(o=i,a=""),t.push(o+(a?": "+a:"")+r)}return pe&&(r=Dn(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Ei(e._prev,t,n)),t}function Ai(e,t){var n=t?t._numPrev+1:0;n<va&&(e._prev=t,e._numPrev=n)}function Rt(){Et()&&At()}function Et(){var e=In;return In=!1,Xt=!1,e}function At(){var e,t,n;do for(;ot.length>0;)for(e=ot,ot=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(ot.length>0);In=!0,Xt=!0}function lr(){var e=Me;Me=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Lt.slice(0),n=t.length;n;)t[--n]()}function ba(e){function t(){e(),Lt.splice(Lt.indexOf(t),1)}Lt.push(t),++Ne,pt(function(){--Ne===0&&lr()},[])}function wa(e){Me.some(function(t){return t._value===e._value})||Me.push(e)}function _a(e){for(var t=Me.length;t;)if(Me[--t]._value===e._value){Me.splice(t,1);return}}function Ft(e){return new k(ht,!1,e)}function j(e,t){var n=P;return function(){var r=Et(),i=P;try{return Re(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{Re(i,!1),r&&At()}}}var X={awaits:0,echoes:0,id:0},xa=0,jt=[],pn=0,Gt=0,Sa=0;function Pe(e,t,n,r){var i=P,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Sa;var a=Xe.env;o.env=sr?{Promise:k,PromiseProp:{value:k,configurable:!0,writable:!0},all:k.all,race:k.race,allSettled:k.allSettled,any:k.any,resolve:k.resolve,reject:k.reject,nthen:Ar(a.nthen,o),gthen:Ar(a.gthen,o)}:{},t&&Z(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=nt(o,e,n,r);return o.ref===0&&o.finalize(),s}function tt(){return X.id||(X.id=++xa),++X.awaits,X.echoes+=bi,X.id}function xe(){return X.awaits?(--X.awaits===0&&(X.id=0),X.echoes=X.awaits*bi,!0):!1}(""+wi).indexOf("[native code]")===-1&&(tt=xe=M);function Qt(e){return X.echoes&&e&&e.constructor===Mt?(tt(),e.then(function(t){return xe(),t},function(t){return xe(),q(t)})):e}function Ea(e){++Gt,(!X.echoes||--X.echoes===0)&&(X.echoes=X.id=0),jt.push(P),Re(e,!0)}function Aa(){var e=jt[jt.length-1];jt.pop(),Re(e,!1)}function Re(e,t){var n=P;if((t?X.echoes&&(!pn++||e!==P):pn&&(!--pn||e!==P))&&ki(t?Ea.bind(null,e):Aa),e!==P&&(P=e,n===Xe&&(Xe.env=Ci()),sr)){var r=Xe.env.Promise,i=e.env;Yt.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(F,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Ci(){var e=F.Promise;return sr?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(F,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Yt.then,gthen:e.prototype.then}:{}}function nt(e,t,n,r,i){var o=P;try{return Re(e,!0),t(n,r,i)}finally{Re(o,!1)}}function ki(e){wi.call(Pn,e)}function Jt(e,t,n,r){return typeof e!="function"?e:function(){var i=P;n&&tt(),Re(t,!0);try{return e.apply(this,arguments)}finally{Re(i,!1),r&&ki(xe)}}}function Ar(e,t){return function(n,r){return e.call(this,Jt(n,t),Jt(r,t))}}var Cr="unhandledrejection";function kr(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(F.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Cr,!0,!0),Z(r,i)):F.CustomEvent&&(r=new CustomEvent(Cr,{detail:i}),Z(r,i)),r&&F.dispatchEvent&&(dispatchEvent(r),!F.PromiseRejectionEvent&&F.onunhandledrejection))try{F.onunhandledrejection(r)}catch{}pe&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var q=k.reject;function Mn(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!P.letThrough&&!e._vip){if(e._state.openComplete)return q(new T.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return q(new T.DatabaseClosed);e.open().catch(M)}return e._state.dbReadyPromise.then(function(){return Mn(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===ir.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Mn(e,t,n,r)})):q(o)}return i._promise(t,function(o,a){return Pe(function(){return P.trans=i,r(o,a,i)})}).then(function(o){return i._completion.then(function(){return o})})}}var Dr="3.2.2",Oe=String.fromCharCode(65535),Nn=-1/0,ve="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Di="String expected.",lt=[],cn=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ca=cn,ka=cn,Pi=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},fn="__dbnames",vn="readonly",yn="readwrite";function Fe(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Ri={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Tt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=xt(t),delete t[e]),t}:function(t){return t}}var Da=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||P.trans,o=this.name;function a(u,l,c){if(!c.schema[o])throw new T.NotFound("Table "+o+" not part of transaction");return n(c.idbtrans,c)}var s=Et();try{return i&&i.db===this.db?i===P.trans?i._promise(t,a,r):Pe(function(){return i._promise(t,a,r)},{trans:i,transless:P.transless||P}):Mn(this.db,t,[this.name],a)}finally{s&&At()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(o){return r.hook.reading.fire(o)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(G(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=V(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(c){return c.compound&&n.every(function(f){return c.keyPath.indexOf(f)>=0})&&c.keyPath.every(function(f){return n.indexOf(f)>=0})})[0];if(r&&this.db._maxKey!==Oe)return this.where(r.name).equals(r.keyPath.map(function(c){return t[c]}));!r&&pe&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,o=this.db._deps.indexedDB;function a(c,f){try{return o.cmp(c,f)===0}catch{return!1}}var s=n.reduce(function(c,f){var d=c[0],y=c[1],h=i[f],p=t[f];return[d||h,d||!h?Fe(y,h&&h.multi?function(m){var S=be(m,f);return G(S)&&S.some(function(x){return a(p,x)})}:function(m){return a(p,be(m,f))}):y]},[null,null]),u=s[0],l=s[1];return u?this.where(u.name).equals(t[u.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,G(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var i=Object.create(t.prototype);for(var o in r)if(ie(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){Z(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,s=t;return a&&o&&(s=Tt(a)(t)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"add",keys:n!=null?[n]:null,values:[s]})}).then(function(u){return u.numFailures?k.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{le(t,a,u)}catch{}return u})},e.prototype.update=function(t,n){if(typeof t=="object"&&!G(t)){var r=be(t,this.schema.primKey.keyPath);if(r===void 0)return q(new T.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?V(n).forEach(function(i){le(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,o=i.auto,a=i.keyPath,s=t;return a&&o&&(s=Tt(a)(t)),this._trans("readwrite",function(u){return r.core.mutate({trans:u,type:"put",values:[s],keys:n!=null?[n]:null})}).then(function(u){return u.numFailures?k.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{le(t,a,u)}catch{}return u})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?k.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Ri})}).then(function(n){return n.numFailures?k.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(o){return n.hook.reading.fire(o)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,l=u.auto,c=u.keyPath;if(c&&o)throw new T.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,d=c&&l?t.map(Tt(c)):t;return i.core.mutate({trans:s,type:"add",keys:o,values:d,wantResults:a}).then(function(y){var h=y.numFailures,p=y.results,m=y.lastResult,S=y.failures,x=a?p:m;if(h===0)return x;throw new ut(i.name+".bulkAdd(): "+h+" of "+f+" operations failed",S)})})},e.prototype.bulkPut=function(t,n,r){var i=this,o=Array.isArray(n)?n:void 0;r=r||(o?void 0:n);var a=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var u=i.schema.primKey,l=u.auto,c=u.keyPath;if(c&&o)throw new T.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var f=t.length,d=c&&l?t.map(Tt(c)):t;return i.core.mutate({trans:s,type:"put",keys:o,values:d,wantResults:a}).then(function(y){var h=y.numFailures,p=y.results,m=y.lastResult,S=y.failures,x=a?p:m;if(h===0)return x;throw new ut(i.name+".bulkPut(): "+h+" of "+f+" operations failed",S)})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var o=i.numFailures,a=i.lastResult,s=i.failures;if(o===0)return a;throw new ut(n.name+".bulkDelete(): "+o+" of "+r+" operations failed",s)})},e}();function Ct(e){var t={},n=function(s,u){if(u){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return t[s].subscribe.apply(null,c),e}else if(typeof s=="string")return t[s]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(s,u,l){if(typeof s=="object")return a(s);u||(u=pa),l||(l=M);var c={subscribers:[],fire:l,subscribe:function(f){c.subscribers.indexOf(f)===-1&&(c.subscribers.push(f),c.fire=u(c.fire,f))},unsubscribe:function(f){c.subscribers=c.subscribers.filter(function(d){return d!==f}),c.fire=c.subscribers.reduce(u,l)}};return t[s]=n[s]=c,c}function a(s){V(s).forEach(function(u){var l=s[u];if(G(l))o(u,s[u][0],s[u][1]);else if(l==="asap")var c=o(u,St,function(){for(var d=arguments.length,y=new Array(d);d--;)y[d]=arguments[d];c.subscribers.forEach(function(h){ci(function(){h.apply(null,y)})})});else throw new T.InvalidArgument("Invalid event config")})}}function kt(e,t){return Ze(t).from({prototype:e}),t}function Pa(e){return kt(Da.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Ct(null,{creating:[fa,M],reading:[ca,St],updating:[ha,M],deleting:[da,M]})})}function He(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function mn(e,t){e.filter=Fe(e.filter,t)}function gn(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Fe(r(),t())}:t,e.justLimit=n&&!r}function Ra(e,t){e.isMatch=Fe(e.isMatch,t)}function Wt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new T.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Pr(e,t,n){var r=Wt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function It(e,t,n,r){var i=e.replayFilter?Fe(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(s,u,l){if(!i||i(u,l,function(d){return u.stop(d)},function(d){return u.fail(d)})){var c=u.primaryKey,f=""+c;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(c)),ie(o,f)||(o[f]=!0,t(s,u,l))}};return Promise.all([e.or._iterate(a,n),Rr(Pr(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}else return Rr(Pr(e,r,n),Fe(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Rr(e,t,n,r){var i=r?function(a,s,u){return n(r(a),s,u)}:n,o=j(i);return e.then(function(a){if(a)return a.start(function(){var s=function(){return a.continue()};(!t||t(a,function(u){return s=u},function(u){a.stop(u),s=M},function(u){a.fail(u),s=M}))&&o(a.value,a,function(u){return s=u}),s()})})}function J(e,t){try{var n=Tr(e),r=Tr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Ia(Ir(e),Ir(t));case"Array":return Ta(e,t)}}catch{}return NaN}function Ta(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var a=J(e[o],t[o]);if(a!==0)return a}return n===r?0:n<r?-1:1}function Ia(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}function Tr(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=Cn(e);return n==="ArrayBuffer"?"binary":n}function Ir(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Ka=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,q.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,q.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Fe(n.algorithm,t)},e.prototype._iterate=function(t,n){return It(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&Z(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return It(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,o=i.table.core;if(He(i,!0))return o.count({trans:r,query:{index:Wt(i,o.schema),range:i.range}}).then(function(s){return Math.min(s,i.limit)});var a=0;return It(i,function(){return++a,!1},r,o).then(function(){return a})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],o=r.length-1;function a(l,c){return c?a(l[r[c]],c-1):l[i]}var s=this._ctx.dir==="next"?1:-1;function u(l,c){var f=a(l,o),d=a(c,o);return f<d?-s:f>d?s:0}return this.toArray(function(l){return l.sort(u)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&He(i,!0)&&i.limit>0){var o=i.valueMapper,a=Wt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:a,range:i.range}}).then(function(u){var l=u.result;return o?l.map(o):l})}else{var s=[];return It(i,function(u){return s.push(u)},r,i.table.core).then(function(){return s})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,He(n)?gn(n,function(){var r=t;return function(i,o){return r===0?!0:r===1?(--r,!1):(o(function(){i.advance(r),r=0}),!1)}}):gn(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),gn(this._ctx,function(){var n=t;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this},e.prototype.until=function(t,n){return mn(this._ctx,function(r,i,o){return t(r.value)?(i(o),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return mn(this._ctx,function(n){return t(n.value)}),Ra(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&He(n,!0)&&n.limit>0)return this._read(function(i){var o=Wt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(function(i){var o=i.result;return o}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return mn(this._ctx,function(i){var o=i.primaryKey.toString(),a=ie(r,o);return r[o]=!0,!a}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var o;if(typeof t=="function")o=t;else{var a=V(t),s=a.length;o=function(S){for(var x=!1,b=0;b<s;++b){var w=a[b],v=t[w];be(S,w)!==v&&(le(S,w,v),x=!0)}return x}}var u=r.table.core,l=u.schema.primaryKey,c=l.outbound,f=l.extractKey,d=n.db._options.modifyChunkSize||200,y=[],h=0,p=[],m=function(S,x){var b=x.failures,w=x.numFailures;h+=S-w;for(var v=0,g=V(b);v<g.length;v++){var C=g[v];y.push(b[C])}};return n.clone().primaryKeys().then(function(S){var x=function(b){var w=Math.min(d,S.length-b);return u.getMany({trans:i,keys:S.slice(b,b+w),cache:"immutable"}).then(function(v){for(var g=[],C=[],A=c?[]:null,_=[],E=0;E<w;++E){var D=v[E],$={value:xt(D),primKey:S[b+E]};o.call($,$.value,$)!==!1&&($.value==null?_.push(S[b+E]):!c&&J(f(D),f($.value))!==0?(_.push(S[b+E]),g.push($.value)):(C.push($.value),c&&A.push(S[b+E])))}var K=He(r)&&r.limit===1/0&&(typeof t!="function"||t===bn)&&{index:r.index,range:r.range};return Promise.resolve(g.length>0&&u.mutate({trans:i,type:"add",values:g}).then(function(W){for(var R in W.failures)_.splice(parseInt(R),1);m(g.length,W)})).then(function(){return(C.length>0||K&&typeof t=="object")&&u.mutate({trans:i,type:"put",keys:A,values:C,criteria:K,changeSpec:typeof t!="function"&&t}).then(function(W){return m(C.length,W)})}).then(function(){return(_.length>0||K&&t===bn)&&u.mutate({trans:i,type:"delete",keys:_,criteria:K}).then(function(W){return m(_.length,W)})}).then(function(){return S.length>b+w&&x(b+d)})})};return x(0).then(function(){if(y.length>0)throw new zt("Error modifying one or more objects",y,h,p);return S.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return He(t)&&(t.isPrimKey&&!ka||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,o=n;return t.table.core.count({trans:r,query:{index:i,range:o}}).then(function(a){return t.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(function(s){var u=s.failures;s.lastResult,s.results;var l=s.numFailures;if(l)throw new zt("Could not delete some values",Object.keys(u).map(function(c){return u[c]}),a-l);return a-l})})}):this.modify(bn)},e}(),bn=function(e,t){return t.value=null};function Oa(e){return kt(Ka.prototype,function(n,r){this.db=e;var i=Ri,o=null;if(r)try{i=r()}catch(l){o=l}var a=n._ctx,s=a.table,u=s.hook.reading.fire;this._ctx={table:s,index:a.index,isPrimKey:!a.index||s.schema.primKey.keyPath&&a.index===s.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:a.or,valueMapper:u!==St?u:null}})}function $a(e,t){return e<t?-1:e===t?0:1}function Ba(e,t){return e>t?-1:e===t?0:1}function ne(e,t,n){var r=e instanceof Ii?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function qe(e){return new e.Collection(e,function(){return Ti("")}).limit(0)}function Ma(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function Na(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function La(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,u=0;u<a;++u){var l=t[u];if(l!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[u],l)<0&&(s=u)}return a<r.length&&o==="next"?e+n.substr(e.length):a<e.length&&o==="prev"?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function Kt(e,t,n,r){var i,o,a,s,u,l,c,f=n.length;if(!n.every(function(p){return typeof p=="string"}))return ne(e,Di);function d(p){i=Ma(p),o=Na(p),a=p==="next"?$a:Ba;var m=n.map(function(S){return{lower:o(S),upper:i(S)}}).sort(function(S,x){return a(S.lower,x.lower)});s=m.map(function(S){return S.upper}),u=m.map(function(S){return S.lower}),l=p,c=p==="next"?"":r}d("next");var y=new e.Collection(e,function(){return Ae(s[0],u[f-1]+r)});y._ondirectionchange=function(p){d(p)};var h=0;return y._addAlgorithm(function(p,m,S){var x=p.key;if(typeof x!="string")return!1;var b=o(x);if(t(b,u,h))return!0;for(var w=null,v=h;v<f;++v){var g=La(x,b,s[v],u[v],a,l);g===null&&w===null?h=v+1:(w===null||a(w,g)>0)&&(w=g)}return m(w!==null?function(){p.continue(w+c)}:S),!1}),y}function Ae(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Ti(e){return{type:1,lower:e,upper:e}}var Ii=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?qe(this):new this.Collection(this,function(){return Ae(t,n,!r,!i)})}catch{return ne(this,ve)}},e.prototype.equals=function(t){return t==null?ne(this,ve):new this.Collection(this,function(){return Ti(t)})},e.prototype.above=function(t){return t==null?ne(this,ve):new this.Collection(this,function(){return Ae(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?ne(this,ve):new this.Collection(this,function(){return Ae(t,void 0,!1)})},e.prototype.below=function(t){return t==null?ne(this,ve):new this.Collection(this,function(){return Ae(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?ne(this,ve):new this.Collection(this,function(){return Ae(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?ne(this,Di):this.between(t,t+Oe,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Kt(this,function(n,r){return n.indexOf(r[0])===0},[t],Oe)},e.prototype.equalsIgnoreCase=function(t){return Kt(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=me.apply(ze,arguments);return t.length===0?qe(this):Kt(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=me.apply(ze,arguments);return t.length===0?qe(this):Kt(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,Oe)},e.prototype.anyOf=function(){var t=this,n=me.apply(ze,arguments),r=this._cmp;try{n.sort(r)}catch{return ne(this,ve)}if(n.length===0)return qe(this);var i=new this.Collection(this,function(){return Ae(n[0],n[n.length-1])});i._ondirectionchange=function(a){r=a==="next"?t._ascending:t._descending,n.sort(r)};var o=0;return i._addAlgorithm(function(a,s,u){for(var l=a.key;r(l,n[o])>0;)if(++o,o===n.length)return s(u),!1;return r(l,n[o])===0?!0:(s(function(){a.continue(n[o])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[Nn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=me.apply(ze,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return ne(this,ve)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Nn,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,o=this._ascending,a=this._descending,s=this._min,u=this._max;if(t.length===0)return qe(this);if(!t.every(function(v){return v[0]!==void 0&&v[1]!==void 0&&o(v[0],v[1])<=0}))return ne(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",T.InvalidArgument);var l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;function f(v,g){for(var C=0,A=v.length;C<A;++C){var _=v[C];if(i(g[0],_[1])<0&&i(g[1],_[0])>0){_[0]=s(_[0],g[0]),_[1]=u(_[1],g[1]);break}}return C===A&&v.push(g),v}var d=o;function y(v,g){return d(v[0],g[0])}var h;try{h=t.reduce(f,[]),h.sort(y)}catch{return ne(this,ve)}var p=0,m=c?function(v){return o(v,h[p][1])>0}:function(v){return o(v,h[p][1])>=0},S=l?function(v){return a(v,h[p][0])>0}:function(v){return a(v,h[p][0])>=0};function x(v){return!m(v)&&!S(v)}var b=m,w=new this.Collection(this,function(){return Ae(h[0][0],h[h.length-1][1],!l,!c)});return w._ondirectionchange=function(v){v==="next"?(b=m,d=o):(b=S,d=a),h.sort(y)},w._addAlgorithm(function(v,g,C){for(var A=v.key;b(A);)if(++p,p===h.length)return g(C),!1;return x(A)?!0:(r._cmp(A,h[p][1])===0||r._cmp(A,h[p][0])===0||g(function(){d===o?v.continue(h[p][0]):v.continue(h[p][1])}),!1)}),w},e.prototype.startsWithAnyOf=function(){var t=me.apply(ze,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?qe(this):this.inAnyRange(t.map(function(n){return[n,n+Oe]})):ne(this,"startsWithAnyOf() only works with strings")},e}();function Fa(e){return kt(Ii.prototype,function(n,r,i){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i};var o=e._deps.indexedDB;if(!o)throw new T.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=function(a,s){return o.cmp(s,a)},this._max=function(a,s){return o.cmp(a,s)>0?a:s},this._min=function(a,s){return o.cmp(a,s)<0?a:s},this._IDBKeyRange=e._deps.IDBKeyRange})}function he(e){return j(function(t){return vt(t),e(t.target.error),!1})}function vt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var yt="storagemutated",De="x-storagemutated-1",Te=Ct(null,yt),ja=function(){function e(){}return e.prototype._lock=function(){return it(!P.global),++this._reculock,this._reculock===1&&!P.global&&(P.lockOwnerFor=this),this},e.prototype._unlock=function(){if(it(!P.global),--this._reculock===0)for(P.global||(P.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{nt(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&P.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(it(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new T.DatabaseClosed(i);case"MissingAPIError":throw new T.MissingAPI(i.message,i);default:throw new T.OpenFailed(i)}if(!this.active)throw new T.TransactionInactive;return it(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=j(function(o){vt(o),n._reject(t.error)}),t.onabort=j(function(o){vt(o),n.active&&n._reject(new T.Abort(t.error)),n.active=!1,n.on("abort").fire(o)}),t.oncomplete=j(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Te.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return q(new T.ReadOnly("Transaction is readonly"));if(!this.active)return q(new T.TransactionInactive);if(this._locked())return new k(function(a,s){i._blockedFuncs.push([function(){i._promise(t,n,r).then(a,s)},P])});if(r)return Pe(function(){var a=new k(function(s,u){i._lock();var l=n(s,u,i);l&&l.then&&l.then(s,u)});return a.finally(function(){return i._unlock()}),a._lib=!0,a});var o=new k(function(a,s){var u=n(a,s,i);u&&u.then&&u.then(a,s)});return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=k.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var o=n._waitingFor;return new k(function(a,s){r.then(function(u){return n._waitingQueue.push(j(a.bind(null,u)))},function(u){return n._waitingQueue.push(j(s.bind(null,u)))}).finally(function(){n._waitingFor===o&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new T.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(ie(n,t))return n[t];var r=this.schema[t];if(!r)throw new T.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function Wa(e){return kt(ja.prototype,function(n,r,i,o,a){var s=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=Ct(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new k(function(u,l){s._resolve=u,s._reject=l}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(u){var l=s.active;return s.active=!1,s.on.error.fire(u),s.parent?s.parent._reject(u):l&&s.idbtrans&&s.idbtrans.abort(),q(u)})})}function Ln(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+Ki(t)}}function Ki(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Oi(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:fi(n,function(r){return[r.name,r]})}}function Ua(e){return e.length===1?e[0]:e}var mt=function(e){try{return e.only([[]]),mt=function(){return[[]]},[[]]}catch{return mt=function(){return Oe},Oe}};function Fn(e){return e==null?function(){}:typeof e=="string"?Va(e):function(t){return be(t,e)}}function Va(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return be(n,e)}}function Kr(e){return[].slice.call(e)}var Ha=0;function ct(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function qa(e,t,n){function r(f,d){var y=Kr(f.objectStoreNames);return{schema:{name:f.name,tables:y.map(function(h){return d.objectStore(h)}).map(function(h){var p=h.keyPath,m=h.autoIncrement,S=G(p),x=p==null,b={},w={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:x,compound:S,keyPath:p,autoIncrement:m,unique:!0,extractKey:Fn(p)},indexes:Kr(h.indexNames).map(function(v){return h.index(v)}).map(function(v){var g=v.name,C=v.unique,A=v.multiEntry,_=v.keyPath,E=G(_),D={name:g,compound:E,keyPath:_,unique:C,multiEntry:A,extractKey:Fn(_)};return b[ct(_)]=D,D}),getIndexByKeyPath:function(v){return b[ct(v)]}};return b[":id"]=w.primaryKey,p!=null&&(b[ct(p)]=w.primaryKey),w})},hasGetAll:y.length>0&&"getAll"in d.objectStore(y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(f){if(f.type===3)return null;if(f.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var d=f.lower,y=f.upper,h=f.lowerOpen,p=f.upperOpen,m=d===void 0?y===void 0?null:t.upperBound(y,!!p):y===void 0?t.lowerBound(d,!!h):t.bound(d,y,!!h,!!p);return m}function o(f){var d=f.name;function y(m){var S=m.trans,x=m.type,b=m.keys,w=m.values,v=m.range;return new Promise(function(g,C){g=j(g);var A=S.objectStore(d),_=A.keyPath==null,E=x==="put"||x==="add";if(!E&&x!=="delete"&&x!=="deleteRange")throw new Error("Invalid operation type: "+x);var D=(b||w||{length:1}).length;if(b&&w&&b.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(D===0)return g({numFailures:0,failures:{},results:[],lastResult:void 0});var $,K=[],W=[],R=0,H=function(de){++R,vt(de)};if(x==="deleteRange"){if(v.type===4)return g({numFailures:R,failures:W,results:[],lastResult:void 0});v.type===3?K.push($=A.clear()):K.push($=A.delete(i(v)))}else{var Y=E?_?[w,b]:[w,null]:[b,null],te=Y[0],fe=Y[1];if(E)for(var oe=0;oe<D;++oe)K.push($=fe&&fe[oe]!==void 0?A[x](te[oe],fe[oe]):A[x](te[oe])),$.onerror=H;else for(var oe=0;oe<D;++oe)K.push($=A[x](te[oe])),$.onerror=H}var Ee=function(de){var rt=de.target.result;K.forEach(function(se,Dt){return se.error!=null&&(W[Dt]=se.error)}),g({numFailures:R,failures:W,results:x==="delete"?b:K.map(function(se){return se.result}),lastResult:rt})};$.onerror=function(de){H(de),Ee(de)},$.onsuccess=Ee})}function h(m){var S=m.trans,x=m.values,b=m.query,w=m.reverse,v=m.unique;return new Promise(function(g,C){g=j(g);var A=b.index,_=b.range,E=S.objectStore(d),D=A.isPrimaryKey?E:E.index(A.name),$=w?v?"prevunique":"prev":v?"nextunique":"next",K=x||!("openKeyCursor"in D)?D.openCursor(i(_),$):D.openKeyCursor(i(_),$);K.onerror=he(C),K.onsuccess=j(function(W){var R=K.result;if(!R){g(null);return}R.___id=++Ha,R.done=!1;var H=R.continue.bind(R),Y=R.continuePrimaryKey;Y&&(Y=Y.bind(R));var te=R.advance.bind(R),fe=function(){throw new Error("Cursor not started")},oe=function(){throw new Error("Cursor not stopped")};R.trans=S,R.stop=R.continue=R.continuePrimaryKey=R.advance=fe,R.fail=j(C),R.next=function(){var Ee=this,de=1;return this.start(function(){return de--?Ee.continue():Ee.stop()}).then(function(){return Ee})},R.start=function(Ee){var de=new Promise(function(se,Dt){se=j(se),K.onerror=he(Dt),R.fail=Dt,R.stop=function(Ui){R.stop=R.continue=R.continuePrimaryKey=R.advance=oe,se(Ui)}}),rt=function(){if(K.result)try{Ee()}catch(se){R.fail(se)}else R.done=!0,R.start=function(){throw new Error("Cursor behind last entry")},R.stop()};return K.onsuccess=j(function(se){K.onsuccess=rt,rt()}),R.continue=H,R.continuePrimaryKey=Y,R.advance=te,rt(),de},g(R)},C)})}function p(m){return function(S){return new Promise(function(x,b){x=j(x);var w=S.trans,v=S.values,g=S.limit,C=S.query,A=g===1/0?void 0:g,_=C.index,E=C.range,D=w.objectStore(d),$=_.isPrimaryKey?D:D.index(_.name),K=i(E);if(g===0)return x({result:[]});if(m){var W=v?$.getAll(K,A):$.getAllKeys(K,A);W.onsuccess=function(te){return x({result:te.target.result})},W.onerror=he(b)}else{var R=0,H=v||!("openKeyCursor"in $)?$.openCursor(K):$.openKeyCursor(K),Y=[];H.onsuccess=function(te){var fe=H.result;if(!fe)return x({result:Y});if(Y.push(v?fe.value:fe.primaryKey),++R===g)return x({result:Y});fe.continue()},H.onerror=he(b)}})}}return{name:d,schema:f,mutate:y,getMany:function(m){var S=m.trans,x=m.keys;return new Promise(function(b,w){b=j(b);for(var v=S.objectStore(d),g=x.length,C=new Array(g),A=0,_=0,E,D=function(R){var H=R.target;(C[H._pos]=H.result)!=null,++_===A&&b(C)},$=he(w),K=0;K<g;++K){var W=x[K];W!=null&&(E=v.get(x[K]),E._pos=K,E.onsuccess=D,E.onerror=$,++A)}A===0&&b(C)})},get:function(m){var S=m.trans,x=m.key;return new Promise(function(b,w){b=j(b);var v=S.objectStore(d),g=v.get(x);g.onsuccess=function(C){return b(C.target.result)},g.onerror=he(w)})},query:p(u),openCursor:h,count:function(m){var S=m.query,x=m.trans,b=S.index,w=S.range;return new Promise(function(v,g){var C=x.objectStore(d),A=b.isPrimaryKey?C:C.index(b.name),_=i(w),E=_?A.count(_):A.count();E.onsuccess=j(function(D){return v(D.target.result)}),E.onerror=he(g)})}}}var a=r(e,n),s=a.schema,u=a.hasGetAll,l=s.tables.map(function(f){return o(f)}),c={};return l.forEach(function(f){return c[f.name]=f}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(f){var d=c[f];if(!d)throw new Error("Table '"+f+"' not found");return c[f]},MIN_KEY:-1/0,MAX_KEY:mt(t),schema:s}}function za(e,t){return t.reduce(function(n,r){var i=r.create;return O(O({},n),i(n))},e)}function Ya(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var o=za(qa(t,i,r),e.dbcore);return{dbcore:o}}function cr(e,t){var n=e._novip,r=t.db,i=Ya(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach(function(o){var a=o.name;n.core.schema.tables.some(function(s){return s.name===a})&&(o.core=n.core.table(a),n[a]instanceof n.Table&&(n[a].core=o.core))})}function Zt(e,t,n,r){var i=e._novip;n.forEach(function(o){var a=r[o];t.forEach(function(s){var u=tr(s,o);(!u||"value"in u&&u.value===void 0)&&(s===i.Transaction.prototype||s instanceof i.Transaction?_e(s,o,{get:function(){return this.table(o)},set:function(l){ui(this,o,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):s[o]=new i.Table(o,a))})})}function jn(e,t){var n=e._novip;t.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function Xa(e,t){return e._cfg.version-t._cfg.version}function Ga(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),s=P.transless||P;Pe(function(){P.trans=o,P.transless=s,t===0?(V(i).forEach(function(u){fr(n,u,i[u].primKey,i[u].indexes)}),cr(e,n),k.follow(function(){return e.on.populate.fire(o)}).catch(a)):Qa(e,t,o,n).catch(a)})}function Qa(e,t,n,r){var i=e._novip,o=[],a=i._versions,s=i._dbSchema=dr(i,i.idbdb,r),u=!1,l=a.filter(function(f){return f._cfg.version>=t});l.forEach(function(f){o.push(function(){var d=s,y=f._cfg.dbschema;Un(i,d,r),Un(i,y,r),s=i._dbSchema=y;var h=$i(d,y);h.add.forEach(function(w){fr(r,w[0],w[1].primKey,w[1].indexes)}),h.change.forEach(function(w){if(w.recreate)throw new T.Upgrade("Not yet support for changing primary key");var v=r.objectStore(w.name);w.add.forEach(function(g){return Wn(v,g)}),w.change.forEach(function(g){v.deleteIndex(g.name),Wn(v,g)}),w.del.forEach(function(g){return v.deleteIndex(g)})});var p=f._cfg.contentUpgrade;if(p&&f._cfg.version>t){cr(i,r),n._memoizedTables={},u=!0;var m=di(y);h.del.forEach(function(w){m[w]=d[w]}),jn(i,[i.Transaction.prototype]),Zt(i,[i.Transaction.prototype],V(m),m),n.schema=m;var S=nr(p);S&&tt();var x,b=k.follow(function(){if(x=p(n),x&&S){var w=xe.bind(null,null);x.then(w,w)}});return x&&typeof x.then=="function"?k.resolve(x):b.then(function(){return x})}}),o.push(function(d){if(!u||!Ca){var y=f._cfg.dbschema;Za(y,d)}jn(i,[i.Transaction.prototype]),Zt(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function c(){return o.length?k.resolve(o.shift()(n.idbtrans)).then(c):k.resolve()}return c().then(function(){Ja(s,r)})}function $i(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],o=t[r];if(!i)n.add.push([r,o]);else{var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!cn)a.recreate=!0,n.change.push(a);else{var s=i.idxByName,u=o.idxByName,l=void 0;for(l in s)u[l]||a.del.push(l);for(l in u){var c=s[l],f=u[l];c?c.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}}return n}function fr(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(o){return Wn(i,o)}),i}function Ja(e,t){V(e).forEach(function(n){t.db.objectStoreNames.contains(n)||fr(t,n,e[n].primKey,e[n].indexes)})}function Za(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function Wn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function dr(e,t,n){var r={},i=un(t.objectStoreNames,0);return i.forEach(function(o){for(var a=n.objectStore(o),s=a.keyPath,u=Ln(Ki(s),s||"",!1,!1,!!a.autoIncrement,s&&typeof s!="string",!0),l=[],c=0;c<a.indexNames.length;++c){var f=a.index(a.indexNames[c]);s=f.keyPath;var d=Ln(f.name,s,!!f.unique,!!f.multiEntry,!1,s&&typeof s!="string",!1);l.push(d)}r[o]=Oi(o,u,l)}),r}function es(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=dr(r,t,n);r._storeNames=un(t.objectStoreNames,0),Zt(r,[r._allTables],V(i),i)}function ts(e,t){var n=dr(e,e.idbdb,t),r=$i(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function Un(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,o=0;o<i.length;++o){var a=i[o],s=n.objectStore(a);r._hasGetAll="getAll"in s;for(var u=0;u<s.indexNames.length;++u){var l=s.indexNames[u],c=s.index(l).keyPath,f=typeof c=="string"?c:"["+un(c).join("+")+"]";if(t[a]){var d=t[a].idxByName[f];d&&(d.name=l,delete t[a].idxByName[f],t[a].idxByName[l]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&F.WorkerGlobalScope&&F instanceof F.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function ns(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Ln(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),G(i),n===0)})}var rs=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){V(t).forEach(function(r){if(t[r]!==null){var i=ns(t[r]),o=i.shift();if(o.multi)throw new T.Schema("Primary key cannot be multi-valued");i.forEach(function(a){if(a.auto)throw new T.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new T.Schema("Index must have a name and cannot be an empty string")}),n[r]=Oi(r,o,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?Z(this._cfg.storesSource,t):t;var r=n._versions,i={},o={};return r.forEach(function(a){Z(i,a._cfg.storesSource),o=a._cfg.dbschema={},a._parseStoresSpec(i,o)}),n._dbSchema=o,jn(n,[n._allTables,n,n.Transaction.prototype]),Zt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],V(o),o),n._storeNames=V(o),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=or(this._cfg.contentUpgrade||M,t),this},e}();function is(e){return kt(rs.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function hr(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new mr(fn,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function pr(e){return e&&typeof e.databases=="function"}function os(e){var t=e.indexedDB,n=e.IDBKeyRange;return pr(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==fn})}):hr(t,n).toCollection().primaryKeys()}function as(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!pr(n)&&t!==fn&&hr(n,r).put({name:t}).catch(M)}function ss(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!pr(n)&&t!==fn&&hr(n,r).delete(t).catch(M)}function Vn(e){return Pe(function(){return P.letThrough=!0,e()})}function us(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function ls(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?q(t.dbOpenError):e});pe&&(t.openCanceller._stackHolder=Ue()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new T.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,a=null,s=!1;return k.race([r,(typeof navigator>"u"?k.resolve():us()).then(function(){return new k(function(u,l){if(i(),!n)throw new T.MissingAPI;var c=e.name,f=t.autoSchema?n.open(c):n.open(c,Math.round(e.verno*10));if(!f)throw new T.MissingAPI;f.onerror=he(l),f.onblocked=j(e._fireOnBlocked),f.onupgradeneeded=j(function(d){if(a=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=vt,a.abort(),f.result.close();var y=n.deleteDatabase(c);y.onsuccess=y.onerror=j(function(){l(new T.NoSuchDatabase("Database "+c+" doesnt exist"))})}else{a.onerror=he(l);var h=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;s=h<1,e._novip.idbdb=f.result,Ga(e,h/10,a,l)}},l),f.onsuccess=j(function(){a=null;var d=e._novip.idbdb=f.result,y=un(d.objectStoreNames);if(y.length>0)try{var h=d.transaction(Ua(y),"readonly");t.autoSchema?es(e,d,h):(Un(e,e._dbSchema,h),ts(e,h)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),cr(e,h)}catch{}lt.push(e),d.onversionchange=j(function(p){t.vcFired=!0,e.on("versionchange").fire(p)}),d.onclose=j(function(p){e.on("close").fire(p)}),s&&as(e._deps,c),u()},l)})})]).then(function(){return i(),t.onReadyBeingFired=[],k.resolve(Vn(function(){return e.on.ready.fire(e.vip)})).then(function u(){if(t.onReadyBeingFired.length>0){var l=t.onReadyBeingFired.reduce(or,M);return t.onReadyBeingFired=[],k.resolve(Vn(function(){return l(e.vip)})).then(u)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(u){t.dbOpenError=u;try{a&&a.abort()}catch{}return r===t.openCanceller&&e._close(),q(u)}).finally(function(){t.openComplete=!0,o()})}function Hn(e){var t=function(a){return e.next(a)},n=function(a){return e.throw(a)},r=o(t),i=o(n);function o(a){return function(s){var u=a(s),l=u.value;return u.done?l:!l||typeof l.then!="function"?G(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return o(t)()}function cs(e,t,n){var r=arguments.length;if(r<2)throw new T.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=hi(i);return[e,o,n]}function Bi(e,t,n,r,i){return k.resolve().then(function(){var o=P.transless||P,a=e._createTransaction(t,n,e._dbSchema,r),s={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===ir.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Bi(e,t,n,null,i)})):q(f)}var u=nr(i);u&&tt();var l,c=k.follow(function(){if(l=i.call(a,a),l)if(u){var f=xe.bind(null,null);l.then(f,f)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=Hn(l))},s);return(l&&typeof l.then=="function"?k.resolve(l).then(function(f){return a.active?f:q(new T.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return l})).then(function(f){return r&&a._resolve(),a._completion.then(function(){return f})}).catch(function(f){return a._reject(f),q(f)})})}function Ot(e,t,n){for(var r=G(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function fs(e){return O(O({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},o=[];function a(p,m,S){var x=ct(p),b=i[x]=i[x]||[],w=p==null?0:typeof p=="string"?1:p.length,v=m>0,g=O(O({},S),{isVirtual:v,keyTail:m,keyLength:w,extractKey:Fn(p),unique:!v&&S.unique});if(b.push(g),g.isPrimaryKey||o.push(g),w>1){var C=w===2?p[0]:p.slice(0,w-1);a(C,m+1,S)}return b.sort(function(A,_){return A.keyTail-_.keyTail}),g}var s=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[s];for(var u=0,l=r.indexes;u<l.length;u++){var c=l[u];a(c.keyPath,0,c)}function f(p){var m=i[ct(p)];return m&&m[0]}function d(p,m){return{type:p.type===1?2:p.type,lower:Ot(p.lower,p.lowerOpen?e.MAX_KEY:e.MIN_KEY,m),lowerOpen:!0,upper:Ot(p.upper,p.upperOpen?e.MIN_KEY:e.MAX_KEY,m),upperOpen:!0}}function y(p){var m=p.query.index;return m.isVirtual?O(O({},p),{query:{index:m,range:d(p.query.range,m.keyTail)}}):p}var h=O(O({},n),{schema:O(O({},r),{primaryKey:s,indexes:o,getIndexByKeyPath:f}),count:function(p){return n.count(y(p))},query:function(p){return n.query(y(p))},openCursor:function(p){var m=p.query.index,S=m.keyTail,x=m.isVirtual,b=m.keyLength;if(!x)return n.openCursor(p);function w(v){function g(A){A!=null?v.continue(Ot(A,p.reverse?e.MAX_KEY:e.MIN_KEY,S)):p.unique?v.continue(v.key.slice(0,b).concat(p.reverse?e.MIN_KEY:e.MAX_KEY,S)):v.continue()}var C=Object.create(v,{continue:{value:g},continuePrimaryKey:{value:function(A,_){v.continuePrimaryKey(Ot(A,e.MAX_KEY,S),_)}},primaryKey:{get:function(){return v.primaryKey}},key:{get:function(){var A=v.key;return b===1?A[0]:A.slice(0,b)}},value:{get:function(){return v.value}}});return C}return n.openCursor(y(p)).then(function(v){return v&&w(v)})}});return h}})}var ds={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:fs};function vr(e,t,n,r){return n=n||{},r=r||"",V(e).forEach(function(i){if(!ie(t,i))n[r+i]=void 0;else{var o=e[i],a=t[i];if(typeof o=="object"&&typeof a=="object"&&o&&a){var s=Cn(o),u=Cn(a);s!==u?n[r+i]=t[i]:s==="Object"?vr(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i])}else o!==a&&(n[r+i]=t[i])}}),V(t).forEach(function(i){ie(e,i)||(n[r+i]=t[i])}),n}function hs(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var ps={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return O(O({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=O(O({},n),{mutate:function(o){var a=P.trans,s=a.table(t).hook,u=s.deleting,l=s.creating,c=s.updating;switch(o.type){case"add":if(l.fire===M)break;return a._promise("readwrite",function(){return f(o)},!0);case"put":if(l.fire===M&&c.fire===M)break;return a._promise("readwrite",function(){return f(o)},!0);case"delete":if(u.fire===M)break;return a._promise("readwrite",function(){return f(o)},!0);case"deleteRange":if(u.fire===M)break;return a._promise("readwrite",function(){return d(o)},!0)}return n.mutate(o);function f(h){var p=P.trans,m=h.keys||hs(r,h);if(!m)throw new Error("Keys missing");return h=h.type==="add"||h.type==="put"?O(O({},h),{keys:m}):O({},h),h.type!=="delete"&&(h.values=En([],h.values,!0)),h.keys&&(h.keys=En([],h.keys,!0)),vs(n,h,m).then(function(S){var x=m.map(function(b,w){var v=S[w],g={onerror:null,onsuccess:null};if(h.type==="delete")u.fire.call(g,b,v,p);else if(h.type==="add"||v===void 0){var C=l.fire.call(g,b,h.values[w],p);b==null&&C!=null&&(b=C,h.keys[w]=b,r.outbound||le(h.values[w],r.keyPath,b))}else{var A=vr(v,h.values[w]),_=c.fire.call(g,A,b,v,p);if(_){var E=h.values[w];Object.keys(_).forEach(function(D){ie(E,D)?E[D]=_[D]:le(E,D,_[D])})}}return g});return n.mutate(h).then(function(b){for(var w=b.failures,v=b.results,g=b.numFailures,C=b.lastResult,A=0;A<m.length;++A){var _=v?v[A]:m[A],E=x[A];_==null?E.onerror&&E.onerror(w[A]):E.onsuccess&&E.onsuccess(h.type==="put"&&S[A]?h.values[A]:_)}return{failures:w,results:v,numFailures:g,lastResult:C}}).catch(function(b){return x.forEach(function(w){return w.onerror&&w.onerror(b)}),Promise.reject(b)})})}function d(h){return y(h.trans,h.range,1e4)}function y(h,p,m){return n.query({trans:h,values:!1,query:{index:r,range:p},limit:m}).then(function(S){var x=S.result;return f({type:"delete",keys:x,trans:h}).then(function(b){return b.numFailures>0?Promise.reject(b.failures[0]):x.length<m?{failures:[],numFailures:0,lastResult:void 0}:y(h,O(O({},p),{lower:x[x.length-1],lowerOpen:!0}),m)})})}}});return i}})}};function vs(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Mi(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)J(t.keys[i],e[o])===0&&(r.push(n?xt(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch{return null}}var ys={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return O(O({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Mi(r.keys,r.trans._cache,r.cache==="clone");return i?k.resolve(i):n.getMany(r).then(function(o){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?xt(o):o},o})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},wn;function yr(e){return!("from"in e)}var ye=function(e,t){if(this)Z(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new ye;return e&&"d"in e&&Z(n,e),n}};Je(ye.prototype,(wn={add:function(e){return en(this,e),this},addKey:function(e){return gt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return gt(t,n,n)}),this}},wn[kn]=function(){return qn(this)},wn));function gt(e,t,n){var r=J(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(yr(e))return Z(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(J(n,e.from)<0)return i?gt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Or(e);if(J(t,e.to)>0)return o?gt(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Or(e);J(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),J(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;i&&!e.l&&en(e,i),o&&a&&en(e,o)}}function en(e,t){function n(r,i){var o=i.from,a=i.to,s=i.l,u=i.r;gt(r,o,a),s&&n(r,s),u&&n(r,u)}yr(t)||n(e,t)}function ms(e,t){var n=qn(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=qn(e),a=o.next(i.from),s=a.value;!r.done&&!a.done;){if(J(s.from,i.to)<=0&&J(s.to,i.from)>=0)return!0;J(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(a=o.next(i.from)).value}return!1}function qn(e){var t=yr(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&J(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||J(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Or(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var o=i==="r"?"l":"r",a=O({},e),s=e[i];e.from=s.from,e.to=s.to,e[i]=s[i],a[i]=s[o],e[o]=a,a.d=$r(a)}e.d=$r(e)}function $r(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}var gs={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new ye(e.MIN_KEY,e.MAX_KEY);return O(O({},e),{table:function(r){var i=e.table(r),o=i.schema,a=o.primaryKey,s=a.extractKey,u=a.outbound,l=O(O({},i),{mutate:function(d){var y=d.trans,h=y.mutatedParts||(y.mutatedParts={}),p=function(C){var A="idb://"+t+"/"+r+"/"+C;return h[A]||(h[A]=new ye)},m=p(""),S=p(":dels"),x=d.type,b=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[],w=b[0],v=b[1],g=d.trans._cache;return i.mutate(d).then(function(C){if(G(w)){x!=="delete"&&(w=C.results),m.addKeys(w);var A=Mi(w,g);!A&&x!=="add"&&S.addKeys(w),(A||v)&&bs(p,o,A,v)}else if(w){var _={from:w.lower,to:w.upper};S.add(_),m.add(_)}else m.add(n),S.add(n),o.indexes.forEach(function(E){return p(E.name).add(n)});return C})}}),c=function(d){var y,h,p=d.query,m=p.index,S=p.range;return[m,new ye((y=S.lower)!==null&&y!==void 0?y:e.MIN_KEY,(h=S.upper)!==null&&h!==void 0?h:e.MAX_KEY)]},f={get:function(d){return[a,new ye(d.key)]},getMany:function(d){return[a,new ye().addKeys(d.keys)]},count:c,query:c,openCursor:c};return V(f).forEach(function(d){l[d]=function(y){var h=P.subscr;if(h){var p=function(g){var C="idb://"+t+"/"+r+"/"+g;return h[C]||(h[C]=new ye)},m=p(""),S=p(":dels"),x=f[d](y),b=x[0],w=x[1];if(p(b.name||"").add(w),!b.isPrimaryKey)if(d==="count")S.add(n);else{var v=d==="query"&&u&&y.values&&i.query(O(O({},y),{values:!1}));return i[d].apply(this,arguments).then(function(g){if(d==="query"){if(u&&y.values)return v.then(function(E){var D=E.result;return m.addKeys(D),g});var C=y.values?g.result.map(s):g.result;y.values?m.addKeys(C):S.addKeys(C)}else if(d==="openCursor"){var A=g,_=y.values;return A&&Object.create(A,{key:{get:function(){return S.addKey(A.primaryKey),A.key}},primaryKey:{get:function(){var E=A.primaryKey;return S.addKey(E),E}},value:{get:function(){return _&&m.addKey(A.primaryKey),A.value}}})}return g})}}return i[d].apply(this,arguments)}}),l}})}};function bs(e,t,n,r){function i(o){var a=e(o.name||"");function s(l){return l!=null?o.extractKey(l):null}var u=function(l){return o.multiEntry&&G(l)?l.forEach(function(c){return a.addKey(c)}):a.addKey(l)};(n||r).forEach(function(l,c){var f=n&&s(n[c]),d=r&&s(r[c]);J(f,d)!==0&&(f!=null&&u(f),d!=null&&u(d))})}t.indexes.forEach(i)}var mr=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=O({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:M,dbReadyPromise:null,cancelOpen:M,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};a.dbReadyPromise=new k(function(s){a.dbReadyResolve=s}),a.openCanceller=new k(function(s,u){a.cancelOpen=u}),this._state=a,this.name=t,this.on=Ct(this,"populate","blocked","versionchange","close",{ready:[or,M]}),this.on.ready.subscribe=li(this.on.ready.subscribe,function(s){return function(u,l){e.vip(function(){var c=r._state;if(c.openComplete)c.dbOpenError||k.resolve().then(u),l&&s(u);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(u),l&&s(u);else{s(u);var f=r;l||s(function d(){f.on.ready.unsubscribe(u),f.on.ready.unsubscribe(d)})}})}}),this.Collection=Oa(this),this.Table=Pa(this),this.Transaction=Wa(this),this.Version=is(this),this.WhereClause=Fa(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+s.oldVersion/10)}),this._maxKey=mt(n.IDBKeyRange),this._createTransaction=function(s,u,l,c){return new r.Transaction(s,u,l,r._options.chromeTransactionDurability,c)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),lt.filter(function(u){return u.name===r.name&&u!==r&&!u._state.vcFired}).map(function(u){return u.on("versionchange").fire(s)})},this.use(ds),this.use(ps),this.use(gs),this.use(ys),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new T.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new T.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(Xa),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||P.letThrough||this._vip)?t():new k(function(r,i){if(n._state.openComplete)return i(new T.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new T.DatabaseClosed);return}n.open().catch(M)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,o=t.name;o&&this.unuse({stack:n,name:o});var a=this._middlewares[n]||(this._middlewares[n]=[]);return a.push({stack:n,create:r,level:i??10,name:o}),a.sort(function(s,u){return s.level-u.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(o){return i?o.create!==i:r?o.name!==r:!1})),this},e.prototype.open=function(){return ls(this)},e.prototype._close=function(){var t=this._state,n=lt.indexOf(this);if(n>=0&&lt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new k(function(r){t.dbReadyResolve=r}),t.openCanceller=new k(function(r,i){t.cancelOpen=i})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new T.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new k(function(i,o){var a=function(){t.close();var s=t._deps.indexedDB.deleteDatabase(t.name);s.onsuccess=j(function(){ss(t._deps,t.name),i()}),s.onerror=he(o),s.onblocked=t._fireOnBlocked};if(n)throw new T.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return V(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=cs.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,o=P.trans;(!o||o.db!==this||t.indexOf("!")!==-1)&&(o=null);var a=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var s,u;try{if(u=n.map(function(c){var f=c instanceof i.Table?c.name:c;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t===vn)s=vn;else if(t=="rw"||t==yn)s=yn;else throw new T.InvalidArgument("Invalid transaction mode: "+t);if(o){if(o.mode===vn&&s===yn)if(a)o=null;else throw new T.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&u.forEach(function(c){if(o&&o.storeNames.indexOf(c)===-1)if(a)o=null;else throw new T.SubTransaction("Table "+c+" not included in parent transaction.")}),a&&o&&!o.active&&(o=null)}}catch(c){return o?o._promise(null,function(f,d){d(c)}):q(c)}var l=Bi.bind(null,this,s,u,o,r);return o?o._promise(s,l,"lock"):P.trans?nt(P.transless,function(){return i._whenReady(l)}):this._whenReady(l)},e.prototype.table=function(t){if(!ie(this._allTables,t))throw new T.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),ws=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",_s=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[ws]=function(){return this},e}();function Ni(e,t){return V(t).forEach(function(n){var r=e[n]||(e[n]=new ye);en(r,t[n])}),e}function Li(e){return new _s(function(t){var n=nr(e);function r(y){n&&tt();var h=function(){return Pe(e,{subscr:y,trans:null})},p=P.trans?nt(P.transless,h):h();return n&&p.then(xe,xe),p}var i=!1,o={},a={},s={get closed(){return i},unsubscribe:function(){i=!0,Te.storagemutated.unsubscribe(f)}};t.start&&t.start(s);var u=!1,l=!1;function c(){return V(a).some(function(y){return o[y]&&ms(o[y],a[y])})}var f=function(y){Ni(o,y),c()&&d()},d=function(){if(!(u||i)){o={};var y={},h=r(y);l||(Te(yt,f),l=!0),u=!0,Promise.resolve(h).then(function(p){u=!1,!i&&(c()?d():(o={},a=y,t.next&&t.next(p)))},function(p){u=!1,t.error&&t.error(p),s.unsubscribe()})}};return d(),s})}var zn;try{zn={indexedDB:F.indexedDB||F.mozIndexedDB||F.webkitIndexedDB||F.msIndexedDB,IDBKeyRange:F.IDBKeyRange||F.webkitIDBKeyRange}}catch{zn={indexedDB:null,IDBKeyRange:null}}var Ke=mr;Je(Ke,O(O({},ln),{delete:function(e){var t=new Ke(e,{addons:[]});return t.delete()},exists:function(e){return new Ke(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return os(Ke.dependencies).then(e)}catch{return q(new T.MissingAPI)}},defineClass:function(){function e(t){Z(this,t)}return e},ignoreTransaction:function(e){return P.trans?nt(P.transless,e):e()},vip:Vn,async:function(e){return function(){try{var t=Hn(e.apply(this,arguments));return!t||typeof t.then!="function"?k.resolve(t):t}catch(n){return q(n)}}},spawn:function(e,t,n){try{var r=Hn(e.apply(n,t||[]));return!r||typeof r.then!="function"?k.resolve(r):r}catch(i){return q(i)}},currentTransaction:{get:function(){return P.trans||null}},waitFor:function(e,t){var n=k.resolve(typeof e=="function"?Ke.ignoreTransaction(e):e).timeout(t||6e4);return P.trans?P.trans.waitFor(n):n},Promise:k,debug:{get:function(){return pe},set:function(e){vi(e,e==="dexie"?function(){return!0}:Pi)}},derive:Ze,extend:Z,props:Je,override:li,Events:Ct,on:Te,liveQuery:Li,extendObservabilitySet:Ni,getByKeyPath:be,setByKeyPath:le,delByKeyPath:ea,shallowClone:di,deepClone:xt,getObjectDiff:vr,cmp:J,asap:ci,minKey:Nn,addons:[],connections:lt,errnames:ir,dependencies:zn,semVer:Dr,version:Dr.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));Ke.maxKey=mt(Ke.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Te(yt,function(e){if(!ge){var t;cn?(t=document.createEvent("CustomEvent"),t.initCustomEvent(De,!0,!0,e)):t=new CustomEvent(De,{detail:e}),ge=!0,dispatchEvent(t),ge=!1}}),addEventListener(De,function(e){var t=e.detail;ge||tn(t)}));function tn(e){var t=ge;try{ge=!0,Te.storagemutated.fire(e)}finally{ge=t}}var ge=!1;if(typeof BroadcastChannel<"u"){var Br=new BroadcastChannel(De);Te(yt,function(e){ge||Br.postMessage(e)}),Br.onmessage=function(e){e.data&&tn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Te(yt,function(e){try{ge||(typeof localStorage<"u"&&localStorage.setItem(De,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&En([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:De,changedParts:e})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(e){if(e.key===De){var t=JSON.parse(e.newValue);t&&tn(t.changedParts)}});var Mr=self.document&&navigator.serviceWorker;Mr&&Mr.addEventListener("message",xs)}function xs(e){var t=e.data;t&&t.type===De&&tn(t.changedParts)}k.rejectionMapper=la;vi(pe,Pi);class Ss extends mr{decks;words;constructor(){super("vocabulary"),this.version(1).stores({decks:"++id, name",words:"++id, word, deckId"})}}const re=new Ss,Ge=e=>{const[t,n]=ee(),i=Li(e).subscribe(o=>{n(()=>o)});return nn(()=>{i.unsubscribe()}),t};const Es=z('<main><h1>Home</h1><ul aria-label="List of decks" class="deck-list"></ul></main>'),As=z("<li></li>"),Cs=()=>{const e=Ge(async()=>await re.decks.toArray());return(()=>{const t=Es.cloneNode(!0),n=t.firstChild,r=n.nextSibling;return B(r,I(ro,{get each(){return e()},children:i=>(()=>{const o=As.cloneNode(!0);return B(o,I(we,{class:"deck-card",get href(){return`/deck/${i.id?.toString()}`},get children(){return i.name}})),o})()})),B(t,I(we,{class:"button",href:"/create-deck",children:"Create deck"}),null),t})()},ks=z('<main><h1>Create Deck</h1><form><label for="input-create-deck-name">Name</label><input class="input" id="input-create-deck-name"><button class="button">Create</button></form></main>'),Ds=()=>{let e;const t=er(),n=r=>{r.preventDefault(),re.decks.add({name:e.value}).then(()=>t("/")).catch(console.error)};return(()=>{const r=ks.cloneNode(!0),i=r.firstChild,o=i.nextSibling,a=o.firstChild,s=a.nextSibling;o.addEventListener("submit",n);const u=e;return typeof u=="function"?$t(u,s):e=s,r})()};function dn(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Se(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Ut(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ut=function(n){return typeof n}:Ut=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ut(e)}function bt(e){Se(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Ut(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Ps(e,t){Se(2,arguments);var n=bt(e),r=dn(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function Fi(e,t){Se(2,arguments);var n=bt(e).getTime(),r=dn(t);return new Date(n+r)}var Rs=36e5;function Ts(e,t){Se(2,arguments);var n=dn(t);return Fi(e,n*Rs)}function Yn(e){Se(1,arguments);var t=bt(e);return t.setHours(0,0,0,0),t}var Is=6e4;function Ks(e,t){Se(2,arguments);var n=dn(t);return Fi(e,n*Is)}function Os(e,t){Se(2,arguments);var n=Yn(e),r=Yn(t);return n.getTime()===r.getTime()}function ji(e,t){Se(2,arguments);var n=bt(e),r=bt(t);return n.getTime()<r.getTime()}function $s(e){return Se(1,arguments),Os(e,Date.now())}const Bs=z('<main><h1></h1><h2>Word count: <!> | Due: </h2><div class="deck-actions"></div></main>'),Ms=()=>{const{id:e}=sn(),t=parseInt(e,10),n=Ge(async()=>await re.decks.get(parseInt(e,10))),r=Ge(async()=>await re.words.where("deckId").equals(t).count()),i=Ge(async()=>await re.words.where("deckId").equals(t).and(o=>ji(o.dueDate,new Date)).count());return(()=>{const o=Bs.cloneNode(!0),a=o.firstChild,s=a.nextSibling,u=s.firstChild,l=u.nextSibling;l.nextSibling;const c=s.nextSibling;return B(a,()=>n()?.name),B(s,r,l),B(s,i,null),B(c,I(we,{class:"button",href:`/deck/${e}/add-word`,children:"Add word"}),null),B(c,I(we,{class:"button success",href:`/deck/${e}/study`,children:"Study"}),null),o})()},Ns=30,Ls=.5,Fs=z('<form><label for="input-word-text">Word / Phrase</label><input class="input" id="input-word-text"><label for="input-word-meaning">Meaning</label><input class="input" id="input-word-meaning"><label for="input-word-context">Context</label><input class="input" id="input-word-context"><button class="button"></button></form>'),Wi=e=>{let t,n,r;const i=a=>{a.preventDefault(),e.onSubmit({word:t.value,meaning:n.value,context:r.value}),e.resetForm===!0&&(t.value="",n.value="",r.value="")},o=a=>a==null?"":a.toString();return(()=>{const a=Fs.cloneNode(!0),s=a.firstChild,u=s.nextSibling,l=u.nextSibling,c=l.nextSibling,f=c.nextSibling,d=f.nextSibling,y=d.nextSibling;a.addEventListener("submit",i);const h=t;typeof h=="function"?$t(h,u):t=u;const p=n;typeof p=="function"?$t(p,c):n=c;const m=r;return typeof m=="function"?$t(m,d):r=d,B(y,()=>e.submitText),ue(()=>u.value=o(e.defaultData?.word)),ue(()=>c.value=o(e.defaultData?.meaning)),ue(()=>d.value=o(e.defaultData?.context)),a})()};const js=z('<main><div class="added-words"></div><h1>Add Word</h1></main>'),Ws=()=>{const{id:e}=sn(),[t,n]=ee([]),r=i=>{re.words.add({word:i.word,meaning:i.meaning,context:i.context,dueDate:Ks(new Date,Ns),deckId:parseInt(e,10),nextIntervalDays:Ls}).then(()=>{n(o=>[i.word,...o])}).catch(console.error)};return(()=>{const i=js.cloneNode(!0),o=i.firstChild;return o.nextSibling,B(i,I(we,{class:"button narrow",href:`/deck/${e}`,children:"Back to Deck"}),o),B(o,I(ae,{get when(){return t().length>0},get children(){return["Just added: ",L(()=>t().join(", "))]}})),B(i,I(Wi,{onSubmit:r,submitText:"Add",resetForm:!0}),null),i})()},Us="modulepreload",Vs=function(e){return"/vocab-trainer/"+e},Nr={},Hs=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=Vs(o),o in Nr)return;Nr[o]=!0;const a=o.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const f=i[c];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const l=document.createElement("link");if(l.rel=a?"stylesheet":Us,a||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),a)return new Promise((c,f)=>{l.addEventListener("load",c),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())};function qs(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:a}=e;let s,u,l,c;const f=async(y=!0)=>{await l,y&&s?.addEventListener("controlling",h=>{h.isUpdate&&window.location.reload()}),await c?.()};async function d(){if("serviceWorker"in navigator){const{Workbox:y,messageSW:h}=await Hs(()=>import("./workbox-window.prod.es5.d2780aeb.js"),[]);c=async()=>{u&&u.waiting&&await h(u.waiting,{type:"SKIP_WAITING"})},s=new y("/vocab-trainer/sw.js",{scope:"/vocab-trainer/",type:"classic"}),s.addEventListener("activated",p=>{p.isUpdate||r?.()});{const p=()=>{n?.()};s.addEventListener("waiting",p),s.addEventListener("externalwaiting",p)}s.register({immediate:t}).then(p=>{u=p,o?o("/vocab-trainer/sw.js",p):i?.(p)}).catch(p=>{a?.(p)})}}return l=d(),f}function zs(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:o,onRegisterError:a}=e,[s,u]=ee(!1),[l,c]=ee(!1),f=qs({immediate:t,onOfflineReady(){c(!0),r?.()},onNeedRefresh(){u(!0),n?.()},onRegistered:i,onRegisteredSW:o,onRegisterError:a});return{needRefresh:[s,u],offlineReady:[l,c],updateServiceWorker:f}}const Ys=z('<main><h1>Settings</h1><div class="settings"><button class="button">Delete data</button><button class="button">Update</button></div></main>'),Xs=()=>{const e=()=>{re.delete().then(async()=>await re.open()).catch(console.error)},t=zs();return(()=>{const n=Ys.cloneNode(!0),r=n.firstChild,i=r.nextSibling,o=i.firstChild,a=o.nextSibling;return o.$$click=e,a.$$click=()=>t?.updateServiceWorker(),n})()};wt(["click"]);const Lr=z('<div class="card"></div>'),Gs=z('<div class="actions"><button class="button failure">Forgotton</button><button class="button success">Remembered</button></div>'),Fr=z('<p class="answer"></p>'),Qs=z('<div class="actions"><button class="button failure">Incorrect</button><button class="button success">Correct</button></div>'),Js=z("<p>Finished</p>"),Zs=z("<p>No words to study currently</p>"),eu=z('<main><div class="header"><h1>Study </h1></div></main>'),tu=z(`<div class="actions"><button class="button failure">Still can't recall</button><button class="button success">Remembered with context</button></div>`),nu=z('<div class="actions"><button class="button failure">Continue</button></div>'),ru=()=>{const{id:e}=sn(),[{word:t}]=oi(),n=parseInt(t,10),r=parseInt(e,10),i=Ge(async()=>await re.decks.get(r)),[o,a]=ee(),[s,u]=ee(),[l,c]=ee();re.words.where("deckId").equals(r).and(g=>ji(new Date(0),new Date)).toArray().then(g=>{const C=g.reduce((_,E)=>(_[E.id]={word:E,reviewed:!1},_),{});a(C),t!=null&&t!==""&&C[parseInt(t,10)]!=null&&u(C[n].word),u(f(C))}).catch(console.error);const f=g=>{const C=Object.values(g).filter(_=>!_.reviewed);if(C.length===0)return;const A=Math.floor(Math.random()*C.length);return C[A].word},d=()=>{c({userSaidTheyRememberedCorrectly:!0})},y=()=>{c({userSaidTheyRememberedCorrectly:!1})},h=()=>{c({userSaidTheyRememberedCorrectly:!0,requiredContext:!0})},p=()=>{c({userSaidTheyRememberedCorrectly:!1,forgotWithContext:!0})},m=()=>{const g=l()?.requiredContext===!0;x(g?1.1:2)},S=()=>{x(1)},x=g=>{const C=s(),A=C.nextIntervalDays,_=new Date;let E;E=A<1?Ts(_,A*24):Ps(_,A),$s(E)||(E=Yn(E)),re.words.update(C.id,{dueDate:E,nextIntervalDays:A*g}).catch(console.error);const D=o();D[C.id].reviewed=!0,a(D),u(f(D)),c(void 0)},b=g=>g==null?!0:Object.values(g).length>0,w=()=>{if(l()?.forgotWithContext===!0)return!1;const g=s();return g?.context!=null&&g.context!==""},v=g=>`/edit-word/${g}?returnTo=/deck/${r}/study?word=${g}`;return(()=>{const g=eu.cloneNode(!0),C=g.firstChild,A=C.firstChild;return A.firstChild,B(A,()=>i()?.name,null),B(C,I(ae,{get when(){return s()},get children(){return I(we,{class:"button narrow",get href(){return v(s()?.id)},children:"Edit"})}}),null),B(g,I(ae,{get when(){return s()},get children(){return[(()=>{const _=Lr.cloneNode(!0);return B(_,()=>s()?.word),_})(),I(ae,{get when(){return l()==null},get children(){const _=Gs.cloneNode(!0),E=_.firstChild,D=E.nextSibling;return E.$$click=y,D.$$click=d,_}}),I(ae,{get when(){return l()!=null},get children(){return[I(ae,{get when(){return!l()?.userSaidTheyRememberedCorrectly},get children(){return[L(()=>L(()=>!!w())()&&[(()=>{const _=Lr.cloneNode(!0);return B(_,()=>s()?.context),_})(),(()=>{const _=tu.cloneNode(!0),E=_.firstChild,D=E.nextSibling;return E.$$click=p,D.$$click=h,_})()]),L(()=>L(()=>!w())()&&[(()=>{const _=Fr.cloneNode(!0);return B(_,()=>s()?.meaning),_})(),(()=>{const _=nu.cloneNode(!0),E=_.firstChild;return E.$$click=S,_})()])]}}),I(ae,{get when(){return l()?.userSaidTheyRememberedCorrectly},get children(){return[(()=>{const _=Fr.cloneNode(!0);return B(_,()=>s()?.meaning),_})(),(()=>{const _=Qs.cloneNode(!0),E=_.firstChild,D=E.nextSibling;return E.$$click=S,D.$$click=m,_})()]}})]}})]}}),null),B(g,I(ae,{get when(){return L(()=>s()==null)()&&b(o())},get children(){return Js.cloneNode(!0)}}),null),B(g,I(ae,{get when(){return L(()=>o()!=null)()&&!b(o())},get children(){return Zs.cloneNode(!0)}}),null),g})()};wt(["click"]);const iu=z('<main><div class="header"><h1>Edit</h1></div></main>'),ou=()=>{const{id:e}=sn(),[{returnTo:t}]=oi(),n=parseInt(e,10),r=er(),i=t??"/",o=Ge(async()=>await re.words.get(n)),a=u=>{re.words.update(n,u).then(()=>r(i)).catch(console.error)},s=()=>{const u=o();return{word:u?.word,meaning:u?.meaning,context:u?.context}};return(()=>{const u=iu.cloneNode(!0),l=u.firstChild;return l.firstChild,B(l,I(we,{class:"button",href:i,children:"Back"}),null),B(u,I(ae,{get when(){return o()},get children(){return I(Wi,{onSubmit:a,submitText:"Update",get defaultData(){return s()}})}}),null),u})()},au=z('<div><header><nav></nav><button class="color-mode-switcher"></button></header><div class="outlet"></div></div>'),su=()=>{const e=window.matchMedia("(prefers-color-scheme: light)").matches,[t,n]=ee(e);window.matchMedia("(prefers-color-scheme: light)").addEventListener("change",i=>{document.documentElement.removeAttribute("class"),n(i.matches)});const r=()=>{const i=t()?"dark-mode":"light-mode";document.documentElement.classList.contains(i)?document.documentElement.classList.remove(i):document.documentElement.classList.add(i)};return(()=>{const i=au.cloneNode(!0),o=i.firstChild,a=o.firstChild,s=a.nextSibling,u=o.nextSibling;return B(a,I(we,{href:"/",children:"Home"}),null),B(a,I(we,{href:"/settings",children:"Settings"}),null),s.$$click=r,B(s,()=>t()?"Dark mode":"Light mode"),B(u,I(Yo,{get children(){return[I(Ie,{path:"/",element:Cs}),I(Ie,{path:"/settings",element:Xs}),I(Ie,{path:"/deck/:id",element:Ms}),I(Ie,{path:"/deck/:id/add-word",element:Ws}),I(Ie,{path:"/deck/:id/study",element:ru}),I(Ie,{path:"/edit-word/:id",element:ou}),I(Ie,{path:"/create-deck",element:Ds})]}})),i})()};wt(["click"]);fo(()=>I(zo,{get base(){return"/vocab-trainer/"},get children(){return I(su,{})}}),document.getElementById("root"));
